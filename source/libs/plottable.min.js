/**
 * Minified by jsDelivr using UglifyJS v3.0.24.
 * Original file: /npm/plottable@3.3.1/plottable.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3")):"function"==typeof define&&define.amd?define(["d3"],e):"object"==typeof exports?exports.Plottable=e(require("d3")):t.Plottable=e(t.d3)}(this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=130)}([function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}var i=n(100);e.Array=i;var o=n(103);e.Color=o;var a=n(104);e.DOM=a;var s=n(33);e.Math=s;var c=n(107);e.Stacking=c;var l=n(25);e.Window=l,r(n(101)),r(n(102)),r(n(12)),r(n(105)),r(n(106)),r(n(51)),r(n(108))},function(e,n){e.exports=t},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(7),a=n(4),s=n(6),c=n(9),l=n(0),u=n(12),h=n(10),p=n(47),d=n(48);e.Renderer=h.makeEnum(["svg","canvas"]);var _=function(t){function e(){var n=t.call(this)||this;n._dataChanged=!1,n._animate=!1,n._animators={},n._resetEntityStore=function(){n._cachedEntityStore=void 0},n._overflowHidden=!0,n.addClass("plot"),n._datasetToDrawer=new l.Map,n._attrBindings=i.map(),n._attrExtents=i.map(),n._includedValuesProvider=function(t){return n._includedValuesForScale(t)},n._renderCallback=function(){return n.render()},n._onDatasetUpdateCallback=function(){return n._onDatasetUpdate()},n._propertyBindings=i.map(),n._propertyExtents=i.map();var r=(new o.Easing).maxTotalDuration(e._ANIMATION_MAX_DURATION);return n.animator(p.Animator.MAIN,r),n.animator(p.Animator.RESET,new o.Null),n._deferredResetEntityStore=l.Window.debounce(d.DeferredRenderer.DEFERRED_RENDERING_DELAY,n._resetEntityStore),n}return r(e,t),e.getTotalDrawTime=function(t,e){return e.reduce(function(e,n){return e+n.animator.totalTime(t.length)},0)},e.applyDrawSteps=function(t,e){return t.map(function(t){var n=t.attrToProjector,r={};return Object.keys(n).forEach(function(t){r[t]=function(r,i){return n[t](r,i,e)}}),{attrToAppliedProjector:r,animator:t.animator}})},e.prototype.anchor=function(e){return e=u.coerceExternalD3(e),t.prototype.anchor.call(this,e),this._dataChanged=!0,this._resetEntityStore(),this._updateExtents(),this},e.prototype._setup=function(){var e=this;this._isSetup||(t.prototype._setup.call(this),null!=this._canvas&&this._appendCanvasNode(),this._renderArea=this.content().append("g").classed("render-area",!0),this.datasets().forEach(function(t){return e._createNodesForDataset(t)}))},e.prototype._appendCanvasNode=function(){var t=this.element().select(".plot-canvas-container");t.empty()&&(t=this.element().append("div").classed("plot-canvas-container",!0)).node().appendChild(this._canvas.node())},e.prototype.setBounds=function(e,n,r,i){if(t.prototype.setBounds.call(this,e,n,r,i),null!=this._canvas){this._bufferCanvas&&!this._bufferCanvasValid&&(this._bufferCanvas.attr("width",this._canvas.attr("width")),this._bufferCanvas.attr("height",this._canvas.attr("height")),this._bufferCanvas.node().getContext("2d").drawImage(this._canvas.node(),0,0),this._bufferCanvasValid=!0);var o=null!=window.devicePixelRatio?window.devicePixelRatio:1;this._canvas.attr("width",e*o),this._canvas.attr("height",n*o);var a=this._canvas.node().getContext("2d");a.setTransform(o,0,0,o,0,0),this._bufferCanvas&&a.drawImage(this._bufferCanvas.node(),0,0,e,n)}return this},e.prototype.destroy=function(){var e=this;t.prototype.destroy.call(this),this._scales().forEach(function(t){return t.offUpdate(e._renderCallback)}),this.datasets([])},e.prototype._createNodesForDataset=function(t){var e=this._datasetToDrawer.get(t);return"svg"===this.renderer()?e.useSVG(this._renderArea):e.useCanvas(this._canvas),e},e.prototype._createDrawer=function(t){return new s.ProxyDrawer(function(){return new c.SVGDrawer("path","")},function(){})},e.prototype._getAnimator=function(t){return this._animateOnNextRender()?this._animators[t]||new o.Null:new o.Null},e.prototype._onDatasetUpdate=function(){this._updateExtents(),this._dataChanged=!0,this._resetEntityStore(),this.renderLowPriority()},e.prototype.attr=function(t,e,n){return null==e?this._attrBindings.get(t):(this._bindAttr(t,e,n),this.render(),this)},e.prototype._bindProperty=function(t,e,n,r){var i=this._propertyBindings.get(t),o=null!=i?i.scale:null,a="function"==typeof e?e:function(){return e};this._propertyBindings.set(t,{accessor:a,scale:n,postScale:r}),this._updateExtentsForProperty(t),null!=o&&this._uninstallScaleForKey(o,t),null!=n&&this._installScaleForKey(n,t)},e.prototype._bindAttr=function(t,e,n){var r=this._attrBindings.get(t),i=null!=r?r.scale:null,o="function"==typeof e?e:function(){return e};this._attrBindings.set(t,{accessor:o,scale:n}),this._updateExtentsForAttr(t),null!=i&&this._uninstallScaleForKey(i,t),null!=n&&this._installScaleForKey(n,t)},e.prototype._generateAttrToProjector=function(){var t={};this._attrBindings.each(function(n,r){t[r]=e._scaledAccessor(n)});var n=this._propertyProjectors();return Object.keys(n).forEach(function(e){null==t[e]&&(t[e]=n[e])}),t},e.prototype.renderImmediately=function(){return t.prototype.renderImmediately.call(this),this._isAnchored&&(this._paint(),this._dataChanged=!1),this},e.prototype.renderLowPriority=function(){this._renderCallback()},e.prototype.animated=function(t){return null==t?this._animate:(this._animate=t,this)},e.prototype.detach=function(){return t.prototype.detach.call(this),this._updateExtents(),this},e.prototype._scales=function(){var t=[];return this._attrBindings.each(function(e,n){var r=e.scale;null!=r&&-1===t.indexOf(r)&&t.push(r)}),this._propertyBindings.each(function(e,n){var r=e.scale;null!=r&&-1===t.indexOf(r)&&t.push(r)}),t},e.prototype._updateExtents=function(){var t=this;this._resetEntityStore(),this._attrBindings.each(function(e,n){return t._updateExtentsForAttr(n)}),this._propertyExtents.each(function(e,n){return t._updateExtentsForProperty(n)}),this._scales().forEach(function(e){return e.addIncludedValuesProvider(t._includedValuesProvider)})},e.prototype._updateExtentsForAttr=function(t){this._updateExtentsForKey(t,this._attrBindings,this._attrExtents,null)},e.prototype._updateExtentsForProperty=function(t){this._updateExtentsForKey(t,this._propertyBindings,this._propertyExtents,this._filterForProperty(t))},e.prototype._filterForProperty=function(t){return null},e.prototype._updateExtentsForKey=function(t,e,n,r){var i=this,o=e.get(t);null!=o&&null!=o.accessor&&n.set(t,this.datasets().map(function(t){return i._computeExtent(t,o,r)}))},e.prototype._computeExtent=function(t,e,n){var r=e.accessor,i=e.scale;if(null==i)return[];var o=t.data();null!=n&&(o=o.filter(function(e,r){return n(e,r,t)}));var a=o.map(function(e,n){return r(e,n,t)});return i.extentOfValues(a)},e.prototype._extentsForProperty=function(t){return this._propertyExtents.get(t)},e.prototype._includedValuesForScale=function(t){var e=this;if(!this._isAnchored)return[];var n=[];return this._attrBindings.each(function(r,o){if(r.scale===t){var a=e._attrExtents.get(o);null!=a&&(n=n.concat(i.merge(a)))}}),this._propertyBindings.each(function(r,o){if(r.scale===t){var a=e._extentsForProperty(o);null!=a&&(n=n.concat(i.merge(a)))}}),n},e.prototype.animator=function(t,e){return void 0===e?this._animators[t]:(this._animators[t]=e,this)},e.prototype.renderer=function(t){var e=this;return void 0===t?null==this._canvas?"svg":"canvas":(null==this._canvas&&"canvas"===t?(this._canvas=i.select(document.createElement("canvas")).classed("plot-canvas",!0),this._bufferCanvas=i.select(document.createElement("canvas")),null!=this.element()&&this._appendCanvasNode(),this._datasetToDrawer.forEach(function(t){t.useCanvas(e._canvas)}),this.render()):null!=this._canvas&&"svg"==t&&(this._canvas.remove(),this._canvas=null,this._bufferCanvas=null,this._datasetToDrawer.forEach(function(t){t.useSVG(e._renderArea)}),this.render()),this)},e.prototype.addDataset=function(t){return this._addDataset(t),this._onDatasetUpdate(),this},e.prototype._addDataset=function(t){this._removeDataset(t);var e=this._createDrawer(t);return this._datasetToDrawer.set(t,e),this._isSetup&&this._createNodesForDataset(t),t.onUpdate(this._onDatasetUpdateCallback),this},e.prototype.removeDataset=function(t){return this._removeDataset(t),this._onDatasetUpdate(),this},e.prototype._removeDataset=function(t){return-1===this.datasets().indexOf(t)?this:(this._removeDatasetNodes(t),t.offUpdate(this._onDatasetUpdateCallback),this._datasetToDrawer.delete(t),this)},e.prototype._removeDatasetNodes=function(t){this._datasetToDrawer.get(t).remove()},e.prototype.datasets=function(t){var e=this,n=[];return this._datasetToDrawer.forEach(function(t,e){return n.push(e)}),null==t?n:(n.forEach(function(t){return e._removeDataset(t)}),t.forEach(function(t){return e._addDataset(t)}),this._onDatasetUpdate(),this)},e.prototype._generateDrawSteps=function(){return[{attrToProjector:this._generateAttrToProjector(),animator:new o.Null}]},e.prototype._additionalPaint=function(t){},e.prototype._buildLightweightPlotEntities=function(t){var e=this,n=[];return t.forEach(function(t,r){var i=e._datasetToDrawer.get(t),o=0;t.data().forEach(function(a,s){var c=e._pixelPoint(a,s,t);if(!l.Math.isNaN(c.x)&&!l.Math.isNaN(c.y)){var u=e;n.push({datum:a,get position(){return u._pixelPoint.call(u,a,s,t)},index:s,dataset:t,datasetIndex:r,component:e,drawer:i,validDatumIndex:o}),o++}})}),n},e.prototype._getDataToDraw=function(){var t=new l.Map;return this.datasets().forEach(function(e){return t.set(e,e.data())}),t},e.prototype._paint=function(){var t=this,n=this._generateDrawSteps(),r=this._getDataToDraw(),i=this.datasets().map(function(e){return t._datasetToDrawer.get(e)});if("canvas"===this.renderer()){var o=this._canvas.node();o.getContext("2d").clearRect(0,0,o.clientWidth,o.clientHeight),this._bufferCanvasValid=!1}this.datasets().forEach(function(t,o){var a=e.applyDrawSteps(n,t);i[o].draw(r.get(t),a)});var a=this.datasets().map(function(t,i){return e.getTotalDrawTime(r.get(t),n)}),s=l.Math.max(a,0);this._additionalPaint(s)},e.prototype.selections=function(t){var e=this;if(void 0===t&&(t=this.datasets()),"canvas"===this.renderer())return i.select(null);var n=[];return t.forEach(function(t){var r=e._datasetToDrawer.get(t);if(null!=r){var i=r.getVisualPrimitives();n.push.apply(n,i)}}),i.selectAll(n)},e.prototype.entities=function(t){var e=this;return this._getEntityStore(t).entities().map(function(t){return e._lightweightPlotEntityToPlotEntity(t)})},e.prototype._getEntityStore=function(t){if(void 0!==t)return(e=new l.EntityStore).addAll(this._buildLightweightPlotEntities(t)),e;if(void 0===this._cachedEntityStore){var e=new l.EntityStore;e.addAll(this._buildLightweightPlotEntities(this.datasets()),this.bounds()),this._cachedEntityStore=e}return this._cachedEntityStore},e.prototype._lightweightPlotEntityToPlotEntity=function(t){return{datum:t.datum,position:t.position,dataset:t.dataset,datasetIndex:t.datasetIndex,index:t.index,component:t.component,selection:i.select(t.drawer.getVisualPrimitives()[t.validDatumIndex])}},e.prototype.entitiesAt=function(t){throw new Error("plots must implement entitiesAt")},e.prototype.entityNearest=function(t,e){void 0===e&&(e=this.bounds());var n=this._getEntityStore().entityNearest(t);return void 0===n?void 0:this._lightweightPlotEntityToPlotEntity(n)},e.prototype._uninstallScaleForKey=function(t,e){t.offUpdate(this._renderCallback),t.offUpdate(this._deferredResetEntityStore),t.removeIncludedValuesProvider(this._includedValuesProvider)},e.prototype._installScaleForKey=function(t,e){t.onUpdate(this._renderCallback),t.onUpdate(this._deferredResetEntityStore),t.addIncludedValuesProvider(this._includedValuesProvider)},e.prototype._propertyProjectors=function(){return{}},e._scaledAccessor=function(t){var e=t.scale,n=t.accessor,r=t.postScale,i=null==e?n:function(t,r,i){return e.scale(n(t,r,i))};return null==r?i:function(t,e,n){return r(i(t,e,n),t,e,n)}},e.prototype._pixelPoint=function(t,e,n){return{x:0,y:0}},e.prototype._animateOnNextRender=function(){return this._animate&&this._dataChanged},e}(a.Component);_._ANIMATION_MAX_DURATION=600,e.Plot=_},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}var i=n(98);e.TickGenerators=i,r(n(50)),r(n(94)),r(n(95)),r(n(96)),r(n(97)),r(n(99));var o=n(50),a=n(11);e.isTransformable=function(t){return t instanceof a.QuantitativeScale||t instanceof o.Category}},function(t,e,n){"use strict";var r=n(1),i=n(28),o=n(0),a=n(12),s=n(10);e.XAlignment=s.makeEnum(["left","center","right"]),e.YAlignment=s.makeEnum(["top","center","bottom"]);var c=function(){function t(){this._overflowHidden=!1,this._origin={x:0,y:0},this._xAlignment="left",this._yAlignment="top",this._isSetup=!1,this._isAnchored=!1,this._cssClasses=new o.Set,this._destroyed=!1,this._onAnchorCallbacks=new o.CallbackSet,this._onDetachCallbacks=new o.CallbackSet,this._cssClasses.add("component")}return t.prototype.anchor=function(t){if(t=a.coerceExternalD3(t),this._destroyed)throw new Error("Can't reuse destroy()-ed Components!");return this.isRoot()&&(this._rootElement=t,this._rootElement.classed("plottable",!0)),null!=this._element?t.node().appendChild(this._element.node()):(this._element=t.append("div"),this._setup()),this._isAnchored=!0,this._onAnchorCallbacks.callCallbacks(this),this},t.prototype.onAnchor=function(t){return this._isAnchored&&t(this),this._onAnchorCallbacks.add(t),this},t.prototype.offAnchor=function(t){return this._onAnchorCallbacks.delete(t),this},t.prototype._setup=function(){var t=this;this._isSetup||(this._cssClasses.forEach(function(e){t._element.classed(e,!0)}),this._cssClasses=new o.Set,this._backgroundContainer=this._element.append("svg").classed("background-container",!0),this._content=this._element.append("svg").classed("content",!0),this._foregroundContainer=this._element.append("svg").classed("foreground-container",!0),this._overflowHidden?this._content.classed("component-overflow-hidden",!0):this._content.classed("component-overflow-visible",!0),this._isSetup=!0)},t.prototype.requestedSpace=function(t,e){return{minWidth:0,minHeight:0}},t.prototype.computeLayout=function(e,n,r){if(null==e||null==n||null==r){if(null==this._element)throw new Error("anchor() must be called before computeLayout()");if(null==this._rootElement)throw new Error("null arguments cannot be passed to computeLayout() on a non-root, unanchored node");e={x:0,y:0};var i=this._rootElement.node();n=o.DOM.elementWidth(i),r=o.DOM.elementHeight(i)}var a=this._sizeFromOffer(n,r),s=a.height,c=a.width,l=t._xAlignToProportion[this._xAlignment],u=t._yAlignToProportion[this._yAlignment],h=e.x+(n-c)*l,p=e.y+(r-s)*u;return this.setBounds(c,s,h,p),this},t.prototype.setBounds=function(t,e,n,r){return void 0===n&&(n=0),void 0===r&&(r=0),this._width=t,this._height=e,this._origin={x:n,y:r},null!=this._element&&this._element.styles({left:n+"px",height:e+"px",top:r+"px",width:t+"px"}),null!=this._resizeHandler&&this._resizeHandler({width:t,height:e}),this},t.prototype._sizeFromOffer=function(t,e){var n=this.requestedSpace(t,e);return{width:this.fixedWidth()?Math.min(t,n.minWidth):t,height:this.fixedHeight()?Math.min(e,n.minHeight):e}},t.prototype.render=function(){return this._isAnchored&&this._isSetup&&this.width()>=0&&this.height()>=0&&i.registerToRender(this),this},t.prototype._scheduleComputeLayout=function(){this._isAnchored&&this._isSetup&&i.registerToComputeLayoutAndRender(this)},t.prototype.onResize=function(t){return this._resizeHandler=t,this},t.prototype.renderImmediately=function(){return this},t.prototype.redraw=function(){return this._isAnchored&&this._isSetup&&(this.isRoot()?this._scheduleComputeLayout():this.parent().redraw()),this},t.prototype.invalidateCache=function(){},t.prototype.renderTo=function(t){if(this.detach(),null!=t){var e=void 0;if(!(e="string"==typeof t?r.select(t):t instanceof Element?r.select(t):a.coerceExternalD3(t)).node()||null==e.node().nodeName)throw new Error("Plottable requires a valid Element to renderTo");if("svg"===e.node().nodeName)throw new Error("Plottable 3.x and later can only renderTo an HTML component; pass a div instead!");this.anchor(e)}if(null==this._element)throw new Error("If a Component has never been rendered before, then renderTo must be given a node to render to, or a d3.Selection, or a selector string");return i.registerToComputeLayoutAndRender(this),i.flush(),this},t.prototype.xAlignment=function(e){if(null==e)return this._xAlignment;if(e=e.toLowerCase(),null==t._xAlignToProportion[e])throw new Error("Unsupported alignment: "+e);return this._xAlignment=e,this.redraw(),this},t.prototype.yAlignment=function(e){if(null==e)return this._yAlignment;if(e=e.toLowerCase(),null==t._yAlignToProportion[e])throw new Error("Unsupported alignment: "+e);return this._yAlignment=e,this.redraw(),this},t.prototype.hasClass=function(t){return null!=t&&(null==this._element?this._cssClasses.has(t):this._element.classed(t))},t.prototype.addClass=function(t){return null==t?this:(null==this._element?this._cssClasses.add(t):this._element.classed(t,!0),this)},t.prototype.removeClass=function(t){return null==t?this:(null==this._element?this._cssClasses.delete(t):this._element.classed(t,!1),this)},t.prototype.fixedWidth=function(){return!1},t.prototype.fixedHeight=function(){return!1},t.prototype.detach=function(){return this.parent(null),this._isAnchored&&this._element.remove(),this._isAnchored=!1,this._onDetachCallbacks.callCallbacks(this),this},t.prototype.onDetach=function(t){return this._onDetachCallbacks.add(t),this},t.prototype.offDetach=function(t){return this._onDetachCallbacks.delete(t),this},t.prototype.parent=function(t){if(void 0===t)return this._parent;if(null!==t&&!t.has(this))throw new Error("Passed invalid parent");return this._parent=t,this},t.prototype.bounds=function(){var t=this.origin();return{topLeft:t,bottomRight:{x:t.x+this.width(),y:t.y+this.height()}}},t.prototype.destroy=function(){this._destroyed=!0,this.detach()},t.prototype.width=function(){return this._width},t.prototype.height=function(){return this._height},t.prototype.origin=function(){return{x:this._origin.x,y:this._origin.y}},t.prototype.originToRoot=function(){for(var t=this.origin(),e=this.parent();null!=e;){var n=e.origin();t.x+=n.x,t.y+=n.y,e=e.parent()}return t},t.prototype.root=function(){for(var t=this;!t.isRoot();)t=t.parent();return t},t.prototype.isRoot=function(){return null==this.parent()},t.prototype.foreground=function(){return this._foregroundContainer},t.prototype.content=function(){return this._content},t.prototype.element=function(){return this._element},t.prototype.rootElement=function(){return this.root()._rootElement},t.prototype.background=function(){return this._backgroundContainer},t}();c._xAlignToProportion={left:0,center:.5,right:1},c._yAlignToProportion={top:0,center:.5,bottom:1},e.Component=c},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(52)),r(n(55)),r(n(123)),r(n(20)),r(n(57)),r(n(59))},function(t,e,n){"use strict";var r=n(19),i=function(){function t(t,e){this._svgDrawerFactory=t,this._canvasDrawStep=e}return t.prototype.useSVG=function(t){null!=this._currentDrawer&&this._currentDrawer.remove();var e=this._svgDrawerFactory();e.attachTo(t),this._currentDrawer=e},t.prototype.useCanvas=function(t){null!=this._currentDrawer&&this._currentDrawer.remove(),this._currentDrawer=new r.CanvasDrawer(t.node().getContext("2d"),this._canvasDrawStep)},t.prototype.getDrawer=function(){return this._currentDrawer},t.prototype.remove=function(){null!=this._currentDrawer&&this._currentDrawer.remove()},t.prototype.draw=function(t,e){this._currentDrawer.draw(t,e)},t.prototype.getVisualPrimitives=function(){return this._currentDrawer.getVisualPrimitives()},t.prototype.getVisualPrimitiveAtIndex=function(t){return this._currentDrawer.getVisualPrimitiveAtIndex(t)},t}();e.ProxyDrawer=i},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(65)),r(n(66))},function(t,e,n){"use strict";function r(t){return void 0===t&&(t=3),i(t),function(e){return e.toFixed(t)}}function i(t){if(t<0||t>20)throw new RangeError("Formatter precision must be between 0 and 20");if(t!==Math.floor(t))throw new RangeError("Formatter precision must be an integer")}var o=n(1);e.currency=function(t,e,n){void 0===t&&(t=2),void 0===e&&(e="$"),void 0===n&&(n=!0);var i=r(t);return function(t){var r=i(Math.abs(t));return""!==r&&(n?r=e+r:r+=e,t<0&&(r="-"+r)),r}},e.fixed=r,e.general=function(t){return void 0===t&&(t=3),i(t),function(e){if("number"==typeof e){var n=Math.pow(10,t);return String(Math.round(e*n)/n)}return String(e)}},e.identity=function(){return function(t){return String(t)}},e.percentage=function(t){void 0===t&&(t=0);var e=r(t);return function(t){var n=100*t,r=t.toString(),i=Math.pow(10,r.length-(r.indexOf(".")+1));return n=parseInt((n*i).toString(),10)/i,e(n)+"%"}},e.siSuffix=function(t){return void 0===t&&(t=3),i(t),function(e){return o.format("."+t+"s")(e)}},e.shortScale=function(t){void 0===t&&(t=3),i(t);var e=o.format("."+t+"e"),n=o.format("."+t+"f"),r=Math.pow(10,3*("KMBTQ".length+1)),a=Math.pow(10,-t);return function(t){var i=Math.abs(t);if((i<a||i>=r)&&0!==i)return e(t);for(var o=-1;i>=Math.pow(1e3,o+2)&&o<"KMBTQ".length-1;)o++;var s="";return s=-1===o?n(t):n(t/Math.pow(1e3,o+1))+"KMBTQ"[o],(t>0&&"1000"===s.substr(0,4)||t<0&&"-1000"===s.substr(0,5))&&(o<"KMBTQ".length-1?(o++,s=n(t/Math.pow(1e3,o+1))+"KMBTQ"[o]):s=e(t)),s}},e.multiTime=function(){var t=[{specifier:".%L",predicate:function(t){return 0!==t.getMilliseconds()}},{specifier:":%S",predicate:function(t){return 0!==t.getSeconds()}},{specifier:"%I:%M",predicate:function(t){return 0!==t.getMinutes()}},{specifier:"%I %p",predicate:function(t){return 0!==t.getHours()}},{specifier:"%a %d",predicate:function(t){return 0!==t.getDay()&&1!==t.getDate()}},{specifier:"%b %d",predicate:function(t){return 1!==t.getDate()}},{specifier:"%b",predicate:function(t){return 0!==t.getMonth()}}];return function(e){var n=t.filter(function(t){return t.predicate(e)}),r=n.length>0?n[0].specifier:"%Y";return o.timeFormat(r)(e)}},e.time=function(t){return o.timeFormat(t)}},function(t,e,n){"use strict";var r=n(1),i=n(0),o=function(){function t(t,e){this._root=r.select(document.createElementNS("http://www.w3.org/2000/svg","g")),this._className=e,this._svgElementName=t}return t.prototype.draw=function(t,e){var n=this;this._createAndDestroyDOMElements(t);var r=0;e.forEach(function(e,o){i.Window.setTimeout(function(){return n._drawStep(e)},r),r+=e.animator.totalTime(t.length)})},t.prototype.getVisualPrimitives=function(){return null==this._cachedVisualPrimitivesNodes&&(this._cachedVisualPrimitivesNodes=this._selection.nodes()),this._cachedVisualPrimitivesNodes},t.prototype.getVisualPrimitiveAtIndex=function(t){return this.getVisualPrimitives()[t]},t.prototype.remove=function(){this._root.remove()},t.prototype.attachTo=function(t){t.node().appendChild(this._root.node())},t.prototype.getRoot=function(){return this._root},t.prototype.selector=function(){return this._svgElementName},t.prototype._applyDefaultAttributes=function(t){},t.prototype._createAndDestroyDOMElements=function(t){var e=this._root.selectAll(this.selector()).data(t);this._selection=e.enter().append(this._svgElementName).merge(e),e.exit().remove(),this._cachedVisualPrimitivesNodes=null,null!=this._className&&this._selection.classed(this._className,!0),this._applyDefaultAttributes(this._selection)},t.prototype._drawStep=function(t){var e=this;["fill","stroke"].forEach(function(n){null!=t.attrToAppliedProjector[n]&&e._selection.attr(n,t.attrToAppliedProjector[n])}),t.animator.animate(this._selection,t.attrToAppliedProjector),null!=this._className&&this._selection.classed(this._className,!0)},t}();e.SVGDrawer=o},function(t,e,n){"use strict";e.makeEnum=function(t){return t.reduce(function(t,e){return t[e]=e,t},{})}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(14),a=n(0),s=function(t){function e(){var e=t.call(this)||this;return e._tickGenerator=function(t){return t.defaultTicks()},e._padProportion=.05,e._snappingDomainEnabled=!0,e._paddingExceptionsProviders=new a.Set,e}return r(e,t),e.prototype.autoDomain=function(){return this._domainMin=null,this._domainMax=null,t.prototype.autoDomain.call(this),this},e.prototype._autoDomainIfAutomaticMode=function(){if(null==this._domainMin||null==this._domainMax){var e=this._getExtent();if(null!=this._domainMin){var n=e[1];return this._domainMin>=n&&(n=this._expandSingleValueDomain([this._domainMin,this._domainMin])[1]),void this._setDomain([this._domainMin,n])}if(null!=this._domainMax){var r=e[0];return this._domainMax<=r&&(r=this._expandSingleValueDomain([this._domainMax,this._domainMax])[0]),void this._setDomain([r,this._domainMax])}t.prototype._autoDomainIfAutomaticMode.call(this)}else this._setDomain([this._domainMin,this._domainMax])},e.prototype._getExtent=function(){var t=this._getAllIncludedValues(),e=this._defaultExtent();if(0!==t.length){var n=[a.Math.min(t,e[0]),a.Math.max(t,e[1])];e=this._padDomain(n)}return null!=this._domainMin&&(e[0]=this._domainMin),null!=this._domainMax&&(e[1]=this._domainMax),e},e.prototype.addPaddingExceptionsProvider=function(t){return this._paddingExceptionsProviders.add(t),this._autoDomainIfAutomaticMode(),this},e.prototype.removePaddingExceptionsProvider=function(t){return this._paddingExceptionsProviders.delete(t),this._autoDomainIfAutomaticMode(),this},e.prototype.padProportion=function(t){if(null==t)return this._padProportion;if(t<0)throw new Error("padProportion must be non-negative");return this._padProportion=t,this._autoDomainIfAutomaticMode(),this},e.prototype._padDomain=function(t){var e=this;if(t[0].valueOf()===t[1].valueOf())return this._expandSingleValueDomain(t);if(0===this._padProportion)return t;var n=this._padProportion/2,r=t[0],i=t[1],o=!1,a=!1;this._paddingExceptionsProviders.forEach(function(t){t(e).forEach(function(t){t.valueOf()===r.valueOf()&&(o=!0),t.valueOf()===i.valueOf()&&(a=!0)})});var s=this._backingScaleDomain();this._backingScaleDomain(t);var c=o?r:this.invert(this.scale(r)-(this.scale(i)-this.scale(r))*n),l=a?i:this.invert(this.scale(i)+(this.scale(i)-this.scale(r))*n);return this._backingScaleDomain(s),this._snappingDomainEnabled?this._niceDomain([c,l]):[c,l]},e.prototype.snappingDomainEnabled=function(t){return null==t?this._snappingDomainEnabled:(this._snappingDomainEnabled=t,this._autoDomainIfAutomaticMode(),this)},e.prototype._expandSingleValueDomain=function(t){return t},e.prototype.invert=function(t){throw new Error("Subclasses should override invert")},e.prototype.domain=function(e){return null!=e&&(this._domainMin=e[0],this._domainMax=e[1]),t.prototype.domain.call(this,e)},e.prototype.domainMin=function(t){return null==t?this.domain()[0]:(this._domainMin=t,this._autoDomainIfAutomaticMode(),this)},e.prototype.domainMax=function(t){return null==t?this.domain()[1]:(this._domainMax=t,this._autoDomainIfAutomaticMode(),this)},e.prototype.extentOfValues=function(t){var e=i.extent(t.filter(function(t){return a.Math.isValidNumber(+t)}));return null==e[0]||null==e[1]?[]:e},e.prototype.zoom=function(t,e){var n=this;this.domain(this.range().map(function(r){return n.invert(o.zoomAt(r,t,e))}))},e.prototype.pan=function(t){var e=this;this.domain(this.range().map(function(n){return e.invert(n+t)}))},e.prototype.scaleTransformation=function(t){throw new Error("Subclasses should override scaleTransformation")},e.prototype.invertedTransformation=function(t){throw new Error("Subclasses should override invertedTransformation")},e.prototype.getTransformationDomain=function(){throw new Error("Subclasses should override getTransformationDomain")},e.prototype._setDomain=function(e){var n=function(t){return a.Math.isNaN(t)||t===1/0||t===-1/0};n(e[0])||n(e[1])?a.Window.warn("Warning: QuantitativeScales cannot take NaN or Infinity as a domain value. Ignoring."):t.prototype._setDomain.call(this,e)},e.prototype.defaultTicks=function(){throw new Error("Subclasses should override _getDefaultTicks")},e.prototype.ticks=function(){return this._tickGenerator(this)},e.prototype._niceDomain=function(t,e){throw new Error("Subclasses should override _niceDomain")},e.prototype._defaultExtent=function(){throw new Error("Subclasses should override _defaultExtent")},e.prototype.tickGenerator=function(t){return null==t?this._tickGenerator:(this._tickGenerator=t,this)},e}(n(18).Scale);s._DEFAULT_NUM_TICKS=10,e.QuantitativeScale=s},function(t,e,n){"use strict";var r=n(1);e.coerceExternalD3=function(t){if(null==t.attrs){if(null==t.nodes){var e=[];return t.each(function(){e.push(this)}),r.selectAll(e)}return r.selectAll(t.nodes())}return t}},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(78)),r(n(79)),r(n(80))},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(82)),r(n(83)),r(n(37)),r(n(84)),r(n(85))},function(t,e,n){"use strict";var r=function(){function t(){var t=this;this._anchorCallback=function(e){return t._anchor(e)},this._enabled=!0}return t.prototype.attachTo=function(t){return this._disconnect(),this._componentAttachedTo=t,this._connect(),this},t.prototype.detachFrom=function(t){return this.detach()},t.prototype.detach=function(){return this._disconnect(),this._componentAttachedTo=null,this},t.prototype.enabled=function(t){return null==t?this._enabled:(this._enabled=t,this._enabled?this._connect():this._disconnect(),this)},t.prototype._anchor=function(t){this._isAnchored=!0},t.prototype._unanchor=function(){this._isAnchored=!1},t.prototype._translateToComponentSpace=function(t){var e=this._componentAttachedTo.originToRoot();return{x:t.x-e.x,y:t.y-e.y}},t.prototype._isInsideComponent=function(t){return 0<=t.x&&0<=t.y&&t.x<=this._componentAttachedTo.width()&&t.y<=this._componentAttachedTo.height()},t.prototype._connect=function(){this.enabled()&&null!=this._componentAttachedTo&&!this._isAnchored&&this._componentAttachedTo.onAnchor(this._anchorCallback)},t.prototype._disconnect=function(){this._isAnchored&&this._unanchor(),null!=this._componentAttachedTo&&this._componentAttachedTo.offAnchor(this._anchorCallback)},t}();e.Interaction=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(3),o=n(0),a=n(48),s=n(2),c=function(t){function e(){var e=t.call(this)||this;e._autoAdjustXScaleDomain=!1,e._autoAdjustYScaleDomain=!1,e._deferredRendering=!1,e.addClass("xy-plot"),e._adjustYDomainOnChangeFromXCallback=function(t){return e._adjustYDomainOnChangeFromX()},e._adjustXDomainOnChangeFromYCallback=function(t){return e._adjustXDomainOnChangeFromY()},e._renderCallback=function(){if(e.deferredRendering()){var t=e.x()&&e.x().scale,n=e.y()&&e.y().scale;e._deferredRenderer.updateDomains(t,n)}else e.render()};return e._deferredRenderer=new a.DeferredRenderer(function(){return e.render()},function(t,n,r,i){e._isAnchored&&(null!=e._renderArea&&e._renderArea.attr("transform","translate("+t+", "+n+") scale("+r+", "+i+")"),null!=e._canvas&&e._canvas.style("transform","translate("+t+"px, "+n+"px) scale("+r+", "+i+")"))}),e}return r(e,t),e.prototype.deferredRendering=function(t){if(null==t)return this._deferredRendering;if(t){var e=this.x()&&this.x().scale,n=this.y()&&this.y().scale;this._deferredRenderer.setDomains(e,n)}return this._deferredRendering=t,this},e.prototype.x=function(t,n,r){if(null==t)return this._propertyBindings.get(e._X_KEY);this._bindProperty(e._X_KEY,t,n,r);var i=this.width();return null!=n&&null!=i&&n.range([0,i]),this._autoAdjustYScaleDomain&&this._updateYExtentsAndAutodomain(),this.render(),this},e.prototype.y=function(t,n,r){if(null==t)return this._propertyBindings.get(e._Y_KEY);this._bindProperty(e._Y_KEY,t,n,r);var o=this.height();return null!=n&&null!=o&&(n instanceof i.Category?n.range([0,o]):n.range([o,0])),this._autoAdjustXScaleDomain&&this._updateXExtentsAndAutodomain(),this.render(),this},e.prototype._filterForProperty=function(t){return"x"===t&&this._autoAdjustXScaleDomain?this._makeFilterByProperty("y"):"y"===t&&this._autoAdjustYScaleDomain?this._makeFilterByProperty("x"):null},e.prototype._makeFilterByProperty=function(t){var e=this._propertyBindings.get(t);if(null!=e){var n=e.accessor,r=e.scale;if(null!=r)return function(t,e,i){var a=r.range();return o.Math.inRange(r.scale(n(t,e,i)),a[0],a[1])}}return null},e.prototype._uninstallScaleForKey=function(n,r){t.prototype._uninstallScaleForKey.call(this,n,r);var i=r===e._X_KEY?this._adjustYDomainOnChangeFromXCallback:this._adjustXDomainOnChangeFromYCallback;n.offUpdate(i)},e.prototype._installScaleForKey=function(n,r){t.prototype._installScaleForKey.call(this,n,r);var i=r===e._X_KEY?this._adjustYDomainOnChangeFromXCallback:this._adjustXDomainOnChangeFromYCallback;n.onUpdate(i)},e.prototype.destroy=function(){return t.prototype.destroy.call(this),this.x().scale&&this.x().scale.offUpdate(this._adjustYDomainOnChangeFromXCallback),this.y().scale&&this.y().scale.offUpdate(this._adjustXDomainOnChangeFromYCallback),this},e.prototype.autorangeMode=function(t){if(null==t)return this._autoAdjustXScaleDomain?"x":this._autoAdjustYScaleDomain?"y":"none";switch(t){case"x":this._autoAdjustXScaleDomain=!0,this._autoAdjustYScaleDomain=!1,this._adjustXDomainOnChangeFromY();break;case"y":this._autoAdjustXScaleDomain=!1,this._autoAdjustYScaleDomain=!0,this._adjustYDomainOnChangeFromX();break;case"none":this._autoAdjustXScaleDomain=!1,this._autoAdjustYScaleDomain=!1;break;default:throw new Error("Invalid scale name '"+t+"', must be 'x', 'y' or 'none'")}return this},e.prototype.computeLayout=function(e,n,r){t.prototype.computeLayout.call(this,e,n,r);var o=this.x(),a=o&&o.scale;null!=a&&a.range([0,this.width()]);var s=this.y(),c=s&&s.scale;return null!=c&&(c instanceof i.Category?c.range([0,this.height()]):c.range([this.height(),0])),this},e.prototype._updateXExtentsAndAutodomain=function(){this._updateExtentsForProperty("x");var t=this.x().scale;null!=t&&t.autoDomain()},e.prototype._updateYExtentsAndAutodomain=function(){this._updateExtentsForProperty("y");var t=this.y().scale;null!=t&&t.autoDomain()},e.prototype.showAllData=function(){return this._updateXExtentsAndAutodomain(),this._updateYExtentsAndAutodomain(),this},e.prototype._adjustYDomainOnChangeFromX=function(){this._projectorsReady()&&this._autoAdjustYScaleDomain&&this._updateYExtentsAndAutodomain()},e.prototype._adjustXDomainOnChangeFromY=function(){this._projectorsReady()&&this._autoAdjustXScaleDomain&&this._updateXExtentsAndAutodomain()},e.prototype._projectorsReady=function(){var t=this.x(),e=this.y();return null!=t&&null!=t.accessor&&null!=e&&null!=e.accessor},e.prototype._pixelPoint=function(t,e,n){var r=s.Plot._scaledAccessor(this.x()),i=s.Plot._scaledAccessor(this.y());return{x:r(t,e,n),y:i(t,e,n)}},e.prototype._getDataToDraw=function(){var e=this,n=t.prototype._getDataToDraw.call(this),r=function(t,n,r){var i=s.Plot._scaledAccessor(e.x())(t,n,r),a=s.Plot._scaledAccessor(e.y())(t,n,r);return o.Math.isValidNumber(i)&&o.Math.isValidNumber(a)};return this.datasets().forEach(function(t){n.set(t,n.get(t).filter(function(e,n){return r(e,n,t)}))}),n},e}(s.Plot);c._X_KEY="x",c._Y_KEY="y",e.XYPlot=c},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(46)),r(n(24)),r(n(47)),r(n(86)),r(n(49)),r(n(87)),r(n(88)),r(n(89)),r(n(90)),r(n(91)),r(n(92)),r(n(93))},function(t,e,n){"use strict";var r=n(0),i=function(){function t(){this._autoDomainAutomatically=!0,this._domainModificationInProgress=!1,this._callbacks=new r.CallbackSet,this._includedValuesProviders=new r.Set}return t.prototype.extentOfValues=function(t){return[]},t.prototype._getAllIncludedValues=function(){var t=this,e=[];return this._includedValuesProviders.forEach(function(n){var r=n(t);e=e.concat(r)}),e},t.prototype._getExtent=function(){return[]},t.prototype.onUpdate=function(t){return this._callbacks.add(t),this},t.prototype.offUpdate=function(t){return this._callbacks.delete(t),this},t.prototype._dispatchUpdate=function(){this._callbacks.callCallbacks(this)},t.prototype.autoDomain=function(){return this._autoDomainAutomatically=!0,this._setDomain(this._getExtent()),this},t.prototype._autoDomainIfAutomaticMode=function(){this._autoDomainAutomatically&&this.autoDomain()},t.prototype.scale=function(t){throw new Error("Subclasses should override scale")},t.prototype.domain=function(t){return null==t?this._getDomain():(this._autoDomainAutomatically=!1,this._setDomain(t),this)},t.prototype._getDomain=function(){throw new Error("Subclasses should override _getDomain")},t.prototype._setDomain=function(t){this._domainModificationInProgress||(this._domainModificationInProgress=!0,this._backingScaleDomain(t),this._dispatchUpdate(),this._domainModificationInProgress=!1)},t.prototype._backingScaleDomain=function(t){throw new Error("Subclasses should override _backingDomain")},t.prototype.range=function(t){return null==t?this._getRange():(this._setRange(t),this)},t.prototype._getRange=function(){throw new Error("Subclasses should override _getRange")},t.prototype._setRange=function(t){throw new Error("Subclasses should override _setRange")},t.prototype.addIncludedValuesProvider=function(t){return this._includedValuesProviders.add(t),this._autoDomainIfAutomaticMode(),this},t.prototype.removeIncludedValuesProvider=function(t){return this._includedValuesProviders.delete(t),this._autoDomainIfAutomaticMode(),this},t}();e.Scale=i},function(t,e,n){"use strict";var r=n(1),i=function(){function t(t,e){this._context=t,this._drawStep=e}return t.prototype.getDrawStep=function(){return this._drawStep},t.prototype.draw=function(t,e){var n=e[e.length-1];this._context.save(),this._drawStep(this._context,t,n.attrToAppliedProjector),this._context.restore()},t.prototype.getVisualPrimitives=function(){return[]},t.prototype.getVisualPrimitiveAtIndex=function(t){return null},t.prototype.remove=function(){},t}();e.CanvasDrawer=i,e.ContextStyleAttrs={strokeWidth:"stroke-width",stroke:"stroke",opacity:"opacity",fill:"fill"},e.resolveAttributesSubsetWithStyles=function(t,n,r,i){for(var o=Object.keys(e.ContextStyleAttrs).concat(n),a={},s=0;s<o.length;s++){var c=o[s];t.hasOwnProperty(c)&&(a[c]=t[c](r,i))}return a},e.styleContext=function(t,n){if(n[e.ContextStyleAttrs.strokeWidth]&&(t.lineWidth=parseFloat(n[e.ContextStyleAttrs.strokeWidth])),n[e.ContextStyleAttrs.stroke]){var i=r.color(n[e.ContextStyleAttrs.stroke]);n[e.ContextStyleAttrs.opacity]&&(i.opacity=n[e.ContextStyleAttrs.opacity]),t.strokeStyle=i.rgb().toString(),t.stroke()}if(n[e.ContextStyleAttrs.fill]){var o=r.color(n[e.ContextStyleAttrs.fill]);n[e.ContextStyleAttrs.opacity]&&(o.opacity=n[e.ContextStyleAttrs.opacity]),t.fillStyle=o.rgb().toString(),t.fill()}}},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(124)),r(n(125)),r(n(126)),r(n(127))},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(5),a=n(4),s=n(8),c=n(0),l=n(10);e.AxisOrientation=l.makeEnum(["bottom","left","right","top"]);var u=function(t){function e(e,n){var r=t.call(this)||this;if(r._endTickLength=5,r._innerTickLength=5,r._tickLabelPadding=10,r._margin=15,r._showEndTickLabels=!1,r._annotationsEnabled=!1,r._annotationTierCount=1,null==e||null==n)throw new Error("Axis requires a scale and orientation");return r._scale=e,r.orientation(n),r._setDefaultAlignment(),r.addClass("axis"),r.isHorizontal()?r.addClass("x-axis"):r.addClass("y-axis"),r.formatter(s.identity()),r._rescaleCallback=function(t){return r._rescale()},r._scale.onUpdate(r._rescaleCallback),r._annotatedTicks=[],r._annotationFormatter=s.identity(),r}return r(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this._scale.offUpdate(this._rescaleCallback)},e.prototype.tickLabelDataOnElement=function(t){if(null!=t){for(var n;null!=t&&t.classList&&void 0===n;)t.classList.contains(e.TICK_LABEL_CLASS)?n=t:t=t.parentNode;return void 0===t?void 0:i.select(t).datum()}},e.prototype._computeWidth=function(){return this._maxLabelTickLength()},e.prototype._computeHeight=function(){return this._maxLabelTickLength()},e.prototype.requestedSpace=function(t,n){var r=0,i=0;if(this.isHorizontal())i=this._computeHeight()+this._margin,this.annotationsEnabled()&&(i+=(o=this._annotationMeasurer.measure().height+2*e._ANNOTATION_LABEL_PADDING)*this.annotationTierCount());else if(r=this._computeWidth()+this._margin,this.annotationsEnabled()){var o=this._annotationMeasurer.measure().height+2*e._ANNOTATION_LABEL_PADDING;r+=o*this.annotationTierCount()}return{minWidth:r,minHeight:i}},e.prototype.fixedHeight=function(){return this.isHorizontal()},e.prototype.fixedWidth=function(){return!this.isHorizontal()},e.prototype._rescale=function(){this.render()},e.prototype.computeLayout=function(e,n,r){return t.prototype.computeLayout.call(this,e,n,r),this.isHorizontal()?this._scale.range([0,this.width()]):this._scale.range([this.height(),0]),this},e.prototype._sizeFromOffer=function(t,e){var n=this.requestedSpace(t,e);return this.isHorizontal()?{width:t,height:n.minHeight}:{height:e,width:n.minWidth}},e.prototype._setup=function(){t.prototype._setup.call(this),this._tickMarkContainer=this.content().append("g").classed(e.TICK_MARK_CLASS+"-container",!0),this._tickLabelContainer=this.content().append("g").classed(e.TICK_LABEL_CLASS+"-container",!0),this._baseline=this.content().append("line").classed("baseline",!0),this._annotationContainer=this.content().append("g").classed("annotation-container",!0),this._annotationContainer.append("g").classed("annotation-line-container",!0),this._annotationContainer.append("g").classed("annotation-circle-container",!0),this._annotationContainer.append("g").classed("annotation-rect-container",!0);var n=this._annotationContainer.append("g").classed("annotation-label-container",!0),r=new o.SvgContext(n.node());this._annotationMeasurer=new o.CacheMeasurer(r),this._annotationWriter=new o.Writer(this._annotationMeasurer,r)},e.prototype._getTickValues=function(){return[]},e.prototype.renderImmediately=function(){var t=this._getTickValues(),n=this._tickMarkContainer.selectAll("."+e.TICK_MARK_CLASS).data(t),r=n.enter().append("line").classed(e.TICK_MARK_CLASS,!0).merge(n);return r.attrs(this._generateTickMarkAttrHash()),i.select(r.nodes()[0]).classed(e.END_TICK_MARK_CLASS,!0).attrs(this._generateTickMarkAttrHash(!0)),i.select(r.nodes()[t.length-1]).classed(e.END_TICK_MARK_CLASS,!0).attrs(this._generateTickMarkAttrHash(!0)),n.exit().remove(),this._baseline.attrs(this._generateBaselineAttrHash()),this.annotationsEnabled()?this._drawAnnotations():this._removeAnnotations(),this},e.prototype.annotatedTicks=function(t){return null==t?this._annotatedTicks:(this._annotatedTicks=t,this.render(),this)},e.prototype.annotationFormatter=function(t){return null==t?this._annotationFormatter:(this._annotationFormatter=t,this.render(),this)},e.prototype.annotationsEnabled=function(t){return null==t?this._annotationsEnabled:(this._annotationsEnabled=t,this.redraw(),this)},e.prototype.annotationTierCount=function(t){if(null==t)return this._annotationTierCount;if(t<0)throw new Error("annotationTierCount cannot be negative");return this._annotationTierCount=t,this.redraw(),this},e.prototype._drawAnnotations=function(){var t=this,n=e._ANNOTATION_LABEL_PADDING,r=new c.Map,o=this._annotatedTicksToRender();o.forEach(function(e){var i=t._annotationMeasurer.measure(t.annotationFormatter()(e)),o={width:i.width+2*n,height:i.height+2*n};r.set(e,o)});var a=this._annotationMeasurer.measure().height+2*n,s=this._annotationToTier(r),l=new c.Set,u=this.isHorizontal()?this.height():this.width(),h=this._coreSize(),p=Math.min(this.annotationTierCount(),Math.floor((u-h)/a));s.forEach(function(t,e){(-1===t||t>=p)&&l.add(e)});var d,_=function(t,e,n){var r=t.selectAll("."+n).data(o),i=r.enter().append(e).classed(n,!0).merge(r);return r.exit().remove(),i},f=function(e){switch(t.orientation()){case"bottom":case"right":return s.get(e)*a+h;case"top":case"left":return u-h-s.get(e)*a}},y=function(e){return t._scale.scale(e)},m=function(t){return l.has(t)?"hidden":"visible"};switch(this.orientation()){case"bottom":case"right":d=0;break;case"top":d=this.height();break;case"left":d=this.width()}var g=this.isHorizontal();_(this._annotationContainer.select(".annotation-line-container"),"line",e.ANNOTATION_LINE_CLASS).attrs({x1:g?y:d,x2:g?y:f,y1:g?d:y,y2:g?f:y,visibility:m}),_(this._annotationContainer.select(".annotation-circle-container"),"circle",e.ANNOTATION_CIRCLE_CLASS).attrs({cx:g?y:d,cy:g?d:y,r:3});var v=function(e){switch(t.orientation()){case"bottom":case"right":return f(e);case"top":case"left":return f(e)-r.get(e).height}};_(this._annotationContainer.select(".annotation-rect-container"),"rect",e.ANNOTATION_RECT_CLASS).attrs({x:g?y:v,y:g?v:y,width:g?function(t){return r.get(t).width}:function(t){return r.get(t).height},height:g?function(t){return r.get(t).height}:function(t){return r.get(t).width},visibility:m});var x=this._annotationWriter,b=this.annotationFormatter(),E=_(this._annotationContainer.select(".annotation-label-container"),"g",e.ANNOTATION_LABEL_CLASS);E.selectAll(".text-container").remove(),E.attrs({transform:function(t){return"translate("+(g?y(t):v(t))+","+(g?v(t):y(t))+")"},visibility:m}).each(function(t){x.write(b(t),g?r.get(t).width:r.get(t).height,g?r.get(t).height:r.get(t).width,{xAlign:"center",yAlign:"center",textRotation:g?0:90},i.select(this).node())})},e.prototype._annotatedTicksToRender=function(){var t=this,e=this._scale.range();return c.Array.uniq(this.annotatedTicks().filter(function(n){return null!=n&&c.Math.inRange(t._scale.scale(n),e[0],e[1])}))},e.prototype._coreSize=function(){var t=this.isHorizontal()?this.height():this.width(),e=this.isHorizontal()?this._computeHeight():this._computeWidth();return Math.min(e,t)},e.prototype._annotationTierHeight=function(){return this._annotationMeasurer.measure().height+2*e._ANNOTATION_LABEL_PADDING},e.prototype._annotationToTier=function(t){var e=this,n=[[]],r=new c.Map,i=this.isHorizontal()?this.width():this.height();return this._annotatedTicksToRender().forEach(function(o){var a=e._scale.scale(o),s=t.get(o).width;if(a<0||a+s>i)r.set(o,-1);else{for(var c=0;function(r){return n[r].some(function(n){var r=e._scale.scale(n),i=t.get(n).width;return a+s>=r&&a<=r+i})}(c);)c++,n.length===c&&n.push([]);n[c].push(o),r.set(o,c)}}),r},e.prototype._removeAnnotations=function(){this._annotationContainer.selectAll(".annotation-line").remove(),this._annotationContainer.selectAll(".annotation-circle").remove(),this._annotationContainer.selectAll(".annotation-rect").remove(),this._annotationContainer.selectAll(".annotation-label").remove()},e.prototype._generateBaselineAttrHash=function(){var t={x1:0,y1:0,x2:0,y2:0};switch(this._orientation){case"bottom":t.x2=this.width();break;case"top":t.x2=this.width(),t.y1=this.height(),t.y2=this.height();break;case"left":t.x1=this.width(),t.x2=this.width(),t.y2=this.height();break;case"right":t.y2=this.height()}return t},e.prototype._generateTickMarkAttrHash=function(t){var e=this;void 0===t&&(t=!1);var n={x1:0,y1:0,x2:0,y2:0},r=function(t){return e._scale.scale(t)};this.isHorizontal()?(n.x1=r,n.x2=r):(n.y1=r,n.y2=r);var i=t?this._endTickLength:this._innerTickLength;switch(this._orientation){case"bottom":n.y2=i;break;case"top":n.y1=this.height(),n.y2=this.height()-i;break;case"left":n.x1=this.width(),n.x2=this.width()-i;break;case"right":n.x2=i}return n},e.prototype._setDefaultAlignment=function(){switch(this._orientation){case"bottom":this.yAlignment("top");break;case"top":this.yAlignment("bottom");break;case"left":this.xAlignment("right");break;case"right":this.xAlignment("left")}},e.prototype.isHorizontal=function(){return"top"===this._orientation||"bottom"===this._orientation},e.prototype.getScale=function(){return this._scale},e.prototype.formatter=function(t){return null==t?this._formatter:(this._formatter=t,this.redraw(),this)},e.prototype.innerTickLength=function(t){if(null==t)return this._innerTickLength;if(t<0)throw new Error("inner tick length must be positive");return this._innerTickLength=t,this.redraw(),this},e.prototype.endTickLength=function(t){if(null==t)return this._endTickLength;if(t<0)throw new Error("end tick length must be positive");return this._endTickLength=t,this.redraw(),this},e.prototype._maxLabelTickLength=function(){return this.showEndTickLabels()?Math.max(this.innerTickLength(),this.endTickLength()):this.innerTickLength()},e.prototype.tickLabelPadding=function(t){if(null==t)return this._tickLabelPadding;if(t<0)throw new Error("tick label padding must be positive");return this._tickLabelPadding=t,this.redraw(),this},e.prototype.margin=function(t){if(null==t)return this._margin;if(t<0)throw new Error("margin size must be positive");return this._margin=t,this.redraw(),this},e.prototype.orientation=function(t){if(null==t)return this._orientation;var e=t.toLowerCase();if("top"!==e&&"bottom"!==e&&"left"!==e&&"right"!==e)throw new Error("unsupported orientation");return this._orientation=e,this.redraw(),this},e.prototype.showEndTickLabels=function(t){return null==t?this._showEndTickLabels:(this._showEndTickLabels=t,this.render(),this)},e.prototype._showAllTickMarks=function(){this._tickMarkContainer.selectAll("."+e.TICK_MARK_CLASS).each(function(){i.select(this).style("visibility","inherit")})},e.prototype._showAllTickLabels=function(){this._tickLabelContainer.selectAll("."+e.TICK_LABEL_CLASS).each(function(){i.select(this).style("visibility","inherit")})},e.prototype._hideOverflowingTickLabels=function(){var t=this.element().node().getBoundingClientRect(),n=this._tickLabelContainer.selectAll("."+e.TICK_LABEL_CLASS);n.empty()||n.each(function(e,n){c.DOM.clientRectInside(this.getBoundingClientRect(),t)||i.select(this).style("visibility","hidden")})},e.prototype._hideTickMarksWithoutLabel=function(){var t=this._tickMarkContainer.selectAll("."+e.TICK_MARK_CLASS),n=this._tickLabelContainer.selectAll("."+e.TICK_LABEL_CLASS).filter(function(t,e){var n=i.select(this).style("visibility");return"inherit"===n||"visible"===n}).data();t.each(function(t,e){-1===n.indexOf(t)&&i.select(this).style("visibility","hidden")})},e.prototype.invalidateCache=function(){t.prototype.invalidateCache.call(this),this._annotationMeasurer.reset()},e}(a.Component);u.END_TICK_MARK_CLASS="end-tick-mark",u.TICK_MARK_CLASS="tick-mark",u.TICK_LABEL_CLASS="tick-label",u.ANNOTATION_LINE_CLASS="annotation-line",u.ANNOTATION_RECT_CLASS="annotation-rect",u.ANNOTATION_CIRCLE_CLASS="annotation-circle",u.ANNOTATION_LABEL_CLASS="annotation-label",u._ANNOTATION_LABEL_PADDING=4,e.Axis=u},function(t,e,n){"use strict";e.SHOW_WARNINGS=!0,e.ADD_TITLE_ELEMENTS=!0},function(t,e,n){"use strict";var r=n(0),i=function(){function t(){this._eventToProcessingFunction={},this._eventNameToCallbackSet={},this._connected=!1}return t.prototype._hasNoCallbacks=function(){for(var t=Object.keys(this._eventNameToCallbackSet),e=0;e<t.length;e++)if(0!==this._eventNameToCallbackSet[t[e]].size)return!1;return!0},t.prototype._connect=function(){var t=this;this._connected||(Object.keys(this._eventToProcessingFunction).forEach(function(e){var n=t._eventToProcessingFunction[e];document.addEventListener(e,n)}),this._connected=!0)},t.prototype._disconnect=function(){var t=this;this._connected&&this._hasNoCallbacks()&&(Object.keys(this._eventToProcessingFunction).forEach(function(e){var n=t._eventToProcessingFunction[e];document.removeEventListener(e,n)}),this._connected=!1)},t.prototype._addCallbackForEvent=function(t,e){null==this._eventNameToCallbackSet[t]&&(this._eventNameToCallbackSet[t]=new r.CallbackSet),this._eventNameToCallbackSet[t].add(e),this._connect()},t.prototype._removeCallbackForEvent=function(t,e){null!=this._eventNameToCallbackSet[t]&&this._eventNameToCallbackSet[t].delete(e),this._disconnect()},t.prototype._callCallbacksForEvent=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this._eventNameToCallbackSet[t];null!=r&&r.callCallbacks.apply(r,e)},t}();e.Dispatcher=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(5),a=n(7),s=n(8),c=n(6),l=n(32),u=n(3),h=n(11),p=n(0),d=n(10),_=n(17),f=n(2),y=n(16);e.BarOrientation=d.makeEnum(["vertical","horizontal"]),e.LabelsPosition=d.makeEnum(["start","middle","end","outside"]),e.BarAlignment=d.makeEnum(["start","middle","end"]);var m=function(t){function n(r){void 0===r&&(r="vertical");var i=t.call(this)||this;if(i._labelFormatter=s.identity(),i._labelsEnabled=!1,i._labelsPosition=e.LabelsPosition.end,i._hideBarsIfAnyAreTooWide=!0,i._barAlignment="middle",i._fixedBarPixelThickness=!0,i._barPixelThickness=0,i.addClass("bar-plot"),"vertical"!==r&&"horizontal"!==r)throw new Error(r+" is not a valid orientation for Plots.Bar");return i._isVertical="vertical"===r,i.animator("baseline",new a.Null),i.attr("fill",(new u.Color).range()[0]),i.attr(n._BAR_THICKNESS_KEY,function(){return i._barPixelThickness}),i._labelConfig=new p.Map,i._baselineValueProvider=function(){return[i.baselineValue()]},i._updateBarPixelThicknessCallback=function(){return i._updateBarPixelWidth()},i}return r(n,t),n.prototype.x=function(e,n){return null==e?t.prototype.x.call(this):(null==n?t.prototype.x.call(this,e):(t.prototype.x.call(this,e,n),n.onUpdate(this._updateBarPixelThicknessCallback)),this._updateThicknessAttr(),this._updateLengthScale(),this)},n.prototype.y=function(e,n){return null==e?t.prototype.y.call(this):(null==n?t.prototype.y.call(this,e):(t.prototype.y.call(this,e,n),n.onUpdate(this._updateBarPixelThicknessCallback)),this._updateLengthScale(),this)},n.prototype.length=function(){return this._isVertical?this.y():this.x()},n.prototype.position=function(){return this._isVertical?this.x():this.y()},n.prototype.barEnd=function(t){if(null==t)return this._propertyBindings.get(n._BAR_END_KEY);var e=this.position(),r=e&&e.scale;return this._bindProperty(n._BAR_END_KEY,t,r),this._updateThicknessAttr(),this._updateLengthScale(),this.render(),this},n.prototype.barAlignment=function(t){return null==t?this._barAlignment:(this._barAlignment=t,this.render(),this)},n.prototype.orientation=function(){return this._isVertical?"vertical":"horizontal"},n.prototype.render=function(){return this._updateBarPixelWidth(),this._updateExtents(),t.prototype.render.call(this),this},n.prototype._createDrawer=function(){return new c.ProxyDrawer(function(){return new l.RectangleSVGDrawer(n._BAR_AREA_CLASS)},l.RectangleCanvasDrawStep)},n.prototype._setup=function(){t.prototype._setup.call(this),this._baseline=this._renderArea.append("line").classed("baseline",!0)},n.prototype.baselineValue=function(t){if(null==t){if(null!=this._baselineValue)return this._baselineValue;if(!this._projectorsReady())return 0;var e=this.length().scale;return e&&e instanceof u.Time?new Date(0):0}return this._baselineValue=t,this._updateLengthScale(),this.render(),this},n.prototype.addDataset=function(e){return t.prototype.addDataset.call(this,e),this._updateBarPixelWidth(),this},n.prototype._addDataset=function(e){return e.onUpdate(this._updateBarPixelThicknessCallback),t.prototype._addDataset.call(this,e),this},n.prototype.removeDataset=function(e){return e.offUpdate(this._updateBarPixelThicknessCallback),t.prototype.removeDataset.call(this,e),this._updateBarPixelWidth(),this},n.prototype._removeDataset=function(e){return e.offUpdate(this._updateBarPixelThicknessCallback),t.prototype._removeDataset.call(this,e),this},n.prototype.datasets=function(e){return null==e?t.prototype.datasets.call(this):(t.prototype.datasets.call(this,e),this._updateBarPixelWidth(),this)},n.prototype.labelsEnabled=function(t,e){return null==t?this._labelsEnabled:(this._labelsEnabled=t,null!=e&&(this._labelsPosition=e),this.render(),this)},n.prototype.labelFormatter=function(t){return null==t?this._labelFormatter:(this._labelFormatter=t,this.render(),this)},n.prototype._createNodesForDataset=function(e){var r=t.prototype._createNodesForDataset.call(this,e),i=this._renderArea.append("g").classed(n._LABEL_AREA_CLASS,!0),a=new o.SvgContext(i.node()),s=new o.CacheMeasurer(a),c=new o.Writer(s,a);return this._labelConfig.set(e,{labelArea:i,measurer:s,writer:c}),r},n.prototype._removeDatasetNodes=function(e){t.prototype._removeDatasetNodes.call(this,e);var n=this._labelConfig.get(e);null!=n&&(n.labelArea.remove(),this._labelConfig.delete(e))},n.prototype.entityNearest=function(t){var e,n=this,r=1/0,o=1/0,a=this._isVertical?t.x:t.y,s=this._isVertical?t.y:t.x,c=this.bounds();return this._getEntityStore().entities().forEach(function(l){if(n._entityVisibleOnPlot(l,c)){var u=0,h=0,d=n._pixelPoint(l.datum,l.index,l.dataset),_=p.DOM.elementBBox(i.select(l.drawer.getVisualPrimitiveAtIndex(l.validDatumIndex)));if(!p.DOM.intersectsBBox(t.x,t.y,_,.5)){var f=n._isVertical?d.x:d.y;u=Math.abs(a-f);var y=n._isVertical?_.y:_.x,m=y+(n._isVertical?_.height:_.width);if(s>=y-.5&&s<=m+.5)h=0;else{var g=n._isVertical?d.y:d.x;h=Math.abs(s-g)}}(u<r||u===r&&h<o)&&(e=l,r=u,o=h)}}),void 0!==e?this._lightweightPlotEntityToPlotEntity(e):void 0},n.prototype._entityVisibleOnPlot=function(t,e){var n={min:0,max:e.bottomRight.x-e.topLeft.x},r={min:0,max:e.bottomRight.y-e.topLeft.y},i=this._generateAttrToProjector(),o=t.datum,a=t.index,s=t.dataset,c={x:i.x(o,a,s),y:i.y(o,a,s),width:i.width(o,a,s),height:i.height(o,a,s)};return p.DOM.intersectsBBox(n,r,c)},n.prototype.entitiesAt=function(t){return this._entitiesIntersecting(t.x,t.y)},n.prototype.entitiesIn=function(t,e){var n,r;if(null==e){var i=t;n={min:i.topLeft.x,max:i.bottomRight.x},r={min:i.topLeft.y,max:i.bottomRight.y}}else n=t,r=e;return this._entitiesIntersecting(n,r)},n.prototype._entitiesIntersecting=function(t,e){var n=this,r=[];return this._getEntityStore().entities().forEach(function(o){var a=i.select(o.drawer.getVisualPrimitiveAtIndex(o.validDatumIndex));p.DOM.intersectsBBox(t,e,p.DOM.elementBBox(a))&&r.push(n._lightweightPlotEntityToPlotEntity(o))}),r},n.prototype._updateLengthScale=function(){if(this._projectorsReady()){var t=this.length().scale;t instanceof h.QuantitativeScale&&(t.addPaddingExceptionsProvider(this._baselineValueProvider),t.addIncludedValuesProvider(this._baselineValueProvider))}},n.prototype._additionalPaint=function(t){var e=this,n=this.length().scale.scale(this.baselineValue()),r={x1:this._isVertical?0:n,y1:this._isVertical?n:0,x2:this._isVertical?this.width():n,y2:this._isVertical?n:this.height()};this._getAnimator("baseline").animate(this._baseline,r),this.datasets().forEach(function(t){return e._labelConfig.get(t).labelArea.selectAll("g").remove()}),this._labelsEnabled&&p.Window.setTimeout(function(){return e._drawLabels()},t)},n.prototype._extentsForProperty=function(e){var n,r=this,o=t.prototype._extentsForProperty.call(this,e);if("x"===e&&this._isVertical)n=this.x();else{if("y"!==e||this._isVertical)return o;n=this.y()}if(!(n&&n.scale&&n.scale instanceof h.QuantitativeScale))return o;var a=n.scale,s=this._barPixelThickness;return o=o.map(function(t){return i.extent([a.invert(r._getPositionAttr(a.scale(t[0]),s)),a.invert(r._getPositionAttr(a.scale(t[0]),s)+s),a.invert(r._getPositionAttr(a.scale(t[1]),s)),a.invert(r._getPositionAttr(a.scale(t[1]),s)+s)])})},n.prototype._getPositionAttr=function(t,e){switch(this._isVertical||(t-=e,e*=-1),this._barAlignment){case"start":return t;case"end":return t-e;case"middle":default:return t-e/2}},n.prototype._drawLabels=function(){var t=this,e=this._getDataToDraw(),n=this._generateAttrToProjector(),r=this.datasets().some(function(r){return e.get(r).some(function(e,i){return t._drawLabel(e,i,r,n)})});this._hideBarsIfAnyAreTooWide&&r&&this.datasets().forEach(function(e){return t._labelConfig.get(e).labelArea.selectAll("g").remove()})},n.prototype._drawLabel=function(t,e,r,i){var o=this._labelConfig.get(r),a=o.labelArea,s=o.measurer,c=o.writer,l=(0,this.length().accessor)(t,e,r),u=this.length().scale,h=null!=u?u.scale(l):l,p=null!=u?u.scale(this.baselineValue()):this.baselineValue(),d={x:i.x(t,e,r),y:i.y(t,e,r)},_={width:i.width(t,e,r),height:i.height(t,e,r)},f=this._labelFormatter(l,t,e,r),y=s.measure(f),m=this._getShowLabelOnBar(d,_,y),g=this._isVertical?h<=p:h<p,v=this._calculateLabelProperties(d,_,y,m,g),x=v.containerDimensions,b=v.labelContainerOrigin,E=v.labelOrigin,w=v.alignment,A=i.fill(t,e,r),C=this._createLabelContainer(a,b,E,y,m,A),S={xAlign:w.x,yAlign:w.y};return c.write(f,x.width,x.height,S,C.node()),this._isVertical?_.width<y.width+2*n._LABEL_PADDING:_.height<y.height+2*n._LABEL_PADDING},n.prototype._getShowLabelOnBar=function(t,r,i){if(this._labelsPosition===e.LabelsPosition.outside)return!1;var o=this._isVertical?t.y:t.x,a=this._isVertical?r.height:r.width,s=this._isVertical?this.height():this.width(),c=this._isVertical?i.height:i.width,l=a;return o+a>s?l=s-o:o<0&&(l=o+a),c+2*n._LABEL_PADDING<=l},n.prototype._calculateLabelProperties=function(t,r,i,o,a){var s=this,c=this._isVertical?t.y:t.x,l=this._isVertical?r.height:r.width,u=this._isVertical?i.height:i.width,h="center",p=l,d=c,_=c,f=function(t){switch(t){case"topLeft":return h=s._isVertical?"top":"left",d+=n._LABEL_PADDING,void(_+=n._LABEL_PADDING);case"center":return void(_+=(l+u)/2);case"bottomRight":return h=s._isVertical?"bottom":"right",d-=n._LABEL_PADDING,void(_+=p-n._LABEL_PADDING-u)}};if(o)switch(this._labelsPosition){case e.LabelsPosition.start:f(a?"bottomRight":"topLeft");break;case e.LabelsPosition.middle:f("center");break;case e.LabelsPosition.end:f(a?"topLeft":"bottomRight")}else a?(h=this._isVertical?"top":"left",p=l+n._LABEL_PADDING+u,d-=n._LABEL_PADDING+u,_-=n._LABEL_PADDING+u):(h=this._isVertical?"bottom":"right",p=l+n._LABEL_PADDING+u,_+=l+n._LABEL_PADDING);return{containerDimensions:{width:this._isVertical?r.width:p,height:this._isVertical?p:r.height},labelContainerOrigin:{x:this._isVertical?t.x:d,y:this._isVertical?d:t.y},labelOrigin:{x:this._isVertical?t.x+r.width/2-i.width/2:_,y:this._isVertical?_:t.y+r.height/2-i.height/2},alignment:{x:this._isVertical?"center":h,y:this._isVertical?h:"center"}}},n.prototype._createLabelContainer=function(t,e,n,r,i,o){var a=t.append("g").attr("transform","translate("+e.x+", "+e.y+")");if(i){a.classed("on-bar-label",!0);var s=1.6*p.Color.contrast("white",o)<p.Color.contrast("black",o);a.classed(s?"dark-label":"light-label",!0)}else a.classed("off-bar-label",!0);var c=n.x<0||n.y<0||n.x+r.width>this.width()||n.y+r.height>this.height();return a.style("visibility",c?"hidden":"inherit"),a},n.prototype._generateDrawSteps=function(){var t=[];if(this._animateOnNextRender()){var e=this._generateAttrToProjector(),n=this.length().scale.scale(this.baselineValue()),r=this._isVertical?"y":"x",i=this._isVertical?"height":"width";e[r]=function(){return n},e[i]=function(){return 0},t.push({attrToProjector:e,animator:this._getAnimator(_.Animator.RESET)})}return t.push({attrToProjector:this._generateAttrToProjector(),animator:this._getAnimator(_.Animator.MAIN)}),t},n.prototype._generateAttrToProjector=function(){var e=this,r=t.prototype._generateAttrToProjector.call(this),i=this.length().scale.scale(this.baselineValue()),o=this._isVertical?"y":"x",a=this._isVertical?"x":"y",s=f.Plot._scaledAccessor(this.position()),c=f.Plot._scaledAccessor(this.length()),l=function(t,e,n){return Math.abs(i-c(t,e,n))},u=r[n._BAR_THICKNESS_KEY],h=r.gap,p=null==h?u:function(t,e,n){return u(t,e,n)-h(t,e,n)};return r.width=this._isVertical?p:l,r.height=this._isVertical?l:p,r[o]=function(t,e,n){var r=c(t,e,n);return r>i?i:r},r[a]=function(t,n,r){return e._getPositionAttr(s(t,n,r),u(t,n,r))},r},n.prototype._updateThicknessAttr=function(){var t=this,e=this._isVertical?this.x():this.y(),r=this.barEnd();null!=e&&null!=r?(this._fixedBarPixelThickness=!1,this.attr(n._BAR_THICKNESS_KEY,function(t,n,i){var o=e.accessor(t,n,i),a=r.accessor(t,n,i);return o=e.scale?e.scale.scale(o):o,a=r.scale?r.scale.scale(a):a,Math.abs(a-o)})):(this._fixedBarPixelThickness=!0,this._updateBarPixelWidth(),this.attr(n._BAR_THICKNESS_KEY,function(){return t._barPixelThickness}))},n.prototype._computeBarPixelThickness=function(){if(!this._projectorsReady())return 0;var t,e=this.position().scale;if(e instanceof u.Category)t=e.rangeBand();else{var r=this.position().accessor,o=i.set(p.Array.flatten(this.datasets().map(function(t){return t.data().map(function(e,n){return r(e,n,t)}).filter(function(t){return null!=t}).map(function(t){return t.valueOf()})}))).values().map(function(t){return+t});o.sort(function(t,e){return t-e});var a=o.map(function(t){return e.scale(t)}),s=i.pairs(a),c=this._isVertical?this.width():this.height();t=p.Math.min(s,function(t,e){return Math.abs(t[1]-t[0])},c*n._SINGLE_BAR_DIMENSION_RATIO),t*=n._BAR_THICKNESS_RATIO}return t},n.prototype._updateBarPixelWidth=function(){this._fixedBarPixelThickness&&(this._barPixelThickness=this._computeBarPixelThickness())},n.prototype.entities=function(e){return void 0===e&&(e=this.datasets()),this._projectorsReady()?t.prototype.entities.call(this,e):[]},n.prototype._pixelPoint=function(t,e,n){var r,i,o=this._generateAttrToProjector(),a=o.x(t,e,n),s=o.y(t,e,n),c=o.width(t,e,n),l=o.height(t,e,n),u=(this._isVertical?f.Plot._scaledAccessor(this.y()):f.Plot._scaledAccessor(this.x()))(t,e,n),h=(this._isVertical?this.y().scale:this.x().scale).scale(this.baselineValue());return this._isVertical?(r=a+c/2,i=u<=h?s:s+l):(r=u>=h?a+c:a,i=s+l/2),{x:r,y:i}},n.prototype._uninstallScaleForKey=function(e,n){e.offUpdate(this._updateBarPixelThicknessCallback),t.prototype._uninstallScaleForKey.call(this,e,n)},n.prototype._getDataToDraw=function(){var t=new p.Map,e=this._generateAttrToProjector();return this.datasets().forEach(function(n){var r=n.data().filter(function(t,r){return p.Math.isValidNumber(e.x(t,r,n))&&p.Math.isValidNumber(e.y(t,r,n))&&p.Math.isValidNumber(e.width(t,r,n))&&p.Math.isValidNumber(e.height(t,r,n))});t.set(n,r)}),t},n}(y.XYPlot);m._BAR_THICKNESS_RATIO=.95,m._SINGLE_BAR_DIMENSION_RATIO=.4,m._BAR_AREA_CLASS="bar-area",m._BAR_END_KEY="barEnd",m._BAR_THICKNESS_KEY="width",m._LABEL_AREA_CLASS="bar-label-text-area",m._LABEL_PADDING=10,e.Bar=m},function(t,e,n){"use strict";function r(t){o.SHOW_WARNINGS&&console.warn(t)}function i(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return 0===e?(t(n),-1):window.setTimeout(t,e,n)}var o=n(22);e.warn=r,e.setTimeout=i,e.debounce=function(t,e,n){var r=null,o=[],a=function(){e.apply(n,o)};return function(){o=Array.prototype.slice.call(arguments),clearTimeout(r),r=i(a,t)}},e.deprecated=function(t,e,n){void 0===n&&(n=""),r("Method "+t+" has been deprecated in version "+e+". Please refer to the release notes. "+n)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(5),a=n(8),s=n(3),c=n(0),l=n(10),u=n(21);e.TimeInterval=l.makeEnum(["second","minute","hour","day","week","month","year"]),e.TimeAxisOrientation=l.makeEnum(["top","bottom"]),e.TierLabelPosition=l.makeEnum(["between","center"]);var h=function(t){function e(n,r){var i=t.call(this,n,r)||this;return i._maxTimeIntervalPrecision=null,i._tierLabelPositions=[],i.addClass("time-axis"),i.tickLabelPadding(5),i.axisConfigurations(e._DEFAULT_TIME_AXIS_CONFIGURATIONS),i.annotationFormatter(a.time("%a %b %d, %Y")),i}return r(e,t),e.prototype.tierLabelPositions=function(t){if(null==t)return this._tierLabelPositions;if(!t.every(function(t){return"between"===t.toLowerCase()||"center"===t.toLowerCase()}))throw new Error("Unsupported position for tier labels");return this._tierLabelPositions=t,this.redraw(),this},e.prototype.maxTimeIntervalPrecision=function(t){return null==t?this._maxTimeIntervalPrecision:(this._maxTimeIntervalPrecision=t,this.redraw(),this)},e.prototype.currentAxisConfiguration=function(){return this._possibleTimeAxisConfigurations[this._mostPreciseConfigIndex]},e.prototype.axisConfigurations=function(t){if(null==t)return this._possibleTimeAxisConfigurations;this._possibleTimeAxisConfigurations=t,this._numTiers=c.Math.max(this._possibleTimeAxisConfigurations.map(function(t){return t.length}),0),this._isAnchored&&this._setupDomElements();for(var e=this.tierLabelPositions(),n=[],r=0;r<this._numTiers;r++)n.push(e[r]||"between");return this.tierLabelPositions(n),this.redraw(),this},e.prototype._getMostPreciseConfigurationIndex=function(){var t=this,e=this._possibleTimeAxisConfigurations.length;return this._possibleTimeAxisConfigurations.forEach(function(n,r){r<e&&n.every(function(e){return t._checkTimeAxisTierConfiguration(e)})&&(e=r)}),e===this._possibleTimeAxisConfigurations.length&&(c.Window.warn("zoomed out too far: could not find suitable interval to display labels"),--e),e},e.prototype.orientation=function(e){if(e&&("right"===e.toLowerCase()||"left"===e.toLowerCase()))throw new Error(e+" is not a supported orientation for TimeAxis - only horizontal orientations are supported");return t.prototype.orientation.call(this,e)},e.prototype._computeHeight=function(){var t=this._measurer.measure().height;this._tierHeights=[];for(var e=0;e<this._numTiers;e++)this._tierHeights.push(t+this.tickLabelPadding()+("between"===this._tierLabelPositions[e]?0:this._maxLabelTickLength()));return i.sum(this._tierHeights)},e.prototype._getIntervalLength=function(t){var e=this._scale.domain()[0],n=s.Time.timeIntervalToD3Time(t.interval).offset(e,t.step);return n>this._scale.domain()[1]?this.width():Math.abs(this._scale.scale(n)-this._scale.scale(e))},e.prototype._maxWidthForInterval=function(t){return this._measurer.measure(t.formatter(e._LONG_DATE)).width},e.prototype._checkTimeAxisTierConfiguration=function(t){if(null!=this._maxTimeIntervalPrecision){var n=e._SORTED_TIME_INTERVAL_INDEX[this._maxTimeIntervalPrecision],r=e._SORTED_TIME_INTERVAL_INDEX[t.interval];if(null!=n&&null!=r&&r<n)return!1}var i=this._maxWidthForInterval(t)+2*this.tickLabelPadding();return Math.min(this._getIntervalLength(t),this.width())>=i},e.prototype._sizeFromOffer=function(e,n){var r=t.prototype._sizeFromOffer.call(this,e,n),i=this._tierHeights.reduce(function(t,e,n,i){return t+e>r.height?t:t+e}),o=this.margin()+(this.annotationsEnabled()?this.annotationTierCount()*this._annotationTierHeight():0);return r.height=Math.min(r.height,i+o),r},e.prototype._setup=function(){t.prototype._setup.call(this),this._setupDomElements()},e.prototype._setupDomElements=function(){this.content().selectAll("."+e.TIME_AXIS_TIER_CLASS).remove(),this._tierLabelContainers=[],this._tierMarkContainers=[],this._tierBaselines=[],this._tickLabelContainer.remove(),this._baseline.remove();for(var t=0;t<this._numTiers;++t){var n=this.content().append("g").classed(e.TIME_AXIS_TIER_CLASS,!0);this._tierLabelContainers.push(n.append("g").classed(u.Axis.TICK_LABEL_CLASS+"-container",!0)),this._tierMarkContainers.push(n.append("g").classed(u.Axis.TICK_MARK_CLASS+"-container",!0)),this._tierBaselines.push(n.append("line").classed("baseline",!0))}var r=new o.SvgContext(this._tierLabelContainers[0].node());this._measurer=new o.CacheMeasurer(r)},e.prototype._getTickIntervalValues=function(t){return this._scale.tickInterval(t.interval,t.step)},e.prototype._getTickValues=function(){var t=this;return this._possibleTimeAxisConfigurations[this._mostPreciseConfigIndex].reduce(function(e,n){return e.concat(t._getTickIntervalValues(n))},[])},e.prototype._cleanTiers=function(){for(var t=0;t<this._tierLabelContainers.length;t++)this._tierLabelContainers[t].selectAll("."+u.Axis.TICK_LABEL_CLASS).remove(),this._tierMarkContainers[t].selectAll("."+u.Axis.TICK_MARK_CLASS).remove(),this._tierBaselines[t].style("visibility","hidden")},e.prototype._getTickValuesForConfiguration=function(t){var e=this._scale.tickInterval(t.interval,t.step),n=this._scale.domain(),r=e.map(function(t){return t.valueOf()});return-1===r.indexOf(n[0].valueOf())&&e.unshift(n[0]),-1===r.indexOf(n[1].valueOf())&&e.push(n[1]),e},e.prototype._renderTierLabels=function(t,e,n){var r=this,o=this._getTickValuesForConfiguration(e),a=[];"between"===this._tierLabelPositions[n]&&1===e.step?o.map(function(t,e){e+1>=o.length||a.push(new Date((o[e+1].valueOf()-o[e].valueOf())/2+o[e].valueOf()))}):a=o;var s=t.selectAll("."+u.Axis.TICK_LABEL_CLASS).data(a,function(t){return String(t.valueOf())}),c=s.enter().append("g").classed(u.Axis.TICK_LABEL_CLASS,!0);c.append("text");var l,h="center"===this._tierLabelPositions[n]||1===e.step?0:this.tickLabelPadding();l="bottom"===this.orientation()?i.sum(this._tierHeights.slice(0,n+1))-this.tickLabelPadding():"center"===this._tierLabelPositions[n]?this.height()-i.sum(this._tierHeights.slice(0,n))-this.tickLabelPadding()-this._maxLabelTickLength():this.height()-i.sum(this._tierHeights.slice(0,n))-this.tickLabelPadding();var p=s.merge(c),d=p.selectAll("text");d.size()>0&&d.attr("transform","translate("+h+","+l+")"),s.exit().remove(),p.attr("transform",function(t){return"translate("+r._scale.scale(t)+",0)"});var _="center"===this._tierLabelPositions[n]||1===e.step?"middle":"start";p.selectAll("text").text(e.formatter).style("text-anchor",_)},e.prototype._renderTickMarks=function(t,e){var n=this._tierMarkContainers[e].selectAll("."+u.Axis.TICK_MARK_CLASS).data(t),r=n.enter().append("line").classed(u.Axis.TICK_MARK_CLASS,!0).merge(n),o=this._generateTickMarkAttrHash(),a=this._tierHeights.slice(0,e).reduce(function(t,e){return t+e},0);"bottom"===this.orientation()?(o.y1=a,o.y2=a+("center"===this._tierLabelPositions[e]?this.innerTickLength():this._tierHeights[e])):(o.y1=this.height()-a,o.y2=this.height()-(a+("center"===this._tierLabelPositions[e]?this.innerTickLength():this._tierHeights[e]))),r.attrs(o),"bottom"===this.orientation()?(o.y1=a,o.y2=a+("center"===this._tierLabelPositions[e]?this.endTickLength():this._tierHeights[e])):(o.y1=this.height()-a,o.y2=this.height()-(a+("center"===this._tierLabelPositions[e]?this.endTickLength():this._tierHeights[e]))),i.select(r.nodes()[0]).attrs(o),i.select(r.nodes()[r.size()-1]).attrs(o),i.select(r.nodes()[0]).classed(u.Axis.END_TICK_MARK_CLASS,!0),i.select(r.nodes()[r.size()-1]).classed(u.Axis.END_TICK_MARK_CLASS,!0),n.exit().remove()},e.prototype._renderLabellessTickMarks=function(t){var e=this._tickMarkContainer.selectAll("."+u.Axis.TICK_MARK_CLASS).data(t),n=e.enter().append("line").classed(u.Axis.TICK_MARK_CLASS,!0).merge(e),r=this._generateTickMarkAttrHash();r.y2="bottom"===this.orientation()?this.tickLabelPadding():this.height()-this.tickLabelPadding(),n.attrs(r),e.exit().remove()},e.prototype._generateLabellessTicks=function(){return this._mostPreciseConfigIndex<1?[]:this._getTickIntervalValues(this._possibleTimeAxisConfigurations[this._mostPreciseConfigIndex-1][0])},e.prototype.renderImmediately=function(){var t=this;this._mostPreciseConfigIndex=this._getMostPreciseConfigurationIndex();var e=this._possibleTimeAxisConfigurations[this._mostPreciseConfigIndex];this._cleanTiers(),e.forEach(function(e,n){return t._renderTierLabels(t._tierLabelContainers[n],e,n)});for(var n=e.map(function(e,n){return t._getTickValuesForConfiguration(e)}),r=0,i=0;i<Math.max(e.length,1);++i){var o=this._generateBaselineAttrHash();o.y1+="bottom"===this.orientation()?r:-r,o.y2=o.y1,this._tierBaselines[i].attrs(o).style("visibility","inherit"),r+=this._tierHeights[i]}var a=[],s=this._scale.domain(),c=this._scale.scale(s[1])-this._scale.scale(s[0]);1.5*this._getIntervalLength(e[0])>=c&&(a=this._generateLabellessTicks()),this._renderLabellessTickMarks(a),this._hideOverflowingTiers();for(i=0;i<e.length;++i)this._renderTickMarks(n[i],i),this._hideOverlappingAndCutOffLabels(i);return this.annotationsEnabled()?this._drawAnnotations():this._removeAnnotations(),this},e.prototype._hideOverflowingTiers=function(){var t=this,n=this.height(),r=0;this.content().selectAll("."+e.TIME_AXIS_TIER_CLASS).attr("visibility",function(e,i){return(r+=t._tierHeights[i])<=n?"inherit":"hidden"})},e.prototype._hideOverlappingAndCutOffLabels=function(t){var e,n=this,r=this.element().node().getBoundingClientRect(),o=function(t){return Math.floor(r.left)<=Math.ceil(t.left)&&Math.floor(r.top)<=Math.ceil(t.top)&&Math.floor(t.right)<=Math.ceil(r.left+n.width())&&Math.floor(t.bottom)<=Math.ceil(r.top+n.height())},a=this._tierMarkContainers[t].selectAll("."+u.Axis.TICK_MARK_CLASS).filter(function(t,e){var n=i.select(this).style("visibility");return"visible"===n||"inherit"===n}).nodes().map(function(t){return t.getBoundingClientRect()});this._tierLabelContainers[t].selectAll("."+u.Axis.TICK_LABEL_CLASS).filter(function(t,e){var n=i.select(this).style("visibility");return"visible"===n||"inherit"===n}).each(function(t,n){var r=this.getBoundingClientRect(),s=i.select(this),l=a[n],u=a[n+1],h=null!=e&&c.DOM.clientRectsOverlap(r,e),p=null!=l&&c.DOM.clientRectsOverlap(r,l),d=null!=u&&c.DOM.clientRectsOverlap(r,u);!o(r)||h||p||d?s.style("visibility","hidden"):(e=r,s.style("visibility","inherit"))})},e.prototype.invalidateCache=function(){t.prototype.invalidateCache.call(this),this._measurer.reset()},e}(u.Axis);h.TIME_AXIS_TIER_CLASS="time-axis-tier",h._SORTED_TIME_INTERVAL_INDEX=(p={},p[e.TimeInterval.second]=0,p[e.TimeInterval.minute]=1,p[e.TimeInterval.hour]=2,p[e.TimeInterval.day]=3,p[e.TimeInterval.week]=4,p[e.TimeInterval.month]=5,p[e.TimeInterval.year]=6,p),h._DEFAULT_TIME_AXIS_CONFIGURATIONS=[[{interval:e.TimeInterval.second,step:1,formatter:a.time("%I:%M:%S %p")},{interval:e.TimeInterval.day,step:1,formatter:a.time("%B %e, %Y")}],[{interval:e.TimeInterval.second,step:5,formatter:a.time("%I:%M:%S %p")},{interval:e.TimeInterval.day,step:1,formatter:a.time("%B %e, %Y")}],[{interval:e.TimeInterval.second,step:10,formatter:a.time("%I:%M:%S %p")},{interval:e.TimeInterval.day,step:1,formatter:a.time("%B %e, %Y")}],[{interval:e.TimeInterval.second,step:15,formatter:a.time("%I:%M:%S %p")},{interval:e.TimeInterval.day,step:1,formatter:a.time("%B %e, %Y")}],[{interval:e.TimeInterval.second,step:30,formatter:a.time("%I:%M:%S %p")},{interval:e.TimeInterval.day,step:1,formatter:a.time("%B %e, %Y")}],[{interval:e.TimeInterval.minute,step:1,formatter:a.time("%I:%M %p")},{interval:e.TimeInterval.day,step:1,formatter:a.time("%B %e, %Y")}],[{interval:e.TimeInterval.minute,step:5,formatter:a.time("%I:%M %p")},{interval:e.TimeInterval.day,step:1,formatter:a.time("%B %e, %Y")}],[{interval:e.TimeInterval.minute,step:10,formatter:a.time("%I:%M %p")},{interval:e.TimeInterval.day,step:1,formatter:a.time("%B %e, %Y")}],[{interval:e.TimeInterval.minute,step:15,formatter:a.time("%I:%M %p")},{interval:e.TimeInterval.day,step:1,formatter:a.time("%B %e, %Y")}],[{interval:e.TimeInterval.minute,step:30,formatter:a.time("%I:%M %p")},{interval:e.TimeInterval.day,step:1,formatter:a.time("%B %e, %Y")}],[{interval:e.TimeInterval.hour,step:1,formatter:a.time("%I %p")},{interval:e.TimeInterval.day,step:1,formatter:a.time("%B %e, %Y")}],[{interval:e.TimeInterval.hour,step:3,formatter:a.time("%I %p")},{interval:e.TimeInterval.day,step:1,formatter:a.time("%B %e, %Y")}],[{interval:e.TimeInterval.hour,step:6,formatter:a.time("%I %p")},{interval:e.TimeInterval.day,step:1,formatter:a.time("%B %e, %Y")}],[{interval:e.TimeInterval.hour,step:12,formatter:a.time("%I %p")},{interval:e.TimeInterval.day,step:1,formatter:a.time("%B %e, %Y")}],[{interval:e.TimeInterval.day,step:1,formatter:a.time("%a %e")},{interval:e.TimeInterval.month,step:1,formatter:a.time("%B %Y")}],[{interval:e.TimeInterval.day,step:1,formatter:a.time("%e")},{interval:e.TimeInterval.month,step:1,formatter:a.time("%B %Y")}],[{interval:e.TimeInterval.month,step:1,formatter:a.time("%B")},{interval:e.TimeInterval.year,step:1,formatter:a.time("%Y")}],[{interval:e.TimeInterval.month,step:1,formatter:a.time("%b")},{interval:e.TimeInterval.year,step:1,formatter:a.time("%Y")}],[{interval:e.TimeInterval.month,step:3,formatter:a.time("%b")},{interval:e.TimeInterval.year,step:1,formatter:a.time("%Y")}],[{interval:e.TimeInterval.month,step:6,formatter:a.time("%b")},{interval:e.TimeInterval.year,step:1,formatter:a.time("%Y")}],[{interval:e.TimeInterval.year,step:1,formatter:a.time("%Y")}],[{interval:e.TimeInterval.year,step:1,formatter:a.time("%y")}],[{interval:e.TimeInterval.year,step:5,formatter:a.time("%Y")}],[{interval:e.TimeInterval.year,step:25,formatter:a.time("%Y")}],[{interval:e.TimeInterval.year,step:50,formatter:a.time("%Y")}],[{interval:e.TimeInterval.year,step:100,formatter:a.time("%Y")}],[{interval:e.TimeInterval.year,step:200,formatter:a.time("%Y")}],[{interval:e.TimeInterval.year,step:500,formatter:a.time("%Y")}],[{interval:e.TimeInterval.year,step:1e3,formatter:a.time("%Y")}]],h._LONG_DATE=new Date(9999,8,29,12,59,9999),e.Time=h;var p},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(12),o=function(t){function e(){var e=t.call(this)||this;return e._detachCallback=function(t){return e.remove(t)},e}return r(e,t),e.prototype.anchor=function(e){var n=this;return e=i.coerceExternalD3(e),t.prototype.anchor.call(this,e),this._forEach(function(t){return t.anchor(n.element())}),this},e.prototype.render=function(){return this._forEach(function(t){return t.render()}),this},e.prototype.has=function(t){throw new Error("has() is not implemented on ComponentContainer")},e.prototype._adoptAndAnchor=function(t){t.parent(this),t.onDetach(this._detachCallback),this._isAnchored&&t.anchor(this.element())},e.prototype.remove=function(t){return this.has(t)&&(t.offDetach(this._detachCallback),this._remove(t),t.detach(),this.redraw()),this},e.prototype._remove=function(t){return!1},e.prototype._forEach=function(t){throw new Error("_forEach() is not implemented on ComponentContainer")},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._forEach(function(t){return t.destroy()})},e.prototype.invalidateCache=function(){this._forEach(function(t){return t.invalidateCache()})},e}(n(4).Component);e.ComponentContainer=o},function(t,e,n){"use strict";function r(t){l.add(t),c.add(t),i()}function i(){u||(u=!0,p.render())}var o=n(0),a=n(10),s=n(36),c=new o.Set,l=new o.Set,u=!1,h=!1;e.Policy=a.makeEnum(["immediate","animationFrame","timeout"]);var p=new s.AnimationFrame;e.renderPolicy=function(t){if(null==t)return p;switch(t){case e.Policy.immediate:p=new s.Immediate;break;case e.Policy.animationFrame:p=new s.AnimationFrame;break;case e.Policy.timeout:p=new s.Timeout;break;default:o.Window.warn("Unrecognized renderPolicy: "+t)}},e.registerToRender=function(t){h&&o.Window.warn("Registered to render while other components are flushing: request may be ignored"),c.add(t),i()},e.registerToComputeLayoutAndRender=r,e.registerToComputeLayout=function(t){r(t)},e.flush=function(){if(u){l.forEach(function(t){return t.computeLayout()}),c.forEach(function(t){return t.render()}),h=!0;var t=new o.Set;c.forEach(function(e){try{e.renderImmediately()}catch(n){window.setTimeout(function(){throw n},0),t.add(e)}}),l=new o.Set,c=t,u=!1,h=!1}}},function(t,e,n){"use strict";var r=n(1);e.circle=function(){return function(t){return r.symbol().type(r.symbolCircle).size(Math.PI*Math.pow(t/2,2))}},e.square=function(){return function(t){return r.symbol().type(r.symbolSquare).size(Math.pow(t,2))}},e.cross=function(){return function(t){return r.symbol().type(r.symbolCross).size(5/9*Math.pow(t,2))}},e.diamond=function(){return function(t){return r.symbol().type(r.symbolDiamond).size(Math.tan(Math.PI/6)*Math.pow(t,2)/2)}},e.triangle=function(){return function(t){return r.symbol().type(r.symbolTriangle).size(Math.sqrt(3)*Math.pow(t/2,2))}};var i=.8908130915292852;e.star=function(){return function(t){return r.symbol().type(r.symbolStar).size(i*Math.pow(t/2,2))}};var o=3*(1/Math.sqrt(12)/2+1);e.wye=function(){return function(t){return r.symbol().type(r.symbolWye).size(o*Math.pow(t/2.4,2))}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(14),o=n(0),a=n(12),s=n(35),c=function(t){function e(){var e=t.call(this)||this;return e._detectionRadius=3,e._resizable=!1,e._movable=!1,e._hasCorners=!0,e.addClass("drag-box-layer"),e._dragInteraction=new i.Drag,e._setUpCallbacks(),e._dragInteraction.attachTo(e),e._dragStartCallbacks=new o.CallbackSet,e._dragCallbacks=new o.CallbackSet,e._dragEndCallbacks=new o.CallbackSet,e}return r(e,t),e.prototype._setUpCallbacks=function(){var t,e,n,r,i=this,o={newBox:0,resize:1,move:2},a=o.newBox,c=function(c){t=i._getResizingEdges(c);var l=i.bounds(),u=l.topLeft.x<=c.x&&c.x<=l.bottomRight.x&&l.topLeft.y<=c.y&&c.y<=l.bottomRight.y;i.boxVisible()&&(t.top||t.bottom||t.left||t.right)?a=o.resize:i.boxVisible()&&i.movable()&&u?a=o.move:(a=o.newBox,i._setBounds({topLeft:c,bottomRight:c}),i._xBoundsMode===s.PropertyMode.VALUE&&null!=i.xScale()&&i._setXExtent([i.xScale().invert(c.x),i.xScale().invert(c.x)]),i._yBoundsMode===s.PropertyMode.VALUE&&null!=i.yScale()&&i._setYExtent([i.yScale().invert(c.y),i.yScale().invert(c.y)]),i.render()),i.boxVisible(!0),l=i.bounds(),e={x:l.topLeft.x,y:l.topLeft.y},n={x:l.bottomRight.x,y:l.bottomRight.y},r=c,i._dragStartCallbacks.callCallbacks(l)},l=function(c,l){switch(a){case o.newBox:n.x=l.x,n.y=l.y;break;case o.resize:t.bottom?n.y=l.y:t.top&&(e.y=l.y),t.right?n.x=l.x:t.left&&(e.x=l.x);break;case o.move:var u=l.x-r.x,h=l.y-r.y;e.x+=u,e.y+=h,n.x+=u,n.y+=h,r=l}i._setBounds({topLeft:e,bottomRight:n}),i._xBoundsMode===s.PropertyMode.VALUE&&null!=i.xScale()&&i._setXExtent([i.xScale().invert(e.x),i.xScale().invert(n.x)]),i._yBoundsMode===s.PropertyMode.VALUE&&null!=i.yScale()&&i._setYExtent([i.yScale().invert(e.y),i.yScale().invert(n.y)]),i.render(),i._dragCallbacks.callCallbacks(i.bounds())},u=function(t,e){a===o.newBox&&t.x===e.x&&t.y===e.y&&i.boxVisible(!1),i._dragEndCallbacks.callCallbacks(i.bounds())};this._dragInteraction.onDragStart(c),this._dragInteraction.onDrag(l),this._dragInteraction.onDragEnd(u),this._disconnectInteraction=function(){i._dragInteraction.offDragStart(c),i._dragInteraction.offDrag(l),i._dragInteraction.offDragEnd(u),i._dragInteraction.detach()}},e.prototype._setup=function(){var e=this;t.prototype._setup.call(this);var n=function(){return e._box.append("line").styles({opacity:0,stroke:"pink","pointer-events":"visibleStroke"})};if(this._detectionEdgeT=n().classed("drag-edge-tb",!0),this._detectionEdgeB=n().classed("drag-edge-tb",!0),this._detectionEdgeL=n().classed("drag-edge-lr",!0),this._detectionEdgeR=n().classed("drag-edge-lr",!0),this._hasCorners){var r=function(){return e._box.append("circle").styles({opacity:0,fill:"pink","pointer-events":"visibleFill"})};this._detectionCornerTL=r().classed("drag-corner-tl",!0),this._detectionCornerTR=r().classed("drag-corner-tr",!0),this._detectionCornerBL=r().classed("drag-corner-bl",!0),this._detectionCornerBR=r().classed("drag-corner-br",!0)}},e.prototype._getResizingEdges=function(t){var e={top:!1,bottom:!1,left:!1,right:!1};if(!this.resizable())return e;var n=this.bounds(),r=n.topLeft.y,i=n.bottomRight.y,o=n.topLeft.x,a=n.bottomRight.x,s=this._detectionRadius;return o-s<=t.x&&t.x<=a+s&&(e.top=r-s<=t.y&&t.y<=r+s,e.bottom=i-s<=t.y&&t.y<=i+s),r-s<=t.y&&t.y<=i+s&&(e.left=o-s<=t.x&&t.x<=o+s,e.right=a-s<=t.x&&t.x<=a+s),e},e.prototype.renderImmediately=function(){if(t.prototype.renderImmediately.call(this),this.boxVisible()){var e=this.bounds(),n=e.topLeft.y,r=e.bottomRight.y,i=e.topLeft.x,o=e.bottomRight.x;this._detectionEdgeT.attrs({x1:i,y1:n,x2:o,y2:n,"stroke-width":2*this._detectionRadius}),this._detectionEdgeB.attrs({x1:i,y1:r,x2:o,y2:r,"stroke-width":2*this._detectionRadius}),this._detectionEdgeL.attrs({x1:i,y1:n,x2:i,y2:r,"stroke-width":2*this._detectionRadius}),this._detectionEdgeR.attrs({x1:o,y1:n,x2:o,y2:r,"stroke-width":2*this._detectionRadius}),this._hasCorners&&(this._detectionCornerTL.attrs({cx:i,cy:n,r:this._detectionRadius}),this._detectionCornerTR.attrs({cx:o,cy:n,r:this._detectionRadius}),this._detectionCornerBL.attrs({cx:i,cy:r,r:this._detectionRadius}),this._detectionCornerBR.attrs({cx:o,cy:r,r:this._detectionRadius}))}return this},e.prototype.detectionRadius=function(t){if(null==t)return this._detectionRadius;if(t<0)throw new Error("detection radius cannot be negative.");return this._detectionRadius=t,this.render(),this},e.prototype.resizable=function(t){return null==t?this._resizable:(this._resizable=t,this._setResizableClasses(t),this)},e.prototype._setResizableClasses=function(t){t&&this.enabled()?(this.addClass("x-resizable"),this.addClass("y-resizable")):(this.removeClass("x-resizable"),this.removeClass("y-resizable"))},e.prototype.movable=function(t){return null==t?this._movable:(this._movable=t,this._setMovableClass(),this)},e.prototype._setMovableClass=function(){this.movable()&&this.enabled()?this.addClass("movable"):this.removeClass("movable")},e.prototype.onDragStart=function(t){return this._dragStartCallbacks.add(t),this},e.prototype.offDragStart=function(t){return this._dragStartCallbacks.delete(t),this},e.prototype.onDrag=function(t){return this._dragCallbacks.add(t),this},e.prototype.offDrag=function(t){return this._dragCallbacks.delete(t),this},e.prototype.onDragEnd=function(t){return this._dragEndCallbacks.add(t),this},e.prototype.offDragEnd=function(t){return this._dragEndCallbacks.delete(t),this},e.prototype.dragInteraction=function(){return this._dragInteraction},e.prototype.enabled=function(t){return null==t?this._dragInteraction.enabled():(this._dragInteraction.enabled(t),this._setResizableClasses(this.resizable()),this._setMovableClass(),this)},e.prototype.destroy=function(){var e=this;t.prototype.destroy.call(this),this._dragStartCallbacks.forEach(function(t){return e._dragCallbacks.delete(t)}),this._dragCallbacks.forEach(function(t){return e._dragCallbacks.delete(t)}),this._dragEndCallbacks.forEach(function(t){return e._dragEndCallbacks.delete(t)}),this._disconnectInteraction()},e.prototype.detach=function(){return this._resetState(),this._dragInteraction.detach(),t.prototype.detach.call(this),this},e.prototype.anchor=function(e){return e=a.coerceExternalD3(e),this._dragInteraction.attachTo(this),t.prototype.anchor.call(this,e),this},e.prototype._resetState=function(){this.bounds({topLeft:{x:0,y:0},bottomRight:{x:0,y:0}})},e}(n(40).SelectionBoxLayer);e.DragBoxLayer=c},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(19),o=function(t){function e(){return t.call(this,"path","line")||this}return r(e,t),e.prototype._applyDefaultAttributes=function(t){t.style("fill","none")},e.prototype.getVisualPrimitiveAtIndex=function(e){return t.prototype.getVisualPrimitiveAtIndex.call(this,0)},e}(n(9).SVGDrawer);e.LineSVGDrawer=o,e.makeLineCanvasDrawStep=function(t){return function(e,n,r){var o=t(),a=i.resolveAttributesSubsetWithStyles(r,[],n[0],0);e.save(),e.beginPath(),o.context(e),o(n[0]),e.lineJoin="round",i.styleContext(e,a),e.restore()}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(19),o=function(t){function e(e){void 0===e&&(e="");var n=t.call(this,"rect","")||this;return n._rootClassName=e,n._root.classed(n._rootClassName,!0),n}return r(e,t),e}(n(9).SVGDrawer);e.RectangleSVGDrawer=o,e.RectangleCanvasDrawStep=function(t,e,n){t.save(),e.forEach(function(e,r){var o=i.resolveAttributesSubsetWithStyles(n,["x","y","width","height"],e,r);t.beginPath(),t.rect(o.x,o.y,o.width,o.height),i.styleContext(t,o)}),t.restore()}},function(t,e,n){"use strict";var r=n(1),i=window.Math;e.inRange=function(t,e,n){return i.min(e,n)<=t&&t<=i.max(e,n)},e.clamp=function(t,e,n){return i.min(i.max(e,t),n)},e.max=function(t,e,n){var i="function"==typeof e?e:null,o=null==i?e:n,a=null==i?r.max(t):r.max(t,i);return void 0!==a?a:o},e.min=function(t,e,n){var i="function"==typeof e?e:null,o=null==i?e:n,a=null==i?r.min(t):r.min(t,i);return void 0!==a?a:o},e.isNaN=function(t){return t!==t},e.isValidNumber=function(t){return"number"==typeof t&&t-t<1},e.range=function(t,e,n){if(void 0===n&&(n=1),0===n)throw new Error("step cannot be 0");for(var r=i.max(i.ceil((e-t)/n),0),o=[],a=0;a<r;++a)o[a]=t+n*a;return o},e.distanceSquared=function(t,e){return i.pow(e.y-t.y,2)+i.pow(e.x-t.x,2)},e.degreesToRadians=function(t){return t/360*i.PI*2},e.within=function(t,e){return e.topLeft.x<=t.x&&e.bottomRight.x>=t.x&&e.topLeft.y<=t.y&&e.bottomRight.y>=t.y}},function(t,e,n){"use strict";var r=function(){function t(t){null!=t.createRuler?this.ruler=t.createRuler():this.ruler=t}return t.prototype.measure=function(e){return void 0===e&&(e=t.HEIGHT_TEXT),this.ruler(e)},t}();r.HEIGHT_TEXT="bdpql",e.AbstractMeasurer=r},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(30)),r(n(69)),r(n(70)),r(n(38)),r(n(39)),r(n(71)),r(n(72)),r(n(73)),r(n(74)),r(n(40)),r(n(75)),r(n(76)),r(n(77))},function(t,e,n){"use strict";var r=n(0),i=n(28),o=function(){function t(){}return t.prototype.render=function(){i.flush()},t}();e.Immediate=o;var a=function(){function t(){}return t.prototype.render=function(){r.DOM.requestAnimationFramePolyfill(i.flush)},t}();e.AnimationFrame=a;var s=function(){function t(){this._timeoutMsec=r.DOM.SCREEN_REFRESH_RATE_MILLISECONDS}return t.prototype.render=function(){setTimeout(i.flush,this._timeoutMsec)},t}();e.Timeout=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(13),o=n(0),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._keyPressCallbacks={},e._keyReleaseCallbacks={},e._mouseMoveCallback=function(t){return!1},e._downedKeys=new o.Set,e._keyDownCallback=function(t,n){return e._handleKeyDownEvent(t,n)},e._keyUpCallback=function(t){return e._handleKeyUpEvent(t)},e}return r(e,t),e.prototype._anchor=function(e){t.prototype._anchor.call(this,e),this._positionDispatcher=i.Mouse.getDispatcher(this._componentAttachedTo),this._positionDispatcher.onMouseMove(this._mouseMoveCallback),this._keyDispatcher=i.Key.getDispatcher(),this._keyDispatcher.onKeyDown(this._keyDownCallback),this._keyDispatcher.onKeyUp(this._keyUpCallback)},e.prototype._unanchor=function(){t.prototype._unanchor.call(this),this._positionDispatcher.offMouseMove(this._mouseMoveCallback),this._positionDispatcher=null,this._keyDispatcher.offKeyDown(this._keyDownCallback),this._keyDispatcher.offKeyUp(this._keyUpCallback),this._keyDispatcher=null},e.prototype._handleKeyDownEvent=function(t,e){var n=this._translateToComponentSpace(this._positionDispatcher.lastMousePosition());this._isInsideComponent(n)&&!e.repeat&&(this._keyPressCallbacks[t]&&this._keyPressCallbacks[t].callCallbacks(t),this._downedKeys.add(t))},e.prototype._handleKeyUpEvent=function(t){this._downedKeys.has(t)&&this._keyReleaseCallbacks[t]&&this._keyReleaseCallbacks[t].callCallbacks(t),this._downedKeys.delete(t)},e.prototype.onKeyPress=function(t,e){return this._keyPressCallbacks[t]||(this._keyPressCallbacks[t]=new o.CallbackSet),this._keyPressCallbacks[t].add(e),this},e.prototype.offKeyPress=function(t,e){return this._keyPressCallbacks[t].delete(e),0===this._keyPressCallbacks[t].size&&delete this._keyPressCallbacks[t],this},e.prototype.onKeyRelease=function(t,e){return this._keyReleaseCallbacks[t]||(this._keyReleaseCallbacks[t]=new o.CallbackSet),this._keyReleaseCallbacks[t].add(e),this},e.prototype.offKeyRelease=function(t,e){return this._keyReleaseCallbacks[t].delete(e),0===this._keyReleaseCallbacks[t].size&&delete this._keyReleaseCallbacks[t],this},e}(n(15).Interaction);e.Key=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(0),o=function(t){function e(e){void 0===e&&(e=[]);var n=t.call(this)||this;return n._components=[],n.addClass("component-group"),e.forEach(function(t){return n.append(t)}),n}return r(e,t),e.prototype._forEach=function(t){this.components().forEach(t)},e.prototype.has=function(t){return this._components.indexOf(t)>=0},e.prototype.requestedSpace=function(t,e){var n=this._components.map(function(n){return n.requestedSpace(t,e)});return{minWidth:i.Math.max(n,function(t){return t.minWidth},0),minHeight:i.Math.max(n,function(t){return t.minHeight},0)}},e.prototype.computeLayout=function(e,n,r){var i=this;return t.prototype.computeLayout.call(this,e,n,r),this._forEach(function(t){t.computeLayout({x:0,y:0},i.width(),i.height())}),this},e.prototype._sizeFromOffer=function(t,e){return{width:t,height:e}},e.prototype.fixedWidth=function(){return this._components.every(function(t){return t.fixedWidth()})},e.prototype.fixedHeight=function(){return this._components.every(function(t){return t.fixedHeight()})},e.prototype.components=function(){return this._components.slice()},e.prototype.append=function(t){return null==t||this.has(t)||(t.detach(),this._components.push(t),this._adoptAndAnchor(t),this.redraw()),this},e.prototype._remove=function(t){var e=this._components.indexOf(t);return e>=0&&(this._components.splice(e,1),!0)},e}(n(27).ComponentContainer);e.Group=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(0),a=n(4);!function(t){t[t.VALUE=0]="VALUE",t[t.PIXEL=1]="PIXEL"}(r||(r={}));var s=function(t){function e(n){var i=t.call(this)||this;if(i._mode=r.VALUE,n!==e.ORIENTATION_VERTICAL&&n!==e.ORIENTATION_HORIZONTAL)throw new Error(n+" is not a valid orientation for GuideLineLayer");return i._orientation=n,i._overflowHidden=!0,i.addClass("guide-line-layer"),i._isVertical()?i.addClass("vertical"):i.addClass("horizontal"),i._scaleUpdateCallback=function(){i._syncPixelPositionAndValue(),i.render()},i}return i(e,t),e.prototype._setup=function(){t.prototype._setup.call(this),this._guideLine=this.content().append("line").classed("guide-line",!0)},e.prototype._sizeFromOffer=function(t,e){return{width:t,height:e}},e.prototype._isVertical=function(){return this._orientation===e.ORIENTATION_VERTICAL},e.prototype.fixedWidth=function(){return!0},e.prototype.fixedHeight=function(){return!0},e.prototype.computeLayout=function(e,n,r){return t.prototype.computeLayout.call(this,e,n,r),null!=this.scale()&&(this._isVertical()?this.scale().range([0,this.width()]):this.scale().range([this.height(),0])),this},e.prototype.renderImmediately=function(){return t.prototype.renderImmediately.call(this),this._syncPixelPositionAndValue(),this._guideLine.attrs({x1:this._isVertical()?this.pixelPosition():0,y1:this._isVertical()?0:this.pixelPosition(),x2:this._isVertical()?this.pixelPosition():this.width(),y2:this._isVertical()?this.height():this.pixelPosition()}),this},e.prototype._syncPixelPositionAndValue=function(){null!=this.scale()&&(this._mode===r.VALUE&&null!=this.value()?this._pixelPosition=this.scale().scale(this.value()):this._mode===r.PIXEL&&null!=this.pixelPosition()&&(this._value=this.scale().invert(this.pixelPosition())))},e.prototype._setPixelPositionWithoutChangingMode=function(t){this._pixelPosition=t,null!=this.scale()&&(this._value=this.scale().invert(this.pixelPosition())),this.render()},e.prototype.scale=function(t){if(null==t)return this._scale;var e=this._scale;return null!=e&&e.offUpdate(this._scaleUpdateCallback),this._scale=t,this._scale.onUpdate(this._scaleUpdateCallback),this._syncPixelPositionAndValue(),this.redraw(),this},e.prototype.value=function(t){return null==t?this._value:(this._value=t,this._mode=r.VALUE,this._syncPixelPositionAndValue(),this.render(),this)},e.prototype.pixelPosition=function(t){if(null==t)return this._pixelPosition;if(!o.Math.isValidNumber(t))throw new Error("pixelPosition must be a finite number");return this._pixelPosition=t,this._mode=r.PIXEL,this._syncPixelPositionAndValue(),this.render(),this},e.prototype.destroy=function(){t.prototype.destroy.call(this),null!=this.scale()&&this.scale().offUpdate(this._scaleUpdateCallback)},e}(a.Component);s.ORIENTATION_VERTICAL="vertical",s.ORIENTATION_HORIZONTAL="horizontal",e.GuideLineLayer=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(0),a=n(4);!function(t){t[t.VALUE=0]="VALUE",t[t.PIXEL=1]="PIXEL"}(r=e.PropertyMode||(e.PropertyMode={}));var s=function(t){function e(){var e=t.call(this)||this;return e._boxVisible=!1,e._boxBounds={topLeft:{x:0,y:0},bottomRight:{x:0,y:0}},e._xBoundsMode=r.PIXEL,e._yBoundsMode=r.PIXEL,e.addClass("selection-box-layer"),e._adjustBoundsCallback=function(){e.render()},e._overflowHidden=!0,e._xExtent=[void 0,void 0],e._yExtent=[void 0,void 0],e}return i(e,t),e.prototype._setup=function(){t.prototype._setup.call(this),this._box=this.content().append("g").classed("selection-box",!0).remove(),this._boxArea=this._box.append("rect").classed("selection-area",!0)},e.prototype._sizeFromOffer=function(t,e){return{width:t,height:e}},e.prototype.bounds=function(t){return null==t?this._getBounds():(this._setBounds(t),this._xBoundsMode=r.PIXEL,this._yBoundsMode=r.PIXEL,this.render(),this)},e.prototype._setBounds=function(t){var e={x:Math.min(t.topLeft.x,t.bottomRight.x),y:Math.min(t.topLeft.y,t.bottomRight.y)},n={x:Math.max(t.topLeft.x,t.bottomRight.x),y:Math.max(t.topLeft.y,t.bottomRight.y)};this._boxBounds={topLeft:e,bottomRight:n}},e.prototype._getBounds=function(){return{topLeft:{x:this._xBoundsMode===r.PIXEL?this._boxBounds.topLeft.x:null==this._xScale?0:Math.min(this.xScale().scale(this.xExtent()[0]),this.xScale().scale(this.xExtent()[1])),y:this._yBoundsMode===r.PIXEL?this._boxBounds.topLeft.y:null==this._yScale?0:Math.min(this.yScale().scale(this.yExtent()[0]),this.yScale().scale(this.yExtent()[1]))},bottomRight:{x:this._xBoundsMode===r.PIXEL?this._boxBounds.bottomRight.x:null==this._xScale?0:Math.max(this.xScale().scale(this.xExtent()[0]),this.xScale().scale(this.xExtent()[1])),y:this._yBoundsMode===r.PIXEL?this._boxBounds.bottomRight.y:null==this._yScale?0:Math.max(this.yScale().scale(this.yExtent()[0]),this.yScale().scale(this.yExtent()[1]))}}},e.prototype.renderImmediately=function(){if(t.prototype.renderImmediately.call(this),this._boxVisible){var e=this.bounds(),n=e.topLeft.y,r=e.bottomRight.y,i=e.topLeft.x,a=e.bottomRight.x;if(!(o.Math.isValidNumber(n)&&o.Math.isValidNumber(r)&&o.Math.isValidNumber(i)&&o.Math.isValidNumber(a)))throw new Error("bounds have not been properly set");this._boxArea.attrs({x:i,y:n,width:a-i,height:r-n}),this.content().node().appendChild(this._box.node())}else this._box.remove();return this},e.prototype.boxVisible=function(t){return null==t?this._boxVisible:(this._boxVisible=t,this.render(),this)},e.prototype.fixedWidth=function(){return!0},e.prototype.fixedHeight=function(){return!0},e.prototype.xScale=function(t){return null==t?this._xScale:(null!=this._xScale&&this._xScale.offUpdate(this._adjustBoundsCallback),this._xScale=t,this._xBoundsMode=r.VALUE,this._xScale.onUpdate(this._adjustBoundsCallback),this.render(),this)},e.prototype.yScale=function(t){return null==t?this._yScale:(null!=this._yScale&&this._yScale.offUpdate(this._adjustBoundsCallback),this._yScale=t,this._yBoundsMode=r.VALUE,this._yScale.onUpdate(this._adjustBoundsCallback),this.render(),this)},e.prototype.xExtent=function(t){return null==t?this._getXExtent():(this._setXExtent(t),this._xBoundsMode=r.VALUE,this.render(),this)},e.prototype._getXExtent=function(){return this._xBoundsMode===r.VALUE?this._xExtent:null==this._xScale?[void 0,void 0]:[this._xScale.invert(this._boxBounds.topLeft.x),this._xScale.invert(this._boxBounds.bottomRight.x)]},e.prototype._setXExtent=function(t){this._xExtent=t},e.prototype.yExtent=function(t){return null==t?this._getYExtent():(this._setYExtent(t),this._yBoundsMode=r.VALUE,this.render(),this)},e.prototype._getYExtent=function(){return this._yBoundsMode===r.VALUE?this._yExtent:null==this._yScale?[void 0,void 0]:[this._yScale.invert(this._boxBounds.topLeft.y),this._yScale.invert(this._boxBounds.bottomRight.y)]},e.prototype._setYExtent=function(t){this._yExtent=t},e.prototype.destroy=function(){t.prototype.destroy.call(this),null!=this._xScale&&this.xScale().offUpdate(this._adjustBoundsCallback),null!=this._yScale&&this.yScale().offUpdate(this._adjustBoundsCallback)},e}(a.Component);e.SelectionBoxLayer=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){return t.call(this,"path","arc fill")||this}return r(e,t),e.prototype._applyDefaultAttributes=function(t){t.style("stroke","none")},e}(n(9).SVGDrawer);e.ArcSVGDrawer=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){return t.call(this,"path","arc outline")||this}return r(e,t),e.prototype._applyDefaultAttributes=function(t){t.style("fill","none")},e}(n(9).SVGDrawer);e.ArcOutlineSVGDrawer=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){return t.call(this,"path","area")||this}return r(e,t),e.prototype._applyDefaultAttributes=function(t){t.style("stroke","none")},e.prototype.getVisualPrimitiveAtIndex=function(e){return t.prototype.getVisualPrimitiveAtIndex.call(this,0)},e}(n(9).SVGDrawer);e.AreaSVGDrawer=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){return t.call(this,"line","")||this}return r(e,t),e}(n(9).SVGDrawer);e.SegmentSVGDrawer=i},function(t,e,n){"use strict";function r(t,e,n,r,i){return n+i>=0&&n-i<=t&&r+i>=0&&r-i<=e}function i(t,e,n){if(null==t)return!1;for(var r=0;r<n.length;r++){var i=n[r];if(t[i]!=e[i])return!1}return!0}var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},a=n(81),s=n(19),c=function(t){function e(){return t.call(this,"path","symbol")||this}return o(e,t),e}(n(9).SVGDrawer);e.SymbolSVGDrawer=c,e.makeSymbolCanvasDrawStep=function(t,e,n,o){var c=this;return function(l,u,h){for(var p=l.canvas,d=p.clientWidth,_=p.clientHeight,f=void 0===o?new a.CanvasBuffer(0,0):o,y=e(),m=n(),g=null,v=null,x=null,b=0;b<u.length;b++){var E=u[b],w=s.resolveAttributesSubsetWithStyles(h,["x","y"],E,b),A=m(E,b,t);if(r(d,_,w.x,w.y,A)){var C=i(g,w,Object.keys(s.ContextStyleAttrs)),S=y(E,b,c._dataset);if(C&&x==A&&v==S);else{(A>f.screenWidth||A>f.screenHeight)&&f.resize(A,A,!0),f.clear();var T=f.ctx;T.beginPath(),S(A).context(T)(null),T.closePath(),s.styleContext(T,w),v=S,x=A,g=w}f.blitCenter(l,w.x,w.y)}}}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(3),a=n(0),s=n(43),c=n(6),l=n(31),u=n(25),h=n(17),p=n(49),d=n(2),_=function(t){function e(){var e=t.call(this)||this;return e.addClass("area-plot"),e.y0(0),e.attr("fill-opacity",.25),e.attr("fill",(new o.Color).range()[0]),e._lineDrawers=new a.Map,e}return r(e,t),e.prototype._setup=function(){var e=this;t.prototype._setup.call(this),this._lineDrawers.forEach(function(t){return t.attachTo(e._renderArea)})},e.prototype.y=function(n,r){if(null==n)return t.prototype.y.call(this);if(null==r?t.prototype.y.call(this,n):t.prototype.y.call(this,n,r),null!=r){var i=this.y0().accessor;null!=i&&this._bindProperty(e._Y0_KEY,i,r),this._updateYScale()}return this},e.prototype.y0=function(t){if(null==t)return this._propertyBindings.get(e._Y0_KEY);var n=this.y(),r=n&&n.scale;return this._bindProperty(e._Y0_KEY,t,r),this._updateYScale(),this.render(),this},e.prototype._onDatasetUpdate=function(){t.prototype._onDatasetUpdate.call(this),this._updateYScale()},e.prototype.addDataset=function(e){return t.prototype.addDataset.call(this,e),this},e.prototype._addDataset=function(e){var n=new l.LineSVGDrawer;return this._isSetup&&n.attachTo(this._renderArea),this._lineDrawers.set(e,n),t.prototype._addDataset.call(this,e),this},e.prototype._removeDatasetNodes=function(e){t.prototype._removeDatasetNodes.call(this,e),this._lineDrawers.get(e).remove()},e.prototype._additionalPaint=function(){var t=this,e=this._generateLineDrawSteps(),n=this._getDataToDraw();this.datasets().forEach(function(r){var i=d.Plot.applyDrawSteps(e,r);t._lineDrawers.get(r).draw(n.get(r),i)})},e.prototype._generateLineDrawSteps=function(){var t=[];if(this._animateOnNextRender()){var e=this._generateLineAttrToProjector();e.d=this._constructLineProjector(d.Plot._scaledAccessor(this.x()),this._getResetYFunction()),t.push({attrToProjector:e,animator:this._getAnimator(h.Animator.RESET)})}return t.push({attrToProjector:this._generateLineAttrToProjector(),animator:this._getAnimator(h.Animator.MAIN)}),t},e.prototype._generateLineAttrToProjector=function(){var t=this._generateAttrToProjector();return t.d=this._constructLineProjector(d.Plot._scaledAccessor(this.x()),d.Plot._scaledAccessor(this.y())),t},e.prototype._createDrawer=function(){return new c.ProxyDrawer(function(){return new s.AreaSVGDrawer},function(){u.warn("canvas renderer not implemented on Area Plot!")})},e.prototype._generateDrawSteps=function(){var t=[];if(this._animateOnNextRender()){var e=this._generateAttrToProjector();e.d=this._constructAreaProjector(d.Plot._scaledAccessor(this.x()),this._getResetYFunction(),d.Plot._scaledAccessor(this.y0())),t.push({attrToProjector:e,animator:this._getAnimator(h.Animator.RESET)})}return t.push({attrToProjector:this._generateAttrToProjector(),animator:this._getAnimator(h.Animator.MAIN)}),t},e.prototype._updateYScale=function(){var t=this._propertyExtents.get("y0"),e=a.Array.flatten(t),n=a.Array.uniq(e),r=1===n.length?n[0]:null,i=this.y(),o=i&&i.scale;null!=o&&(null!=this._constantBaselineValueProvider&&(o.removePaddingExceptionsProvider(this._constantBaselineValueProvider),this._constantBaselineValueProvider=null),null!=r&&(this._constantBaselineValueProvider=function(){return[r]},o.addPaddingExceptionsProvider(this._constantBaselineValueProvider)))},e.prototype._getResetYFunction=function(){return d.Plot._scaledAccessor(this.y0())},e.prototype._propertyProjectors=function(){var e=t.prototype._propertyProjectors.call(this);return e.d=this._constructAreaProjector(d.Plot._scaledAccessor(this.x()),d.Plot._scaledAccessor(this.y()),d.Plot._scaledAccessor(this.y0())),e},e.prototype.selections=function(e){var n=this;void 0===e&&(e=this.datasets());var r=t.prototype.selections.call(this,e).nodes();return e.map(function(t){return n._lineDrawers.get(t)}).filter(function(t){return null!=t}).forEach(function(t){return r.push.apply(r,t.getVisualPrimitives())}),i.selectAll(r)},e.prototype._constructAreaProjector=function(t,e,n){var r=this,o=function(t,e,n){var i=d.Plot._scaledAccessor(r.x())(t,e,n),o=d.Plot._scaledAccessor(r.y())(t,e,n);return a.Math.isValidNumber(i)&&a.Math.isValidNumber(o)};return function(a,s,c){var l=r._getCurveFactory();return i.area().x(function(e,n){return t(e,n,c)}).y1(function(t,n){return e(t,n,c)}).y0(function(t,e){return n(t,e,c)}).curve(l).defined(function(t,e){return o(t,e,c)})(a)}},e}(p.Line);_._Y0_KEY="y0",e.Area=_},function(t,e,n){"use strict";!function(t){t.MAIN="main",t.RESET="reset"}(e.Animator||(e.Animator={}))},function(t,e,n){"use strict";var r=function(){function t(){var t=this;this.scale=0,this.translate=0,this.cachedDomain=[null,null],this.lastSeenDomain=[null,null],this.updateDomain=function(e){t.lastSeenDomain=e.domain();var n=e.scale(t.cachedDomain[1])-e.scale(t.cachedDomain[0]),r=e.scale(t.lastSeenDomain[1])-e.scale(t.lastSeenDomain[0]);t.scale=n/r||1,t.translate=e.scale(t.cachedDomain[0])-e.scale(t.lastSeenDomain[0])*t.scale||0}}return t.prototype.reset=function(){this.scale=1,this.translate=0,this.cachedDomain=this.lastSeenDomain},t.prototype.setDomain=function(t){this.cachedDomain=t},t}(),i=function(){function t(e,n){var i=this;this.renderCallback=e,this.applyTransformCallback=n,this.domainTransformX=new r,this.domainTransformY=new r,this.renderDeferred=function(){i.applyTransform(),clearTimeout(i.timeoutToken),i.timeoutToken=setTimeout(function(){i.resetTransforms(),i.applyTransform(),i.renderCallback()},t.DEFERRED_RENDERING_DELAY)}}return t.prototype.setDomains=function(t,e){t&&this.domainTransformX.setDomain(t.domain()),e&&this.domainTransformY.setDomain(e.domain()),this.renderDeferred()},t.prototype.updateDomains=function(t,e){t&&this.domainTransformX.updateDomain(t),e&&this.domainTransformY.updateDomain(e),this.renderDeferred()},t.prototype.resetTransforms=function(){this.domainTransformX.reset(),this.domainTransformY.reset()},t.prototype.applyTransform=function(){this.applyTransformCallback(this.domainTransformX.translate,this.domainTransformY.translate,this.domainTransformX.scale,this.domainTransformY.scale)},t}();i.DEFERRED_RENDERING_DELAY=200,e.DeferredRenderer=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(7),a=n(6),s=n(31),c=n(3),l=n(11),u=n(0),h=n(10),p=n(17),d=n(2),_=n(16),f={linear:i.curveLinear,linearClosed:i.curveLinearClosed,step:i.curveStep,stepBefore:i.curveStepBefore,stepAfter:i.curveStepAfter,basis:i.curveBasis,basisOpen:i.curveBasisOpen,basisClosed:i.curveBasisClosed,bundle:i.curveBundle,cardinal:i.curveCardinal,cardinalOpen:i.curveCardinalOpen,cardinalClosed:i.curveCardinalClosed,monotone:i.curveMonotoneX};e.CurveName=h.makeEnum(["linear","linearClosed","step","stepBefore","stepAfter","basis","basisOpen","basisClosed","bundle","cardinal","cardinalOpen","cardinalClosed","monotone"]);var y=function(t){function e(){var e=t.call(this)||this;e._curve="linear",e._autorangeSmooth=!1,e._croppedRenderingEnabled=!0,e._collapseDenseVerticalLinesEnabled=!1,e._downsamplingEnabled=!1,e.addClass("line-plot");var n=new o.Easing;return n.stepDuration(d.Plot._ANIMATION_MAX_DURATION),n.easingMode("expInOut"),n.maxTotalDuration(d.Plot._ANIMATION_MAX_DURATION),e.animator(p.Animator.MAIN,n),e.attr("stroke",(new c.Color).range()[0]),e.attr("stroke-width","2px"),e}return r(e,t),e.prototype.x=function(e,n,r){return null==e?t.prototype.x.call(this):(t.prototype.x.call(this,e,n,r),this._setScaleSnapping(),this)},e.prototype.y=function(e,n,r){return null==e?t.prototype.y.call(this):(t.prototype.y.call(this,e,n,r),this._setScaleSnapping(),this)},e.prototype.autorangeMode=function(e){return null==e?t.prototype.autorangeMode.call(this):(t.prototype.autorangeMode.call(this,e),this._setScaleSnapping(),this)},e.prototype.autorangeSmooth=function(t){return null==t?this._autorangeSmooth:(this._autorangeSmooth=t,this._setScaleSnapping(),this)},e.prototype._setScaleSnapping=function(){"x"===this.autorangeMode()&&this.x()&&this.x().scale&&this.x().scale instanceof l.QuantitativeScale&&this.x().scale.snappingDomainEnabled(!this.autorangeSmooth()),"y"===this.autorangeMode()&&this.y()&&this.y().scale&&this.y().scale instanceof l.QuantitativeScale&&this.y().scale.snappingDomainEnabled(!this.autorangeSmooth())},e.prototype.curve=function(t){return null==t?this._curve:(this._curve=t,this.render(),this)},e.prototype.downsamplingEnabled=function(t){return null==t?this._downsamplingEnabled:(this._downsamplingEnabled=t,this)},e.prototype.croppedRenderingEnabled=function(t){return null==t?this._croppedRenderingEnabled:(this._croppedRenderingEnabled=t,this.render(),this)},e.prototype.collapseDenseLinesEnabled=function(t){return null==t?this._collapseDenseVerticalLinesEnabled:(this._collapseDenseVerticalLinesEnabled=t,this.render(),this)},e.prototype._createDrawer=function(t){var e=this,n=s.makeLineCanvasDrawStep(function(){return e._d3LineFactory(t)});return new a.ProxyDrawer(function(){return new s.LineSVGDrawer},n)},e.prototype._extentsForProperty=function(e){var n=t.prototype._extentsForProperty.call(this,e);if(!this._autorangeSmooth)return n;if(this.autorangeMode()!==e)return n;if("x"!==this.autorangeMode()&&"y"!==this.autorangeMode())return n;var r,o=this._getEdgeIntersectionPoints();return r="y"===this.autorangeMode()?o.left.concat(o.right).map(function(t){return t.y}):o.top.concat(o.bottom).map(function(t){return t.x}),n.map(function(t){return i.extent(i.merge([t,r]))})},e.prototype._getEdgeIntersectionPoints=function(){var t=this;if(!(this.y().scale instanceof l.QuantitativeScale&&this.x().scale instanceof l.QuantitativeScale))return{left:[],right:[],top:[],bottom:[]};var e=this.y().scale,n=this.x().scale,r={left:[],right:[],top:[],bottom:[]},i=n.scale(n.domain()[0]),o=n.scale(n.domain()[1]),a=e.scale(e.domain()[0]),s=e.scale(e.domain()[1]);return this.datasets().forEach(function(c){for(var l,u,h,p,d,_,f=c.data(),y=1;y<f.length;y++)h=d||n.scale(t.x().accessor(f[y-1],y-1,c)),p=_||e.scale(t.y().accessor(f[y-1],y-1,c)),d=n.scale(t.x().accessor(f[y],y,c)),_=e.scale(t.y().accessor(f[y],y,c)),h<i==i<=d&&(u=(l=i-h)*(_-p)/(d-h),r.left.push({x:i,y:e.invert(p+u)})),h<o==o<=d&&(u=(l=o-h)*(_-p)/(d-h),r.right.push({x:o,y:e.invert(p+u)})),p<s==s<=_&&(l=(u=s-p)*(d-h)/(_-p),r.top.push({x:n.invert(h+l),y:s})),p<a==a<=_&&(l=(u=a-p)*(d-h)/(_-p),r.bottom.push({x:n.invert(h+l),y:a}))}),r},e.prototype._getResetYFunction=function(){var t=this.y().scale.domain(),e=Math.max(t[0],t[1]),n=Math.min(t[0],t[1]),r=e<0&&e||n>0&&n||0,i=this.y().scale.scale(r);return function(t,e,n){return i}},e.prototype._generateDrawSteps=function(){var t=[];if(this._animateOnNextRender()){var e=this._generateAttrToProjector();e.d=this._constructLineProjector(d.Plot._scaledAccessor(this.x()),this._getResetYFunction()),t.push({attrToProjector:e,animator:this._getAnimator(p.Animator.RESET)})}return t.push({attrToProjector:this._generateAttrToProjector(),animator:this._getAnimator(p.Animator.MAIN)}),t},e.prototype._generateAttrToProjector=function(){var e=t.prototype._generateAttrToProjector.call(this);return Object.keys(e).forEach(function(t){if("d"!==t){var n=e[t];e[t]=function(t,e,r){return t.length>0?n(t[0],e,r):null}}}),e},e.prototype.entitiesAt=function(t){var e=this.entityNearestByXThenY(t);return null!=e?[e]:[]},e.prototype.entitiesIn=function(t,e){var n,r;if(null==e){var i=t;n={min:i.topLeft.x,max:i.bottomRight.x},r={min:i.topLeft.y,max:i.bottomRight.y}}else n=t,r=e;var o=d.Plot._scaledAccessor(this.x()),a=d.Plot._scaledAccessor(this.y());return this.entities().filter(function(t){var e=t.datum,i=t.index,s=t.dataset,c=o(e,i,s),l=a(e,i,s);return n.min<=c&&c<=n.max&&r.min<=l&&l<=r.max})},e.prototype.entityNearestByXThenY=function(t){var e,n=1/0,r=1/0,i=this.bounds();return this.entities().forEach(function(o){if(u.Math.within(o.position,i)){var a=Math.abs(t.x-o.position.x),s=Math.abs(t.y-o.position.y);(a<n||a===n&&s<r)&&(e=o,n=a,r=s)}}),e},e.prototype._propertyProjectors=function(){var e=t.prototype._propertyProjectors.call(this);return e.d=this._constructLineProjector(d.Plot._scaledAccessor(this.x()),d.Plot._scaledAccessor(this.y())),e},e.prototype._constructLineProjector=function(t,e){var n=this;return function(r,i,o){return n._d3LineFactory(o,t,e)(r)}},e.prototype._d3LineFactory=function(t,e,n){void 0===e&&(e=d.Plot._scaledAccessor(this.x())),void 0===n&&(n=d.Plot._scaledAccessor(this.y()));var r=function(t,r,i){var o=e(t,r,i),a=n(t,r,i);return u.Math.isValidNumber(o)&&u.Math.isValidNumber(a)};return i.line().x(function(n,r){return e(n,r,t)}).y(function(e,r){return n(e,r,t)}).curve(this._getCurveFactory()).defined(function(e,n){return r(e,n,t)})},e.prototype._getCurveFactory=function(){var t=this.curve();if("string"==typeof t){var e=f[t];return null==e?f.linear:e}return t},e.prototype._getDataToDraw=function(){var t=this,e=new u.Map;return this.datasets().forEach(function(n){var r=n.data();if(t._croppedRenderingEnabled||t._downsamplingEnabled){var i=r.map(function(t,e){return e});t._croppedRenderingEnabled&&(i=t._filterCroppedRendering(n,i)),t._downsamplingEnabled&&(i=t._filterDownsampling(n,i)),t._collapseDenseVerticalLinesEnabled&&(i=t._filterDenseLines(n,i)),e.set(n,[i.map(function(t,e){return r[t]})])}else e.set(n,[r])}),e},e.prototype._filterCroppedRendering=function(t,e){for(var n=this,r=d.Plot._scaledAccessor(this.x()),i=d.Plot._scaledAccessor(this.y()),o=t.data(),a=[],s=function(t,e){return u.Math.inRange(t,0,n.width())&&u.Math.inRange(e,0,n.height())},c=0;c<e.length;c++){var l=s(r(o[e[c]],e[c],t),i(o[e[c]],e[c],t));if(!l&&null!=e[c-1]&&null!=o[e[c-1]]){var h=r(o[e[c-1]],e[c-1],t),p=i(o[e[c-1]],e[c-1],t);l=l||s(h,p)}if(!l&&null!=e[c+1]&&null!=o[e[c+1]]){var _=r(o[e[c+1]],e[c+1],t),f=i(o[e[c+1]],e[c+1],t);l=l||s(_,f)}l&&a.push(e[c])}return a},e.prototype._filterDownsampling=function(t,e){if(0===e.length)return[];for(var n=t.data(),r=d.Plot._scaledAccessor(this.x()),i=d.Plot._scaledAccessor(this.y()),o=[e[0]],a=0;a<e.length-1;){for(var s=e[a],c=r(n[e[a]],e[a],t),l=i(n[e[a]],e[a],t),u=r(n[e[a+1]],e[a+1],t),h=i(n[e[a+1]],e[a+1],t),p=Math.floor(c)===Math.floor(u)?1/0:(h-l)/(u-c),_=e[a],f=p===1/0?l:c,y=_,m=f,g=!0;a<e.length-1&&(g||function(o,a){var s=r(n[e[o]],e[o],t),c=i(n[e[o]],e[o],t),l=r(n[e[o+1]],e[o+1],t),u=i(n[e[o+1]],e[o+1],t);if(a===1/0)return Math.floor(s)===Math.floor(l);var h=c+(l-s)*a;return Math.floor(u)===Math.floor(h)}(a,p));){a++,g=!1;var v=p===1/0?i(n[e[a]],e[a],t):r(n[e[a]],e[a],t);v>m&&(m=v,y=e[a]),v<f&&(f=v,_=e[a])}var x=e[a];_!==s&&o.push(_),y!==_&&y!==s&&o.push(y),x!==s&&x!==_&&x!==y&&o.push(x)}return o},e.prototype._filterDenseLines=function(t,e){if(0===e.length)return[];var n=t.data(),r=d.Plot._scaledAccessor(this.x()),i=d.Plot._scaledAccessor(this.y());return this._bucketByX(t,e,function(e){return r(n[e],e,t)},function(e){return i(n[e],e,t)})},e.prototype._bucketByX=function(t,e,n,r){for(var i=[],o=t.data(),a=null,s=0;s<=e.length;++s){var c=e[s];if(null!=o[c]){var l=Math.floor(n(c)),h=r(c);null==a?a=new u.Bucket(c,l,h):a.isInBucket(l)?a.addToBucket(h,c):(i.push.apply(i,a.getUniqueIndices()),a=new u.Bucket(c,l,h))}}return null!=a&&i.push.apply(i,a.getUniqueIndices()),i},e}(_.XYPlot);e.Line=y},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(14),a=n(0),s=[0,1],c=function(t){function e(){var n=t.call(this)||this;n._range=[0,1],n._d3Scale=i.scaleBand(),n._d3Scale.range(s),n._d3TransformationScale=i.scaleLinear(),n._d3TransformationScale.domain(s);return n._innerPadding=e._convertToPlottableInnerPadding(.3),n._outerPadding=e._convertToPlottableOuterPadding(.5,.3),n}return r(e,t),e.prototype.cloneWithoutProviders=function(){var t=(new e).domain(this.domain()).range(this.range()).innerPadding(this.innerPadding()).outerPadding(this.outerPadding());return t._d3TransformationScale.domain(this._d3TransformationScale.domain()),t},e.prototype.extentOfValues=function(t){return a.Array.uniq(t)},e.prototype._getExtent=function(){return a.Array.uniq(this._getAllIncludedValues())},e.prototype.domain=function(e){return t.prototype.domain.call(this,e)},e.prototype.invertRange=function(t){var e=this;void 0===t&&(t=this.range());var n=this._d3Scale.bandwidth(),r=this.invertedTransformation(t[0]),o=this.invertedTransformation(t[1]),a=this._d3Scale.domain(),s=a.map(function(t){return e._d3Scale(t)+n/2}),c=i.bisect(s,r),l=i.bisect(s,o);return a.slice(c,l)},e.prototype.range=function(e){return t.prototype.range.call(this,e)},e._convertToPlottableInnerPadding=function(t){return 1/(1-t)-1},e._convertToPlottableOuterPadding=function(t,e){return t/(1-e)},e.prototype._setBands=function(){var t=1-1/(1+this.innerPadding()),e=this.outerPadding()/(1+this.innerPadding());this._d3Scale.paddingInner(t),this._d3Scale.paddingOuter(e)},e.prototype.rangeBand=function(){return this._rescaleBand(this._d3Scale.bandwidth())},e.prototype.stepWidth=function(){return this._rescaleBand(this._d3Scale.bandwidth()*(1+this.innerPadding()))},e.prototype.innerPadding=function(t){return null==t?this._innerPadding:(this._innerPadding=t,this.range(this.range()),this._dispatchUpdate(),this)},e.prototype.outerPadding=function(t){return null==t?this._outerPadding:(this._outerPadding=t,this.range(this.range()),this._dispatchUpdate(),this)},e.prototype.scale=function(t){var e=this._d3Scale(t)+this._d3Scale.bandwidth()/2;return this._d3TransformationScale(e)},e.prototype.zoom=function(t,e){var n=this;this._d3TransformationScale.domain(this._d3TransformationScale.range().map(function(r){return n._d3TransformationScale.invert(o.zoomAt(r,t,e))})),this._dispatchUpdate()},e.prototype.pan=function(t){var e=this;this._d3TransformationScale.domain(this._d3TransformationScale.range().map(function(n){return e._d3TransformationScale.invert(n+t)})),this._dispatchUpdate()},e.prototype.scaleTransformation=function(t){return this._d3TransformationScale(t)},e.prototype.invertedTransformation=function(t){return this._d3TransformationScale.invert(t)},e.prototype.getTransformationDomain=function(){return this._d3TransformationScale.domain()},e.prototype._getDomain=function(){return this._backingScaleDomain()},e.prototype._backingScaleDomain=function(t){return null==t?this._d3Scale.domain():(this._d3Scale.domain(t),this._setBands(),this)},e.prototype._getRange=function(){return this._range},e.prototype._setRange=function(t){this._range=t,this._d3TransformationScale.range(t),this._setBands()},e.prototype._rescaleBand=function(t){return Math.abs(this._d3TransformationScale(t)-this._d3TransformationScale(0))},e}(n(18).Scale);e.Category=c},function(t,e,n){"use strict";var r=function(){function t(){"function"==typeof window.Set?this._es6Set=new window.Set:this._values=[],this.size=0}return t.prototype.add=function(t){return null!=this._es6Set?(this._es6Set.add(t),this.size=this._es6Set.size,this):(this.has(t)||(this._values.push(t),this.size=this._values.length),this)},t.prototype.delete=function(t){if(null!=this._es6Set){var e=this._es6Set.delete(t);return this.size=this._es6Set.size,e}var n=this._values.indexOf(t);return-1!==n&&(this._values.splice(n,1),this.size=this._values.length,!0)},t.prototype.has=function(t){return null!=this._es6Set?this._es6Set.has(t):-1!==this._values.indexOf(t)},t.prototype.forEach=function(t,e){var n=this;if(null==this._es6Set)this._values.forEach(function(r){t.call(e,r,r,n)});else{this._es6Set.forEach(function(r,i){return t.call(e,r,i,n)},e)}},t}();e.Set=r},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(121)),r(n(120))},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(20),o=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.cache=new i.Cache(function(t){return r._measureCharacterNotFromCache(t)}),r}return r(e,t),e.prototype._measureCharacterNotFromCache=function(e){return t.prototype._measureCharacter.call(this,e)},e.prototype._measureCharacter=function(t){return this.cache.get(t)},e.prototype.reset=function(){this.cache.clear()},e}(n(54).CharacterMeasurer);e.CacheCharacterMeasurer=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype._measureCharacter=function(e){return t.prototype._measureLine.call(this,e)},e.prototype._measureLine=function(t){var e=this,n=t.split("").map(function(t){return e._measureCharacter(t)});return{height:n.reduce(function(t,e){return Math.max(t,e.height)},0),width:n.reduce(function(t,e){return t+e.width},0)}},e}(n(56).Measurer);e.CharacterMeasurer=i},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(34)),r(n(53)),r(n(122)),r(n(54)),r(n(56))},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(34),o=function(t){function e(e,n){void 0===n&&(n=!1);var r=t.call(this,e)||this;return r.useGuards=n,r}return r(e,t),e.prototype._addGuards=function(t){return i.AbstractMeasurer.HEIGHT_TEXT+t+i.AbstractMeasurer.HEIGHT_TEXT},e.prototype._measureLine=function(e,n){void 0===n&&(n=!1);var r=this.useGuards||n||/^[\t ]$/.test(e),i=r?this._addGuards(e):e,o=t.prototype.measure.call(this,i);return o.width-=r?2*this.getGuardWidth():0,o},e.prototype.measure=function(t){var e=this;if(void 0===t&&(t=i.AbstractMeasurer.HEIGHT_TEXT),""===t.trim())return{width:0,height:0};var n=t.trim().split("\n").map(function(t){return e._measureLine(t)});return{height:n.reduce(function(t,e){return t+e.height},0),width:n.reduce(function(t,e){return Math.max(t,e.width)},0)}},e.prototype.getGuardWidth=function(){return null==this.guardWidth&&(this.guardWidth=t.prototype.measure.call(this).width),this.guardWidth},e}(i.AbstractMeasurer);e.Measurer=o},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(128)),r(n(58))},function(t,e,n){"use strict";var r=n(20),i=function(){function t(){this.maxLines(1/0),this.textTrimming("ellipsis"),this.allowBreakingWords(!0),this._tokenizer=new r.Tokenizer,this._breakingCharacter="-"}return t.prototype.maxLines=function(t){return null==t?this._maxLines:(this._maxLines=t,this)},t.prototype.textTrimming=function(t){if(null==t)return this._textTrimming;if("ellipsis"!==t&&"none"!==t)throw new Error(t+" - unsupported text trimming option.");return this._textTrimming=t,this},t.prototype.allowBreakingWords=function(t){return null==t?this._allowBreakingWords:(this._allowBreakingWords=t,this)},t.prototype.wrap=function(t,e,n,r){var i=this;void 0===r&&(r=1/0);var o={noBrokeWords:0,noLines:0,originalText:t,truncatedText:"",wrappedText:""},a={availableLines:Math.min(Math.floor(r/e.measure().height),this._maxLines),availableWidth:n,canFitText:!0,currentLine:"",wrapping:o},s=t.split("\n");return s.reduce(function(t,n,r){return i.breakLineToFitWidth(t,n,r!==s.length-1,e)},a).wrapping},t.prototype.breakLineToFitWidth=function(t,e,n,i){var o=this;t.canFitText||""===t.wrapping.truncatedText||(t.wrapping.truncatedText+="\n"),t=this._tokenizer.tokenize(e).reduce(function(t,e){return o.wrapNextToken(e,t,i)},t);var a=r.StringMethods.trimEnd(t.currentLine);return t.wrapping.noLines+=+(""!==a),t.wrapping.noLines===t.availableLines&&"none"!==this._textTrimming&&n?t.canFitText=!1:t.wrapping.wrappedText+=a,t.currentLine="\n",t},t.prototype.canFitToken=function(t,e,n){var r=this,i=this._allowBreakingWords?t.split("").map(function(e,n){return n!==t.length-1?e+r._breakingCharacter:e}):[t];return n.measure(t).width<=e||i.every(function(t){return n.measure(t).width<=e})},t.prototype.addEllipsis=function(t,e,n){if("none"===this._textTrimming)return{remainingToken:"",wrappedToken:t};var i=t.substring(0).trim(),o=n.measure(i).width,a=n.measure("...").width,s=t.length>0&&"\n"===t[0]?"\n":"";if(e<=a){var c=a/3,l=Math.floor(e/c);return{remainingToken:t,wrappedToken:s+"...".substr(0,l)}}for(;o+a>e;)i=r.StringMethods.trimEnd(i.substr(0,i.length-1)),o=n.measure(i).width;return{remainingToken:r.StringMethods.trimEnd(t.substring(i.length),"-").trim(),wrappedToken:s+i+"..."}},t.prototype.wrapNextToken=function(t,e,n){if(!e.canFitText||e.availableLines===e.wrapping.noLines||!this.canFitToken(t,e.availableWidth,n))return this.finishWrapping(t,e,n);for(var i=t;i;){var o=this.breakTokenToFitInWidth(i,e.currentLine,e.availableWidth,n);if(e.currentLine=o.line,null!=(i=o.remainingToken)){if(e.wrapping.noBrokeWords+=+o.breakWord,++e.wrapping.noLines,e.availableLines===e.wrapping.noLines){var a=this.addEllipsis(e.currentLine,e.availableWidth,n);return e.wrapping.wrappedText+=a.wrappedToken,e.wrapping.truncatedText+=a.remainingToken+i,e.currentLine="\n",e}e.wrapping.wrappedText+=r.StringMethods.trimEnd(e.currentLine),e.currentLine="\n"}}return e},t.prototype.finishWrapping=function(t,e,n){if(e.canFitText&&e.availableLines!==e.wrapping.noLines&&this._allowBreakingWords&&"none"!==this._textTrimming){var r=this.addEllipsis(e.currentLine+t,e.availableWidth,n);e.wrapping.wrappedText+=r.wrappedToken,e.wrapping.truncatedText+=r.remainingToken,e.wrapping.noBrokeWords+=+(r.remainingToken.length<t.length),e.wrapping.noLines+=+(r.wrappedToken.length>0),e.currentLine=""}else e.wrapping.truncatedText+=t;return e.canFitText=!1,e},t.prototype.breakTokenToFitInWidth=function(t,e,n,r,i){if(void 0===i&&(i=this._breakingCharacter),r.measure(e+t).width<=n)return{breakWord:!1,line:e+t,remainingToken:null};if(""===t.trim())return{breakWord:!1,line:e,remainingToken:""};if(!this._allowBreakingWords)return{breakWord:!1,line:e,remainingToken:t};for(var o=0;o<t.length&&r.measure(e+t.substring(0,o+1)+i).width<=n;)++o;var a="";return o>0&&(a=i),{breakWord:o>0,line:e+t.substring(0,o)+a,remainingToken:t.substring(o)}},t}();e.Wrapper=i},function(t,e,n){"use strict";!function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(129))},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(67)),r(n(68)),r(n(26))},function(t,e,n){"use strict";var r=n(0),i=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this._data=t,this._metadata=e,this._callbacks=new r.CallbackSet}return t.prototype.onUpdate=function(t){return this._callbacks.add(t),this},t.prototype.offUpdate=function(t){return this._callbacks.delete(t),this},t.prototype.data=function(t){return null==t?this._data:(this._data=t,this._callbacks.callCallbacks(this),this)},t.prototype.metadata=function(t){return null==t?this._metadata:(this._metadata=t,this._callbacks.callCallbacks(this),this)},t}();e.Dataset=i},function(t,e,n){"use strict";e.version="3.3.1"},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}r(n(41)),r(n(42)),r(n(43)),r(n(19)),r(n(6)),r(n(31)),r(n(32)),r(n(44)),r(n(9)),r(n(45))},function(t,e,n){"use strict";function r(t,e){return t.each(function(){var t=e.apply(this,arguments),n=_.select(this);for(var r in t)n.attr(r,t[r])})}function i(t,e){for(var n in e)t.attr(n,e[n]);return t}function o(t,e,n){return t.each(function(){var t=e.apply(this,arguments),r=_.select(this);for(var i in t)r.style(i,t[i],n)})}function a(t,e,n){for(var r in e)t.style(r,e[r],n);return t}function s(t,e){return t.each(function(){var t=e.apply(this,arguments),n=_.select(this);for(var r in t)n.property(r,t[r])})}function c(t,e){for(var n in e)t.property(n,e[n]);return t}function l(t,e){return t.each(function(){var n=e.apply(this,arguments),r=_.select(this).transition(t);for(var i in n)r.attr(i,n[i])})}function u(t,e){for(var n in e)t.attr(n,e[n]);return t}function h(t,e,n){return t.each(function(){var r=e.apply(this,arguments),i=_.select(this).transition(t);for(var o in r)i.style(o,r[o],n)})}function p(t,e,n){for(var r in e)t.style(r,e[r],n);return t}var d=n(1),_=d,f=d;_.selection.prototype.attrs=function(t){return("function"==typeof t?r:i)(this,t)},_.selection.prototype.styles=function(t,e){return("function"==typeof t?o:a)(this,t,null==e?"":e)},_.selection.prototype.properties=function(t){return("function"==typeof t?s:c)(this,t)},f.transition.prototype.attrs=function(t){return("function"==typeof t?l:u)(this,t)},f.transition.prototype.styles=function(t,e){return("function"==typeof t?h:p)(this,t,null==e?"":e)}},function(t,e,n){"use strict";var r=n(109),i=n(12),o=n(10),a={linear:r.easeLinear,quad:r.easeQuad,quadIn:r.easeQuadIn,quadOut:r.easeQuadOut,quadInOut:r.easeQuadInOut,cubic:r.easeCubic,cubicIn:r.easeCubicIn,cubicOut:r.easeCubicOut,cubicInOut:r.easeCubicInOut,poly:r.easePoly,polyIn:r.easePolyIn,polyOut:r.easePolyOut,polyInOut:r.easePolyInOut,sin:r.easeSin,sinIn:r.easeSinIn,sinOut:r.easeSinOut,sinInOut:r.easeSinInOut,exp:r.easeExp,expIn:r.easeExpIn,expOut:r.easeExpOut,expInOut:r.easeExpInOut,circle:r.easeCircle,circleIn:r.easeCircleIn,circleOut:r.easeCircleOut,circleInOut:r.easeCircleInOut,bounce:r.easeBounce,bounceIn:r.easeBounceIn,bounceOut:r.easeBounceOut,bounceInOut:r.easeBounceInOut,back:r.easeBack,backIn:r.easeBackIn,backOut:r.easeBackOut,backInOut:r.easeBackInOut,elastic:r.easeElastic,elasticIn:r.easeElasticIn,elasticOut:r.easeElasticOut,elasticInOut:r.easeElasticInOut};e.EaseName=o.makeEnum(["linear","quad","quadIn","quadOut","quadInOut","cubic","cubicIn","cubicOut","cubicInOut","poly","polyIn","polyOut","polyInOut","sin","sinIn","sinOut","sinInOut","exp","expIn","expOut","expInOut","circle","circleIn","circleOut","circleInOut","bounce","bounceIn","bounceOut","bounceInOut","back","backIn","backOut","backInOut","elastic","elasticIn","elasticOut","elasticInOut"]);var s=function(){function t(){this._startDelay=t._DEFAULT_START_DELAY_MILLISECONDS,this._stepDuration=t._DEFAULT_STEP_DURATION_MILLISECONDS,this._stepDelay=t._DEFAULT_ITERATIVE_DELAY_MILLISECONDS,this._maxTotalDuration=t._DEFAULT_MAX_TOTAL_DURATION_MILLISECONDS,this._easingMode=t._DEFAULT_EASING_MODE}return t.prototype.totalTime=function(t){var e=this._getAdjustedIterativeDelay(t);return this.startDelay()+e*Math.max(t-1,0)+this.stepDuration()},t.prototype.animate=function(t,e){var n=this,r=(t=i.coerceExternalD3(t)).size(),o=this._getAdjustedIterativeDelay(r);return t.transition().ease(this._getEaseFactory()).duration(this.stepDuration()).delay(function(t,e){return n.startDelay()+o*e}).attrs(e)},t.prototype.startDelay=function(t){return null==t?this._startDelay:(this._startDelay=t,this)},t.prototype.stepDuration=function(t){return null==t?Math.min(this._stepDuration,this._maxTotalDuration):(this._stepDuration=t,this)},t.prototype.stepDelay=function(t){return null==t?this._stepDelay:(this._stepDelay=t,this)},t.prototype.maxTotalDuration=function(t){return null==t?this._maxTotalDuration:(this._maxTotalDuration=t,this)},t.prototype.easingMode=function(t){return null==t?this._easingMode:(this._easingMode=t,this)},t.prototype._getEaseFactory=function(){var t=this.easingMode();if("string"==typeof t){var e=a[t];return null==e?a.linear:e}return t},t.prototype._getAdjustedIterativeDelay=function(t){var e=this.maxTotalDuration()-this.stepDuration(),n=(e=Math.max(e,0))/Math.max(t-1,1);return Math.min(this.stepDelay(),n)},t}();s._DEFAULT_START_DELAY_MILLISECONDS=0,s._DEFAULT_STEP_DURATION_MILLISECONDS=300,s._DEFAULT_ITERATIVE_DELAY_MILLISECONDS=15,s._DEFAULT_MAX_TOTAL_DURATION_MILLISECONDS=1/0,s._DEFAULT_EASING_MODE="expOut",e.Easing=s},function(t,e,n){"use strict";var r=n(12),i=function(){function t(){}return t.prototype.totalTime=function(t){return 0},t.prototype.animate=function(t,e){return(t=r.coerceExternalD3(t)).attrs(e)},t}();e.Null=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(5),a=n(4),s=n(0),c=n(21),l=function(t){function e(e,n){void 0===n&&(n="bottom");var r=t.call(this,e,n)||this;return r._tickLabelAngle=0,r._tickLabelShearAngle=0,r.addClass("category-axis"),r}return r(e,t),Object.defineProperty(e.prototype,"_wrapper",{get:function(){var t=new o.Wrapper;return null!=this._tickLabelMaxLines&&t.maxLines(this._tickLabelMaxLines),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_writer",{get:function(){return new o.Writer(this._measurer,this._typesetterContext,this._wrapper)},enumerable:!0,configurable:!0}),e.prototype._setup=function(){t.prototype._setup.call(this),this._typesetterContext=new o.SvgContext(this._tickLabelContainer.node()),this._measurer=new o.CacheMeasurer(this._typesetterContext)},e.prototype._rescale=function(){return this.redraw()},e.prototype.requestedSpace=function(t,e){var n=this.isHorizontal()?0:this._tickSpaceRequired()+this.margin(),r=this.isHorizontal()?this._tickSpaceRequired()+this.margin():0;if(0===this._scale.domain().length)return{minWidth:0,minHeight:0};if(this.annotationsEnabled()){var i=this._annotationTierHeight()*this.annotationTierCount();this.isHorizontal()?r+=i:n+=i}var o=this._measureTickLabels(t,e);return{minWidth:o.usedWidth+n,minHeight:o.usedHeight+r}},e.prototype._coreSize=function(){var t=this.isHorizontal()?this.height():this.width(),e=(this.isHorizontal()?this.requestedSpace(this.width(),this.height()).minHeight:this.requestedSpace(this.width(),this.height()).minWidth)-(this.margin()+this._annotationTierHeight());return Math.min(e,t)},e.prototype._getTickValues=function(){return this.getDownsampleInfo().domain},e.prototype._sizeFromOffer=function(t,e){return a.Component.prototype._sizeFromOffer.call(this,t,e)},e.prototype.getDownsampleInfo=function(t,n){void 0===t&&(t=this._scale),void 0===n&&(n=t.invertRange());var r=0===this._tickLabelAngle?1:1/Math.cos(this._tickLabelShearAngle/180*Math.PI),i=e._MINIMUM_WIDTH_PER_LABEL_PX*r,o=Math.ceil(i/t.stepWidth());return{domain:n.filter(function(t,e){return e%o==0}),stepWidth:o*t.stepWidth()}},e.prototype.tickLabelAngle=function(t){if(null==t)return this._tickLabelAngle;if(0!==t&&90!==t&&-90!==t)throw new Error("Angle "+t+" not supported; only 0, 90, and -90 are valid values");return this._tickLabelAngle=t,this.redraw(),this},e.prototype.tickLabelShearAngle=function(t){if(null==t)return this._tickLabelShearAngle;if(t<-80||t>80)throw new Error("Angle "+t+" not supported; Must be between [-80, 80]");return this._tickLabelShearAngle=t,this.redraw(),this},e.prototype.tickLabelMaxWidth=function(t){return 0===arguments.length?this._tickLabelMaxWidth:(this._tickLabelMaxWidth=t,this.redraw(),this)},e.prototype.tickLabelMaxLines=function(t){return 0===arguments.length?this._tickLabelMaxLines:(this._tickLabelMaxLines=t,this.redraw(),this)},e.prototype._tickSpaceRequired=function(){return this._maxLabelTickLength()+this.tickLabelPadding()},e.prototype._drawTicks=function(t,e){var n,r,o=this;switch(this.tickLabelAngle()){case 0:n={left:"right",right:"left",top:"center",bottom:"center"},r={left:"center",right:"center",top:"bottom",bottom:"top"};break;case 90:n={left:"center",right:"center",top:"right",bottom:"left"},r={left:"top",right:"bottom",top:"center",bottom:"center"};break;case-90:n={left:"center",right:"center",top:"left",bottom:"right"},r={left:"bottom",right:"top",top:"center",bottom:"center"}}e.each(function(e){var a=i.select(this),s=o.isHorizontal()?t:o.width()-o._tickSpaceRequired(),c=o.isHorizontal()?o.height()-o._tickSpaceRequired():t,l={xAlign:n[o.orientation()],yAlign:r[o.orientation()],textRotation:o.tickLabelAngle(),textShear:o.tickLabelShearAngle()};if(null!=o._tickLabelMaxWidth){if("left"===o.orientation()&&s>o._tickLabelMaxWidth){var u=s-o._tickLabelMaxWidth,h=a.attr("transform")+" translate("+u+", 0)";a.attr("transform",h)}s=Math.min(s,o._tickLabelMaxWidth)}o._writer.write(o.formatter()(e),s,c,l,a.node())})},e.prototype._measureTickLabels=function(t,e){var n=this,r=this._scale.cloneWithoutProviders().range([0,this.isHorizontal()?t:e]),o=this.getDownsampleInfo(r),a=o.domain,c=o.stepWidth,l=t-this._tickSpaceRequired();this.isHorizontal()&&(l=c,0!==this._tickLabelAngle&&(l=e-this._tickSpaceRequired()),l=Math.max(l,0));var u=c;this.isHorizontal()&&(u=e-this._tickSpaceRequired(),0!==this._tickLabelAngle&&(u=t-this._tickSpaceRequired()),u=Math.max(u,0)),null!=this._tickLabelMaxWidth&&(l=Math.min(l,this._tickLabelMaxWidth));var h=a.map(function(t){return n._wrapper.wrap(n.formatter()(t),n._measurer,l,u)}),p=this.isHorizontal()&&0===this._tickLabelAngle?i.sum:s.Math.max,d=this.isHorizontal()&&0===this._tickLabelAngle?s.Math.max:i.sum,_=p(h,function(t){return n._measurer.measure(t.wrappedText).width},0),f=d(h,function(t){return n._measurer.measure(t.wrappedText).height},0);return 0!==this._tickLabelAngle&&(_=(y=[f,_])[0],f=y[1]),{usedWidth:_,usedHeight:f};var y},e.prototype.renderImmediately=function(){var e=this;t.prototype.renderImmediately.call(this);var n=this._scale,r=this.getDownsampleInfo(n),i=r.domain,o=r.stepWidth,a=o;this.isHorizontal()&&null!=this._tickLabelMaxWidth&&(a=Math.min(a,this._tickLabelMaxWidth));var s=this._tickLabelContainer.selectAll("."+c.Axis.TICK_LABEL_CLASS).data(i),l=s.enter().append("g").classed(c.Axis.TICK_LABEL_CLASS,!0).merge(s);s.exit().remove(),l.attr("transform",function(t,r){var i=n.scale(t)-a/2;return"translate("+(e.isHorizontal()?i:0)+","+(e.isHorizontal()?0:i)+")"}),l.text(""),this._drawTicks(o,l);var u="right"===this.orientation()?this._tickSpaceRequired():0,h="bottom"===this.orientation()?this._tickSpaceRequired():0;return this._tickLabelContainer.attr("transform","translate("+u+","+h+")"),this._showAllTickMarks(),this._showAllTickLabels(),this._hideTickMarksWithoutLabel(),this},e.prototype.computeLayout=function(e,n,r){return t.prototype.computeLayout.call(this,e,n,r),this.isHorizontal()||this._scale.range([0,this.height()]),this},e.prototype.invalidateCache=function(){t.prototype.invalidateCache.call(this),this._measurer.reset()},e}(c.Axis);l._MINIMUM_WIDTH_PER_LABEL_PX=15,e.Category=l},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(5),a=n(8),s=n(0),c=n(21),l=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r._tickLabelPositioning="center",r._usesTextWidthApproximation=!1,r.formatter(a.general()),r}return r(e,t),e.prototype._setup=function(){t.prototype._setup.call(this);var e=new o.SvgContext(this._tickLabelContainer.node(),c.Axis.TICK_LABEL_CLASS);this._measurer=new o.CacheMeasurer(e),this._wrapper=(new o.Wrapper).maxLines(1)},e.prototype._computeWidth=function(){var t=this._usesTextWidthApproximation?this._computeApproximateTextWidth():this._computeExactTextWidth();return"center"===this._tickLabelPositioning?this._maxLabelTickLength()+this.tickLabelPadding()+t:Math.max(this._maxLabelTickLength(),this.tickLabelPadding()+t)},e.prototype._computeExactTextWidth=function(){var t=this,e=this._getTickValues().map(function(e){var n=t.formatter()(e);return t._measurer.measure(n).width});return s.Math.max(e,0)},e.prototype._computeApproximateTextWidth=function(){var t=this,e=this._getTickValues(),n=this._measurer.measure("M").width,r=e.map(function(e){return t.formatter()(e).length*n});return s.Math.max(r,0)},e.prototype._computeHeight=function(){var t=this._measurer.measure().height;return"center"===this._tickLabelPositioning?this._maxLabelTickLength()+this.tickLabelPadding()+t:Math.max(this._maxLabelTickLength(),this.tickLabelPadding()+t)},e.prototype._getTickValues=function(){var t=this._scale,e=t.domain(),n=e[0]<=e[1]?e[0]:e[1],r=e[0]>=e[1]?e[0]:e[1];return t.ticks().filter(function(t){return t>=n&&t<=r})},e.prototype._rescale=function(){if(this._isSetup){if(!this.isHorizontal()){var t=this._computeWidth();if(t>this.width()||t<this.width()-this.margin())return void this.redraw()}this.render()}},e.prototype.renderImmediately=function(){var e=this;t.prototype.renderImmediately.call(this);var n={x:0,y:0,dx:"0em",dy:"0.3em"},r=this._maxLabelTickLength(),i=this.tickLabelPadding(),o="middle",a=0,s=0,l=0,u=0;if(this.isHorizontal())switch(this._tickLabelPositioning){case"left":o="end",a=-i,u=i;break;case"center":u=r+i;break;case"right":o="start",a=i,u=i}else switch(this._tickLabelPositioning){case"top":n.dy="-0.3em",l=i,s=-i;break;case"center":l=r+i;break;case"bottom":n.dy="1em",l=i,s=i}var h=this._generateTickMarkAttrHash();switch(this.orientation()){case"bottom":n.x=h.x1,n.dy="0.95em",s=h.y1+u;break;case"top":n.x=h.x1,n.dy="-.25em",s=h.y1-u;break;case"left":o="end",a=h.x1-l,n.y=h.y1;break;case"right":o="start",a=h.x1+l,n.y=h.y1}var p=this._getTickValues(),d=this._tickLabelContainer.selectAll("."+c.Axis.TICK_LABEL_CLASS).data(p);d.exit().remove(),d.enter().append("text").classed(c.Axis.TICK_LABEL_CLASS,!0).merge(d).style("text-anchor",o).style("visibility","inherit").attrs(n).text(function(t){return e.formatter()(t)});var _="translate("+a+", "+s+")";return this._tickLabelContainer.attr("transform",_),this._showAllTickMarks(),this.showEndTickLabels()||this._hideEndTickLabels(),this._hideOverflowingTickLabels(),this._hideOverlappingTickLabels(),"center"!==this._tickLabelPositioning&&this._hideTickMarksWithoutLabel(),this},e.prototype.tickLabelPosition=function(t){if(null==t)return this._tickLabelPositioning;var e=t.toLowerCase();if(this.isHorizontal()){if("left"!==e&&"center"!==e&&"right"!==e)throw new Error(e+" is not a valid tick label position for a horizontal NumericAxis")}else if("top"!==e&&"center"!==e&&"bottom"!==e)throw new Error(e+" is not a valid tick label position for a vertical NumericAxis");return this._tickLabelPositioning=e,this.redraw(),this},e.prototype.usesTextWidthApproximation=function(t){return null==t?this._usesTextWidthApproximation:(this._usesTextWidthApproximation=t,this)},e.prototype._hideEndTickLabels=function(){var t=this.element().node().getBoundingClientRect(),e=this._tickLabelContainer.selectAll("."+c.Axis.TICK_LABEL_CLASS);if(0!==e.size()){var n=e.nodes()[0];s.DOM.clientRectInside(n.getBoundingClientRect(),t)||i.select(n).style("visibility","hidden");var r=e.nodes()[e.size()-1];s.DOM.clientRectInside(r.getBoundingClientRect(),t)||i.select(r).style("visibility","hidden")}},e.prototype._hideOverlappingTickLabels=function(){for(var t=this._tickLabelContainer.selectAll("."+c.Axis.TICK_LABEL_CLASS).filter(function(t,e){var n=i.select(this).style("visibility");return"inherit"===n||"visible"===n}),e=t.nodes().map(function(t){return t.getBoundingClientRect()}),n=1;!this._hasOverlapWithInterval(n,e)&&n<e.length;)n+=1;t.each(function(t,e){var r=i.select(this);e%n!=0&&r.style("visibility","hidden")})},e.prototype._hasOverlapWithInterval=function(t,e){for(var n="center"===this._tickLabelPositioning?this.tickLabelPadding():3*this.tickLabelPadding(),r=e.map(function(t){return s.DOM.expandRect(t,n)}),i=0;i<r.length-t;i+=t){var o=r[i],a=r[i+t];if(s.DOM.clientRectsOverlap(o,a))return!1}return!0},e.prototype.invalidateCache=function(){t.prototype.invalidateCache.call(this),this._measurer.reset()},e}(c.Axis);e.Numeric=l},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(39),o=n(14),a=n(0),s=function(t){function e(e){var n=t.call(this,e)||this;n._detectionRadius=3,n._enabled=!0,n.addClass("drag-line-layer"),n.addClass("enabled"),n._dragInteraction=new o.Drag,n._dragInteraction.attachTo(n);var r=function(t){return n._isVertical()&&n.pixelPosition()-n.detectionRadius()<=t.x&&t.x<=n.pixelPosition()+n.detectionRadius()||!n._isVertical()&&n.pixelPosition()-n.detectionRadius()<=t.y&&t.y<=n.pixelPosition()+n.detectionRadius()},i=!1,s=function(t){r(t)&&(i=!0,n._dragStartCallbacks.callCallbacks(n))};n._dragInteraction.onDragStart(s);var c=function(t,e){i&&(n._setPixelPositionWithoutChangingMode(n._isVertical()?e.x:e.y),n._dragCallbacks.callCallbacks(n))};n._dragInteraction.onDrag(c);var l=function(t,e){i&&(i=!1,n._dragEndCallbacks.callCallbacks(n))};return n._dragInteraction.onDragEnd(l),n._disconnectInteraction=function(){n._dragInteraction.offDragStart(s),n._dragInteraction.offDrag(c),n._dragInteraction.offDragEnd(l),n._dragInteraction.detach()},n._dragStartCallbacks=new a.CallbackSet,n._dragCallbacks=new a.CallbackSet,n._dragEndCallbacks=new a.CallbackSet,n}return r(e,t),e.prototype._setup=function(){t.prototype._setup.call(this),this._detectionEdge=this.content().append("line").styles({opacity:0,stroke:"pink","pointer-events":"visibleStroke"}).classed("drag-edge",!0)},e.prototype.renderImmediately=function(){return t.prototype.renderImmediately.call(this),this._detectionEdge.attrs({x1:this._isVertical()?this.pixelPosition():0,y1:this._isVertical()?0:this.pixelPosition(),x2:this._isVertical()?this.pixelPosition():this.width(),y2:this._isVertical()?this.height():this.pixelPosition(),"stroke-width":2*this._detectionRadius}),this},e.prototype.detectionRadius=function(t){if(null==t)return this._detectionRadius;if(t<0)throw new Error("detection radius cannot be negative.");return this._detectionRadius=t,this.render(),this},e.prototype.enabled=function(t){return null==t?this._enabled:(this._enabled=t,t?this.addClass("enabled"):this.removeClass("enabled"),this._dragInteraction.enabled(t),this)},e.prototype.onDragStart=function(t){return this._dragStartCallbacks.add(t),this},e.prototype.offDragStart=function(t){return this._dragStartCallbacks.delete(t),this},e.prototype.onDrag=function(t){return this._dragCallbacks.add(t),this},e.prototype.offDrag=function(t){return this._dragCallbacks.delete(t),this},e.prototype.onDragEnd=function(t){return this._dragEndCallbacks.add(t),this},e.prototype.offDragEnd=function(t){return this._dragEndCallbacks.delete(t),this},e.prototype.destroy=function(){var e=this;t.prototype.destroy.call(this),this._dragStartCallbacks.forEach(function(t){return e._dragStartCallbacks.delete(t)}),this._dragCallbacks.forEach(function(t){return e._dragCallbacks.delete(t)}),this._dragEndCallbacks.forEach(function(t){return e._dragEndCallbacks.delete(t)}),this._disconnectInteraction()},e}(i.GuideLineLayer);e.DragLineLayer=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(11),o=function(t){function e(e,n){var r=this;if(null!=e&&!i.QuantitativeScale.prototype.isPrototypeOf(e))throw new Error("xScale needs to inherit from Scale.QuantitativeScale");if(null!=n&&!i.QuantitativeScale.prototype.isPrototypeOf(n))throw new Error("yScale needs to inherit from Scale.QuantitativeScale");return(r=t.call(this)||this).addClass("gridlines"),r._xScale=e,r._yScale=n,r._renderCallback=function(t){return r.render()},r._xScale&&r._xScale.onUpdate(r._renderCallback),r._yScale&&r._yScale.onUpdate(r._renderCallback),r}return r(e,t),e.prototype.destroy=function(){return t.prototype.destroy.call(this),this._xScale&&this._xScale.offUpdate(this._renderCallback),this._yScale&&this._yScale.offUpdate(this._renderCallback),this},e.prototype._setup=function(){t.prototype._setup.call(this),this._xLinesContainer=this.content().append("g").classed("x-gridlines",!0),this._yLinesContainer=this.content().append("g").classed("y-gridlines",!0)},e.prototype.renderImmediately=function(){return t.prototype.renderImmediately.call(this),this._redrawXLines(),this._redrawYLines(),this},e.prototype.computeLayout=function(e,n,r){return t.prototype.computeLayout.call(this,e,n,r),null!=this._xScale&&this._xScale.range([0,this.width()]),null!=this._yScale&&this._yScale.range([this.height(),0]),this},e.prototype._redrawXLines=function(){var t=this;if(this._xScale){var e=this._xScale.ticks(),n=function(e){return t._xScale.scale(e)},r=this._xLinesContainer.selectAll("line").data(e);r.enter().append("line").merge(r).attr("x1",n).attr("y1",0).attr("x2",n).attr("y2",this.height()).classed("zeroline",function(t){return 0===t}),r.exit().remove()}},e.prototype._redrawYLines=function(){var t=this;if(this._yScale){var e=this._yScale.ticks(),n=function(e){return t._yScale.scale(e)},r=this._yLinesContainer.selectAll("line").data(e);r.enter().append("line").merge(r).attr("x1",0).attr("y1",n).attr("x2",this.width()).attr("y2",n).classed("zeroline",function(t){return 0===t}),r.exit().remove()}},e}(n(4).Component);e.Gridlines=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=n(22),a=n(8),s=n(0),c=function(t){function e(e){var n=t.call(this)||this;if(n._textPadding=5,null==e)throw new Error("InterpolatedColorLegend requires a interpolatedColorScale");return n._scale=e,n._redrawCallback=function(t){return n.redraw()},n._scale.onUpdate(n._redrawCallback),n._formatter=a.general(),n._orientation="horizontal",n._expands=!1,n.addClass("legend"),n.addClass("interpolated-color-legend"),n}return r(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this._scale.offUpdate(this._redrawCallback)},e.prototype.formatter=function(t){return void 0===t?this._formatter:(this._formatter=t,this.redraw(),this)},e.prototype.expands=function(t){return null==t?this._expands:(this._expands=t,this.redraw(),this)},e._ensureOrientation=function(t){if("horizontal"===(t=t.toLowerCase())||"left"===t||"right"===t)return t;throw new Error('"'+t+'" is not a valid orientation for InterpolatedColorLegend')},e.prototype.orientation=function(t){return null==t?this._orientation:(this._orientation=e._ensureOrientation(t),this.redraw(),this)},e.prototype.fixedWidth=function(){return!this.expands()||this._isVertical()},e.prototype.fixedHeight=function(){return!this.expands()||!this._isVertical()},e.prototype._generateTicks=function(t){void 0===t&&(t=e._DEFAULT_NUM_SWATCHES);var n=this._scale.domain();if(1===t)return[n[0]];for(var r=(n[1]-n[0])/(t-1),i=[],o=0;o<t;o++)i.push(n[0]+r*o);return i},e.prototype._setup=function(){t.prototype._setup.call(this),this._swatchContainer=this.content().append("g").classed("swatch-container",!0),this._swatchBoundingBox=this.content().append("rect").classed("swatch-bounding-box",!0),this._lowerLabel=this.content().append("g").classed(e.LEGEND_LABEL_CLASS,!0),this._upperLabel=this.content().append("g").classed(e.LEGEND_LABEL_CLASS,!0);var n=new i.SvgContext(this.content().node());this._measurer=new i.Measurer(n),this._wrapper=new i.Wrapper,this._writer=new i.Writer(this._measurer,n,this._wrapper)},e.prototype.requestedSpace=function(t,n){var r,i,o=this,a=this._measurer.measure().height,c=a,l=this._scale.domain().map(function(t){return o._measurer.measure(o._formatter(t)).width}),u=e._DEFAULT_NUM_SWATCHES;if(this._isVertical()){var h=s.Math.max(l,0);i=c+a+this._textPadding+h+this._textPadding,r=u*a}else r=c+a+c,i=this._textPadding+l[0]+u*a+l[1]+this._textPadding;return{minWidth:i,minHeight:r}},e.prototype._isVertical=function(){return"horizontal"!==this._orientation},e.prototype.renderImmediately=function(){var e=this;t.prototype.renderImmediately.call(this);var n,r,i,a,s,c,l=this._scale.domain(),u=this._formatter(l[0]),h=this._measurer.measure(u).width,p=this._formatter(l[1]),d=this._measurer.measure(p).width,_=this._measurer.measure().height,f=this._textPadding,y={x:0,y:0},m={x:0,y:0},g={xAlign:"center",yAlign:"center",textRotation:0},v={xAlign:"center",yAlign:"center",textRotation:0},x={x:0,y:0,width:0,height:0};if(this._isVertical()){c=Math.floor(this.height());var b=Math.max(h,d);s=(this.width()-b-2*this._textPadding)/2,n=Math.max(this.width()-s-2*f-b,0),r=1,a=function(t,n){return e.height()-(n+1)},v.yAlign="top",y.y=0,g.yAlign="bottom",m.y=0,"left"===this._orientation?(i=function(t,e){return f+b+f},v.xAlign="right",y.x=-(s+n+f),g.xAlign="right",m.x=-(s+n+f)):(i=function(t,e){return s},v.xAlign="left",y.x=s+n+f,g.xAlign="left",m.x=s+n+f),x.width=n,x.height=c*r}else s=Math.max(f,(this.height()-_)/2),c=Math.max(Math.floor(this.width()-4*f-h-d),0),n=1,r=Math.max(this.height()-2*s,0),i=function(t,e){return Math.floor(h+2*f)+e},a=function(t,e){return s},v.xAlign="right",y.x=-f,g.xAlign="left",m.x=f,x.y=s,x.width=c*n,x.height=r;x.x=i(null,0),this._upperLabel.text(""),this._writer.write(p,this.width(),this.height(),v,this._upperLabel.node());var E="translate("+y.x+", "+y.y+")";this._upperLabel.attr("transform",E),this._lowerLabel.text(""),this._writer.write(u,this.width(),this.height(),g,this._lowerLabel.node());var w="translate("+m.x+", "+m.y+")";this._lowerLabel.attr("transform",w),this._swatchBoundingBox.attrs(x);var A=this._generateTicks(c),C=this._swatchContainer.selectAll("rect.swatch").data(A),S=C.enter().append("rect").classed("swatch",!0),T=C.merge(S);return C.exit().remove(),T.attrs({fill:function(t,n){return e._scale.scale(t)},width:n,height:r,x:i,y:a,"shape-rendering":"crispEdges"}),o.ADD_TITLE_ELEMENTS&&S.append("title").text(function(t){return e._formatter(t)}),this},e}(n(4).Component);c._DEFAULT_NUM_SWATCHES=11,c.LEGEND_LABEL_CLASS="legend-label",e.InterpolatedColorLegend=c},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=function(t){function e(e,n){void 0===e&&(e=""),void 0===n&&(n=0);var r=t.call(this)||this;return r.addClass("label"),r.text(e),r.angle(n),r.xAlignment("center").yAlignment("center"),r._padding=0,r}return r(e,t),e.prototype.requestedSpace=function(t,e){var n=this._measurer.measure(this._text);return{minWidth:(0===this.angle()?n.width:n.height)+2*this.padding(),minHeight:(0===this.angle()?n.height:n.width)+2*this.padding()}},e.prototype._setup=function(){t.prototype._setup.call(this),this._textContainer=this.content().append("g");var e=new i.SvgContext(this._textContainer.node());this._measurer=new i.CacheMeasurer(e),this._wrapper=new i.Wrapper,this._writer=new i.Writer(this._measurer,e,this._wrapper),this.text(this._text)},e.prototype.text=function(t){if(null==t)return this._text;if("string"!=typeof t)throw new Error("Label.text() only takes strings as input");return this._text=t,this.redraw(),this},e.prototype.angle=function(t){if(null==t)return this._angle;if((t%=360)>180?t-=360:t<-180&&(t+=360),-90!==t&&0!==t&&90!==t)throw new Error(t+" is not a valid angle for Label");return this._angle=t,this.redraw(),this},e.prototype.padding=function(t){if(null==t)return this._padding;if((t=+t)<0)throw new Error(t+" is not a valid padding value. Cannot be less than 0.");return this._padding=t,this.redraw(),this},e.prototype.fixedWidth=function(){return!0},e.prototype.fixedHeight=function(){return!0},e.prototype.renderImmediately=function(){t.prototype.renderImmediately.call(this),this._textContainer.selectAll("g").remove();var e=this._measurer.measure(this._text),n=Math.max(Math.min((this.height()-e.height)/2,this.padding()),0),r=Math.max(Math.min((this.width()-e.width)/2,this.padding()),0);this._textContainer.attr("transform","translate("+r+","+n+")");var i=this.width()-2*r,o=this.height()-2*n,a={xAlign:this.xAlignment(),yAlign:this.yAlignment(),textRotation:this.angle()};return this._writer.write(this._text,i,o,a),this},e.prototype.invalidateCache=function(){t.prototype.invalidateCache.call(this),this._measurer.reset()},e}(n(4).Component);e.Label=o;var a=function(t){function e(n,r){var i=t.call(this,n,r)||this;return i.addClass(e.TITLE_LABEL_CLASS),i}return r(e,t),e}(o);a.TITLE_LABEL_CLASS="title-label",e.TitleLabel=a;var s=function(t){function e(n,r){var i=t.call(this,n,r)||this;return i.addClass(e.AXIS_LABEL_CLASS),i}return r(e,t),e}(o);s.AXIS_LABEL_CLASS="axis-label",e.AxisLabel=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(5),a=n(22),s=n(8),c=n(29),l=n(0),u=n(4),h=function(){function t(t,e,n){void 0===t&&(t=[]),void 0===e&&(e=0),void 0===n&&(n=1/0),this.columns=t,this.bottomPadding=e,this.maxWidth=n}return t.prototype.addColumn=function(t){var e=t.width,n=this.getWidthAvailable();t.width=Math.min(n,e),this.columns.push(t)},t.prototype.getBounds=function(t){for(var e=this.columns[t],n=0,r=0;r<t;r++)n+=this.columns[r].width;return{topLeft:{x:n,y:0},bottomRight:{x:n+e.width,y:e.height}}},t.prototype.getHeight=function(){return l.Math.max(this.columns.map(function(t){return t.height}),0)+this.bottomPadding},t.prototype.getWidth=function(){return Math.min(this.columns.reduce(function(t,e){return t+e.width},0),this.maxWidth)},t.prototype.getWidthAvailable=function(){var t=this.getWidth();return Math.max(this.maxWidth-t,0)},t}(),p=function(){function t(t,e,n,r){void 0===t&&(t=1/0),void 0===e&&(e=1/0),void 0===n&&(n=0),void 0===r&&(r=[]),this.maxWidth=t,this.maxHeight=e,this.padding=n,this.rows=r}return t.prototype.addRow=function(t){t.maxWidth=this.maxWidth-2*this.padding,this.rows.push(t)},t.prototype.getColumnBounds=function(t,e){var n=this.getRowBounds(t),r=this.rows[t].getBounds(e);return r.topLeft.x+=n.topLeft.x,r.bottomRight.x+=n.topLeft.x,r.topLeft.y+=n.topLeft.y,r.bottomRight.y+=n.topLeft.y,r},t.prototype.getRowBounds=function(t){for(var e=this.padding,n=this.padding,r=0;r<t;r++)n+=this.rows[r].getHeight();return{topLeft:{x:e,y:n},bottomRight:{x:e+this.rows[t].getWidth(),y:n+this.rows[t].getHeight()}}},t.prototype.getHeight=function(){return Math.min(this.rows.reduce(function(t,e){return t+e.getHeight()},0)+2*this.padding,this.maxHeight)},t.prototype.getWidth=function(){return Math.min(l.Math.max(this.rows.map(function(t){return t.getWidth()}),0)+2*this.padding,this.maxWidth)},t}(),d=function(t){function e(e){var n=t.call(this)||this;if(n._padding=5,n._rowBottomPadding=3,n.addClass("legend"),n.maxEntriesPerRow(1),null==e)throw new Error("Legend requires a colorScale");return n._colorScale=e,n._redrawCallback=function(t){return n.redraw()},n._colorScale.onUpdate(n._redrawCallback),n._formatter=s.identity(),n.maxLinesPerEntry(1),n.xAlignment("right").yAlignment("top"),n.comparator(function(t,e){var r=n._colorScale.domain().slice().map(function(t){return n._formatter(t)});return r.indexOf(t)-r.indexOf(e)}),n._symbolFactoryAccessor=function(){return c.circle()},n._symbolOpacityAccessor=function(){return 1},n}return r(e,t),e.prototype._setup=function(){t.prototype._setup.call(this);var n=this.content().append("g").classed(e.LEGEND_ROW_CLASS,!0);n.append("g").classed(e.LEGEND_ENTRY_CLASS,!0).append("text");var r=new o.SvgContext(n.node(),null,a.ADD_TITLE_ELEMENTS);this._measurer=new o.CacheMeasurer(r),this._wrapper=(new o.Wrapper).maxLines(this.maxLinesPerEntry()),this._writer=new o.Writer(this._measurer,r,this._wrapper)},e.prototype.formatter=function(t){return null==t?this._formatter:(this._formatter=t,this.redraw(),this)},e.prototype.maxEntriesPerRow=function(t){return null==t?this._maxEntriesPerRow:(this._maxEntriesPerRow=t,this.redraw(),this)},e.prototype.maxLinesPerEntry=function(t){return null==t?this._maxLinesPerEntry:(this._maxLinesPerEntry=t,this.redraw(),this)},e.prototype.maxWidth=function(t){return null==t?this._maxWidth:(this._maxWidth=t,this.redraw(),this)},e.prototype.comparator=function(t){return null==t?this._comparator:(this._comparator=t,this.redraw(),this)},e.prototype.colorScale=function(t){return null!=t?(this._colorScale.offUpdate(this._redrawCallback),this._colorScale=t,this._colorScale.onUpdate(this._redrawCallback),this.redraw(),this):this._colorScale},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._colorScale.offUpdate(this._redrawCallback)},e.prototype._buildLegendTable=function(t,e){var n=this,r=this._measurer.measure().height,i=new p(t,e,this._padding),o=this._colorScale.domain().slice().sort(function(t,e){return n._comparator(n._formatter(t),n._formatter(e))}),a=new h;return i.addRow(a),a.bottomPadding=this._rowBottomPadding,o.forEach(function(t,e){a.columns.length/2===n.maxEntriesPerRow()&&((a=new h).bottomPadding=n._rowBottomPadding,i.addRow(a));var o=a.getWidthAvailable(),s=n._formatter(t),c=n._measurer.measure(s).width;o-r-c<0&&a.columns.length>1&&((a=new h).bottomPadding=n._rowBottomPadding,i.addRow(a));var l={width:r,height:r,data:{name:t,type:"symbol"}};a.addColumn(l),o=a.getWidthAvailable();var u=Math.min(o,c);n._wrapper.maxLines(n.maxLinesPerEntry());var p={width:u,height:n._wrapper.wrap(s,n._measurer,u).noLines*r,data:{name:t,type:"text"}};a.addColumn(p)}),i},e.prototype.requestedSpace=function(t,e){var n=this._buildLegendTable(l.Math.min([this.maxWidth(),t],t),e);return{minHeight:n.getHeight(),minWidth:n.getWidth()}},e.prototype.entitiesAt=function(t){var n=this;if(!this._isSetup)return[];var r=this._buildLegendTable(this.width(),this.height());return r.rows.reduce(function(o,a,s){if(0!==o.length)return o;var c=r.getRowBounds(s);return l.Math.within(t,c)?a.columns.reduce(function(o,a,c){var u=r.getColumnBounds(s,c);if(l.Math.within(t,u)){var h=n.content().selectAll("."+e.LEGEND_ROW_CLASS).nodes()[s],p=i.select(h).selectAll("."+e.LEGEND_ENTRY_CLASS).nodes()[Math.floor(c/2)],d=i.select(p).select("."+e.LEGEND_SYMBOL_CLASS),_=l.DOM.getTranslateValues(i.select(h)),f=l.DOM.getTranslateValues(d);return[{datum:a.data.name,position:{x:_[0]+f[0],y:_[1]+f[1]},selection:i.select(p),component:n}]}return o},o):o},[])},e.prototype.renderImmediately=function(){t.prototype.renderImmediately.call(this);var n=this._buildLegendTable(this.width(),this.height());this.content().selectAll("*").remove();var r=this.content().selectAll("g."+e.LEGEND_ROW_CLASS).data(n.rows),o=r.enter().append("g").classed(e.LEGEND_ROW_CLASS,!0).merge(r);r.exit().remove(),o.attr("transform",function(t,e){var r=n.getRowBounds(e);return"translate("+r.topLeft.x+", "+r.topLeft.y+")"});var a=this;return o.each(function(t,r){for(var o=[],s=0;s<t.columns.length;s+=2)o.push([t.columns[s],t.columns[s+1]]);var c=i.select(this).selectAll("g."+e.LEGEND_ENTRY_CLASS).data(o),l=c.enter().append("g").classed(e.LEGEND_ENTRY_CLASS,!0).merge(c);l.append("path").attr("d",function(t,e){var n=t[0];return a.symbol()(n.data.name,r)(.6*n.height)(null)}).attr("transform",function(t,e){var i=t[0],o=n.rows[r].columns.indexOf(i);return"translate("+(n.getColumnBounds(r,o).topLeft.x+i.width/2)+", "+i.height/2+")"}).attr("fill",function(t){return a._colorScale.scale(t[0].data.name)}).attr("opacity",function(t,e){return a.symbolOpacity()(t[0].data.name,r)}).classed(e.LEGEND_SYMBOL_CLASS,!0),l.append("g").classed("text-container",!0).attr("transform",function(t,e){var i=t[1],o=n.rows[r].columns.indexOf(i);return"translate("+n.getColumnBounds(r,o).topLeft.x+", 0)"}).each(function(t,e,n){var r=i.select(this),o=t[1],s={xAlign:"left",yAlign:"top",textRotation:0};a._writer.write(a._formatter(o.data.name),o.width,a.height(),s,r.node())}),c.exit().remove()}),this},e.prototype.symbol=function(t){return null==t?this._symbolFactoryAccessor:(this._symbolFactoryAccessor=t,this.render(),this)},e.prototype.symbolOpacity=function(t){return null==t?this._symbolOpacityAccessor:(this._symbolOpacityAccessor="number"==typeof t?function(){return t}:t,this.render(),this)},e.prototype.fixedWidth=function(){return!0},e.prototype.fixedHeight=function(){return!0},e.prototype.invalidateCache=function(){this._measurer.reset()},e}(u.Component);d.LEGEND_ROW_CLASS="legend-row",d.LEGEND_ENTRY_CLASS="legend-entry",d.LEGEND_SYMBOL_CLASS="legend-symbol",e.Legend=d},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(2),o=n(0),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.entityNearest=function(t){var e,n=1/0;return this.components().forEach(function(r){var i=r.entityNearest(t);if(null!=i){var a=o.Math.distanceSquared(i.position,t);a<=n&&(n=a,e=i)}}),e},e.prototype.append=function(e){if(null!=e&&!(e instanceof i.Plot))throw new Error("Plot Group only accepts plots");return t.prototype.append.call(this,e),this},e}(n(38).Group);e.PlotGroup=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(0),a=function(t){function e(e){void 0===e&&(e=[]);var n=t.call(this)||this;return n._rowPadding=0,n._columnPadding=0,n._rows=[],n._rowWeights=[],n._columnWeights=[],n._nRows=0,n._nCols=0,n._calculatedLayout=null,n.addClass("table"),e.forEach(function(t,e){t.forEach(function(t,r){null!=t&&n.add(t,e,r)})}),n}return r(e,t),e.prototype._forEach=function(t){for(var e=0;e<this._nRows;e++)for(var n=0;n<this._nCols;n++)null!=this._rows[e][n]&&t(this._rows[e][n])},e.prototype.has=function(t){for(var e=0;e<this._nRows;e++)for(var n=0;n<this._nCols;n++)if(this._rows[e][n]===t)return!0;return!1},e.prototype.componentAt=function(t,e){return t<0||t>=this._nRows||e<0||e>=this._nCols?null:this._rows[t][e]},e.prototype.add=function(t,e,n){if(null==t)throw Error("Cannot add null to a table cell");if(!this.has(t)){if(null!=(this._rows[e]&&this._rows[e][n]))throw new Error("cell is occupied");t.detach(),this._nRows=Math.max(e+1,this._nRows),this._nCols=Math.max(n+1,this._nCols),this._padTableToSize(this._nRows,this._nCols),this._rows[e][n]=t,this._adoptAndAnchor(t),this.redraw()}return this},e.prototype._remove=function(t){for(var e=0;e<this._nRows;e++)for(var n=0;n<this._nCols;n++)if(this._rows[e][n]===t)return this._rows[e][n]=null,!0;return!1},e.prototype._iterateLayout=function(t,n,r){void 0===r&&(r=!1);for(var a,s,c,l,u,h=this._rows,p=i.transpose(this._rows),d=t-this._columnPadding*(this._nCols-1),_=n-this._rowPadding*(this._nRows-1),f=e._calcComponentWeights(this._rowWeights,h,function(t){return null==t||t.fixedHeight()}),y=e._calcComponentWeights(this._columnWeights,p,function(t){return null==t||t.fixedWidth()}),m=y.map(function(t){return 0===t?.5:t}),g=f.map(function(t){return 0===t?.5:t}),v=e._calcProportionalSpace(m,d),x=e._calcProportionalSpace(g,_),b=o.Array.createFilledArray(0,this._nCols),E=o.Array.createFilledArray(0,this._nRows),w=0;;){var A=o.Array.add(E,x),C=o.Array.add(b,v);b=(c=this._determineGuarantees(C,A,r)).guaranteedWidths,E=c.guaranteedHeights,l=c.wantsWidthArr.some(function(t){return t}),u=c.wantsHeightArr.some(function(t){return t});var S=a,T=s;a=d-i.sum(c.guaranteedWidths),s=_-i.sum(c.guaranteedHeights);var k=void 0;l?(k=c.wantsWidthArr.map(function(t){return t?.1:0}),k=o.Array.add(k,y)):k=y;var D=void 0;u?(D=c.wantsHeightArr.map(function(t){return t?.1:0}),D=o.Array.add(D,f)):D=f,v=e._calcProportionalSpace(k,a),x=e._calcProportionalSpace(D,s),w++;var P=a>0&&a!==S,L=s>0&&s!==T;if(!P&&!L)break;if(w>5)break}return a=d-i.sum(c.guaranteedWidths),s=_-i.sum(c.guaranteedHeights),v=e._calcProportionalSpace(y,a),x=e._calcProportionalSpace(f,s),{colProportionalSpace:v,rowProportionalSpace:x,guaranteedWidths:c.guaranteedWidths,guaranteedHeights:c.guaranteedHeights,wantsWidth:l,wantsHeight:u}},e.prototype._determineGuarantees=function(t,e,n){void 0===n&&(n=!1);var r=o.Array.createFilledArray(0,this._nCols),i=o.Array.createFilledArray(0,this._nRows),a=o.Array.createFilledArray(!1,this._nCols),s=o.Array.createFilledArray(!1,this._nRows);return this._rows.forEach(function(o,c){o.forEach(function(o,l){var u;u=null!=o?o.requestedSpace(t[l],e[c]):{minWidth:0,minHeight:0};var h=n?Math.min(u.minWidth,t[l]):u.minWidth;r[l]=Math.max(r[l],h);var p=n?Math.min(u.minHeight,e[c]):u.minHeight;i[c]=Math.max(i[c],p);var d=u.minWidth>t[l];a[l]=a[l]||d;var _=u.minHeight>e[c];s[c]=s[c]||_})}),{guaranteedWidths:r,guaranteedHeights:i,wantsWidthArr:a,wantsHeightArr:s}},e.prototype.requestedSpace=function(t,e){return this._calculatedLayout=this._iterateLayout(t,e),{minWidth:i.sum(this._calculatedLayout.guaranteedWidths),minHeight:i.sum(this._calculatedLayout.guaranteedHeights)}},e.prototype.computeLayout=function(e,n,r){var a=this;t.prototype.computeLayout.call(this,e,n,r);var s=i.sum(this._calculatedLayout.guaranteedWidths),c=i.sum(this._calculatedLayout.guaranteedHeights),l=this._calculatedLayout;(s>this.width()||c>this.height())&&(l=this._iterateLayout(this.width(),this.height(),!0));var u=0,h=o.Array.add(l.rowProportionalSpace,l.guaranteedHeights),p=o.Array.add(l.colProportionalSpace,l.guaranteedWidths);return this._rows.forEach(function(t,e){var n=0;t.forEach(function(t,r){null!=t&&t.computeLayout({x:n,y:u},p[r],h[e]),n+=p[r]+a._columnPadding}),u+=h[e]+a._rowPadding}),this},e.prototype.rowPadding=function(t){if(null==t)return this._rowPadding;if(!o.Math.isValidNumber(t)||t<0)throw Error("rowPadding must be a non-negative finite value");return this._rowPadding=t,this.redraw(),this},e.prototype.columnPadding=function(t){if(null==t)return this._columnPadding;if(!o.Math.isValidNumber(t)||t<0)throw Error("columnPadding must be a non-negative finite value");return this._columnPadding=t,this.redraw(),this},e.prototype.rowWeight=function(t,e){if(null==e)return this._rowWeights[t];if(!o.Math.isValidNumber(e)||e<0)throw Error("rowWeight must be a non-negative finite value");return this._rowWeights[t]=e,this.redraw(),this},e.prototype.columnWeight=function(t,e){if(null==e)return this._columnWeights[t];if(!o.Math.isValidNumber(e)||e<0)throw Error("columnWeight must be a non-negative finite value");return this._columnWeights[t]=e,this.redraw(),this},e.prototype.fixedWidth=function(){var t=i.transpose(this._rows);return e._fixedSpace(t,function(t){return null==t||t.fixedWidth()})},e.prototype.fixedHeight=function(){return e._fixedSpace(this._rows,function(t){return null==t||t.fixedHeight()})},e.prototype._padTableToSize=function(t,e){for(var n=0;n<t;n++){void 0===this._rows[n]&&(this._rows[n]=[],this._rowWeights[n]=null);for(r=0;r<e;r++)void 0===this._rows[n][r]&&(this._rows[n][r]=null)}for(var r=0;r<e;r++)void 0===this._columnWeights[r]&&(this._columnWeights[r]=null)},e._calcComponentWeights=function(t,e,n){return t.map(function(t,r){return null!=t?t:e[r].map(n).reduce(function(t,e){return t&&e},!0)?0:1})},e._calcProportionalSpace=function(t,e){var n=i.sum(t);return 0===n?o.Array.createFilledArray(0,t.length):t.map(function(t){return e*t/n})},e._fixedSpace=function(t,e){var n=function(t){return t.reduce(function(t,e){return t&&e},!0)};return n(t.map(function(t){return n(t.map(e))}))},e}(n(27).ComponentContainer);e.Table=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){var e=t.call(this)||this;return e.addClass("x-drag-box-layer"),e._hasCorners=!1,e}return r(e,t),e.prototype.computeLayout=function(e,n,r){return t.prototype.computeLayout.call(this,e,n,r),this._setBounds(this.bounds()),this},e.prototype._setBounds=function(e){t.prototype._setBounds.call(this,{topLeft:{x:e.topLeft.x,y:0},bottomRight:{x:e.bottomRight.x,y:this.height()}})},e.prototype._setResizableClasses=function(t){t&&this.enabled()?this.addClass("x-resizable"):this.removeClass("x-resizable")},e.prototype.yScale=function(e){if(null==e)return t.prototype.yScale.call(this);throw new Error("yScales cannot be set on an XDragBoxLayer")},e.prototype.yExtent=function(e){if(null==e)return t.prototype.yExtent.call(this);throw new Error("XDragBoxLayer has no yExtent")},e}(n(30).DragBoxLayer);e.XDragBoxLayer=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){var e=t.call(this)||this;return e.addClass("y-drag-box-layer"),e._hasCorners=!1,e}return r(e,t),e.prototype.computeLayout=function(e,n,r){return t.prototype.computeLayout.call(this,e,n,r),this._setBounds(this.bounds()),this},e.prototype._setBounds=function(e){t.prototype._setBounds.call(this,{topLeft:{x:0,y:e.topLeft.y},bottomRight:{x:this.width(),y:e.bottomRight.y}})},e.prototype._setResizableClasses=function(t){t&&this.enabled()?this.addClass("y-resizable"):this.removeClass("y-resizable")},e.prototype.xScale=function(e){if(null==e)return t.prototype.xScale.call(this);throw new Error("xScales cannot be set on an YDragBoxLayer")},e.prototype.xExtent=function(e){if(null==e)return t.prototype.xExtent.call(this);throw new Error("YDragBoxLayer has no xExtent")},e}(n(30).DragBoxLayer);e.YDragBoxLayer=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){var n=t.call(this)||this;return n._eventToProcessingFunction[e._KEYDOWN_EVENT_NAME]=function(t){return n._processKeydown(t)},n._eventToProcessingFunction[e._KEYUP_EVENT_NAME]=function(t){return n._processKeyup(t)},n}return r(e,t),e.getDispatcher=function(){var t=document[e._DISPATCHER_KEY];return null==t&&(t=new e,document[e._DISPATCHER_KEY]=t),t},e.prototype._processKeydown=function(t){this._callCallbacksForEvent(e._KEYDOWN_EVENT_NAME,t.keyCode,t)},e.prototype._processKeyup=function(t){this._callCallbacksForEvent(e._KEYUP_EVENT_NAME,t.keyCode,t)},e.prototype.onKeyDown=function(t){return this._addCallbackForEvent(e._KEYDOWN_EVENT_NAME,t),this},e.prototype.offKeyDown=function(t){return this._removeCallbackForEvent(e._KEYDOWN_EVENT_NAME,t),this},e.prototype.onKeyUp=function(t){return this._addCallbackForEvent(e._KEYUP_EVENT_NAME,t),this},e.prototype.offKeyUp=function(t){return this._removeCallbackForEvent(e._KEYUP_EVENT_NAME,t),this},e}(n(23).Dispatcher);i._DISPATCHER_KEY="__Plottable_Dispatcher_Key",i._KEYDOWN_EVENT_NAME="keydown",i._KEYUP_EVENT_NAME="keyup",e.Key=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(0),o=function(t){function e(n){var r=t.call(this)||this;r._translator=i.getTranslator(n),r._lastMousePosition={x:-1,y:-1};var o=function(t){return r._measureAndDispatch(n,t,e._MOUSEMOVE_EVENT_NAME,"page")};return r._eventToProcessingFunction[e._MOUSEOVER_EVENT_NAME]=o,r._eventToProcessingFunction[e._MOUSEMOVE_EVENT_NAME]=o,r._eventToProcessingFunction[e._MOUSEOUT_EVENT_NAME]=o,r._eventToProcessingFunction[e._MOUSEDOWN_EVENT_NAME]=function(t){return r._measureAndDispatch(n,t,e._MOUSEDOWN_EVENT_NAME)},r._eventToProcessingFunction[e._MOUSEUP_EVENT_NAME]=function(t){return r._measureAndDispatch(n,t,e._MOUSEUP_EVENT_NAME,"page")},r._eventToProcessingFunction[e._WHEEL_EVENT_NAME]=function(t){return r._measureAndDispatch(n,t,e._WHEEL_EVENT_NAME)},r._eventToProcessingFunction[e._DBLCLICK_EVENT_NAME]=function(t){return r._measureAndDispatch(n,t,e._DBLCLICK_EVENT_NAME)},r}return r(e,t),e.getDispatcher=function(t){var n=t.root().rootElement(),r=n[e._DISPATCHER_KEY];return null==r&&(r=new e(t),n[e._DISPATCHER_KEY]=r),r},e.prototype.onMouseMove=function(t){return this._addCallbackForEvent(e._MOUSEMOVE_EVENT_NAME,t),this},e.prototype.offMouseMove=function(t){return this._removeCallbackForEvent(e._MOUSEMOVE_EVENT_NAME,t),this},e.prototype.onMouseDown=function(t){return this._addCallbackForEvent(e._MOUSEDOWN_EVENT_NAME,t),this},e.prototype.offMouseDown=function(t){return this._removeCallbackForEvent(e._MOUSEDOWN_EVENT_NAME,t),this},e.prototype.onMouseUp=function(t){return this._addCallbackForEvent(e._MOUSEUP_EVENT_NAME,t),this},e.prototype.offMouseUp=function(t){return this._removeCallbackForEvent(e._MOUSEUP_EVENT_NAME,t),this},e.prototype.onWheel=function(t){return this._addCallbackForEvent(e._WHEEL_EVENT_NAME,t),this},e.prototype.offWheel=function(t){return this._removeCallbackForEvent(e._WHEEL_EVENT_NAME,t),this},e.prototype.onDblClick=function(t){return this._addCallbackForEvent(e._DBLCLICK_EVENT_NAME,t),this},e.prototype.offDblClick=function(t){return this._removeCallbackForEvent(e._DBLCLICK_EVENT_NAME,t),this},e.prototype._measureAndDispatch=function(t,e,n,r){if(void 0===r&&(r="element"),"page"!==r&&"element"!==r)throw new Error("Invalid scope '"+r+"', must be 'element' or 'page'");if("page"===r||this.eventInside(t,e)){var i=this._translator.computePosition(e.clientX,e.clientY);null!=i&&(this._lastMousePosition=i,this._callCallbacksForEvent(n,this.lastMousePosition(),e))}},e.prototype.eventInside=function(t,e){return this._translator.isInside(t,e)},e.prototype.lastMousePosition=function(){return this._lastMousePosition},e}(n(23).Dispatcher);o._DISPATCHER_KEY="__Plottable_Dispatcher_Mouse",o._MOUSEOVER_EVENT_NAME="mouseover",o._MOUSEMOVE_EVENT_NAME="mousemove",o._MOUSEOUT_EVENT_NAME="mouseout",o._MOUSEDOWN_EVENT_NAME="mousedown",o._MOUSEUP_EVENT_NAME="mouseup",o._WHEEL_EVENT_NAME="wheel",o._DBLCLICK_EVENT_NAME="dblclick",e.Mouse=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(0),o=function(t){function e(n){var r=t.call(this)||this;return r._translator=i.getTranslator(n),r._eventToProcessingFunction[e._TOUCHSTART_EVENT_NAME]=function(t){return r._measureAndDispatch(n,t,e._TOUCHSTART_EVENT_NAME,"page")},r._eventToProcessingFunction[e._TOUCHMOVE_EVENT_NAME]=function(t){return r._measureAndDispatch(n,t,e._TOUCHMOVE_EVENT_NAME,"page")},r._eventToProcessingFunction[e._TOUCHEND_EVENT_NAME]=function(t){return r._measureAndDispatch(n,t,e._TOUCHEND_EVENT_NAME,"page")},r._eventToProcessingFunction[e._TOUCHCANCEL_EVENT_NAME]=function(t){return r._measureAndDispatch(n,t,e._TOUCHCANCEL_EVENT_NAME,"page")},r}return r(e,t),e.getDispatcher=function(t){var n=t.root().rootElement(),r=n[e._DISPATCHER_KEY];return null==r&&(r=new e(t),n[e._DISPATCHER_KEY]=r),r},e.prototype.onTouchStart=function(t){return this._addCallbackForEvent(e._TOUCHSTART_EVENT_NAME,t),this},e.prototype.offTouchStart=function(t){return this._removeCallbackForEvent(e._TOUCHSTART_EVENT_NAME,t),this},e.prototype.onTouchMove=function(t){return this._addCallbackForEvent(e._TOUCHMOVE_EVENT_NAME,t),this},e.prototype.offTouchMove=function(t){return this._removeCallbackForEvent(e._TOUCHMOVE_EVENT_NAME,t),this},e.prototype.onTouchEnd=function(t){return this._addCallbackForEvent(e._TOUCHEND_EVENT_NAME,t),this},e.prototype.offTouchEnd=function(t){return this._removeCallbackForEvent(e._TOUCHEND_EVENT_NAME,t),this},e.prototype.onTouchCancel=function(t){return this._addCallbackForEvent(e._TOUCHCANCEL_EVENT_NAME,t),this},e.prototype.offTouchCancel=function(t){return this._removeCallbackForEvent(e._TOUCHCANCEL_EVENT_NAME,t),this},e.prototype._measureAndDispatch=function(t,e,n,r){if(void 0===r&&(r="element"),"page"!==r&&"element"!==r)throw new Error("Invalid scope '"+r+"', must be 'element' or 'page'");if("element"!==r||this.eventInside(t,e)){for(var i=e.changedTouches,o={},a=[],s=0;s<i.length;s++){var c=i[s],l=c.identifier,u=this._translator.computePosition(c.clientX,c.clientY);null!=u&&(o[l]=u,a.push(l))}a.length>0&&this._callCallbacksForEvent(n,a,o,e)}},e.prototype.eventInside=function(t,e){return this._translator.isInside(t,e)},e}(n(23).Dispatcher);o._DISPATCHER_KEY="__Plottable_Dispatcher_Touch",o._TOUCHSTART_EVENT_NAME="touchstart",o._TOUCHMOVE_EVENT_NAME="touchmove",o._TOUCHEND_EVENT_NAME="touchend",o._TOUCHCANCEL_EVENT_NAME="touchcancel",e.Touch=o},function(t,e,n){"use strict";var r=function(){function t(e,n,r){void 0===r&&(r=window.devicePixelRatio),this.screenWidth=e,this.screenHeight=n,this.devicePixelRatio=r,this.pixelWidth=e*r,this.pixelHeight=n*r,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),t.sizePixels(this.ctx,e,n,r)}return t.sizePixels=function(t,e,n,r){var i=t.canvas;i.width=e*r,i.height=n*r,i.style.width=e+"px",i.style.height=n+"px",t.setTransform(1,0,0,1,0,0),t.scale(r,r)},t.prototype.blit=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),t.drawImage(this.canvas,e,n,this.screenWidth,this.screenHeight)},t.prototype.blitCenter=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),this.blit(t,Math.floor(e-this.screenWidth/2),Math.floor(n-this.screenHeight/2))},t.prototype.resize=function(e,n,r){void 0===r&&(r=!1);var i=this.devicePixelRatio;return this.screenWidth=e,this.screenHeight=n,this.pixelWidth=e*i,this.pixelHeight=n*i,t.sizePixels(this.ctx,e,n,i),r&&this.ctx.translate(e/2,e/2),this},t.prototype.clear=function(t){var e=this,n=e.pixelWidth,r=e.pixelHeight,i=e.ctx;return i.save(),i.setTransform(1,0,0,1,0,0),null==t?i.clearRect(0,0,n,r):(i.fillStyle=t,i.fillRect(0,0,n,r)),i.restore(),this},t.prototype.getImageData=function(){return this.ctx.getImageData(0,0,this.pixelWidth,this.pixelHeight)},t}();e.CanvasBuffer=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(13),o=n(0),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._clickedDown=!1,e._doubleClicking=!1,e._onClickCallbacks=new o.CallbackSet,e._onDoubleClickCallbacks=new o.CallbackSet,e._mouseDownCallback=function(t,n){return e._handleClickDown(t,n)},e._mouseUpCallback=function(t,n){return e._handleClickUp(t,n)},e._dblClickCallback=function(t,n){return e._handleDblClick(t,n)},e._touchStartCallback=function(t,n,r){return e._handleClickDown(n[t[0]],r)},e._touchEndCallback=function(t,n,r){return e._handleClickUp(n[t[0]],r)},e._touchCancelCallback=function(t,n){return e._clickedDown=!1},e}return r(e,t),e.prototype._anchor=function(e){t.prototype._anchor.call(this,e),this._mouseDispatcher=i.Mouse.getDispatcher(e),this._mouseDispatcher.onMouseDown(this._mouseDownCallback),this._mouseDispatcher.onMouseUp(this._mouseUpCallback),this._mouseDispatcher.onDblClick(this._dblClickCallback),this._touchDispatcher=i.Touch.getDispatcher(e),this._touchDispatcher.onTouchStart(this._touchStartCallback),this._touchDispatcher.onTouchEnd(this._touchEndCallback),this._touchDispatcher.onTouchCancel(this._touchCancelCallback)},e.prototype._unanchor=function(){t.prototype._unanchor.call(this),this._mouseDispatcher.offMouseDown(this._mouseDownCallback),this._mouseDispatcher.offMouseUp(this._mouseUpCallback),this._mouseDispatcher.offDblClick(this._dblClickCallback),this._mouseDispatcher=null,this._touchDispatcher.offTouchStart(this._touchStartCallback),this._touchDispatcher.offTouchEnd(this._touchEndCallback),this._touchDispatcher.offTouchCancel(this._touchCancelCallback),this._touchDispatcher=null},e.prototype._handleClickDown=function(t,e){var n=this._translateToComponentSpace(t);this._isInsideComponent(n)&&(this._clickedDown=!0,this._clickedPoint=n)},e.prototype._handleClickUp=function(t,n){var r=this,i=this._translateToComponentSpace(t);this._clickedDown&&e._pointsEqual(i,this._clickedPoint)&&setTimeout(function(){r._doubleClicking||r._onClickCallbacks.callCallbacks(i,n)},0),this._clickedDown=!1},e.prototype._handleDblClick=function(t,e){var n=this,r=this._translateToComponentSpace(t);this._doubleClicking=!0,this._onDoubleClickCallbacks.callCallbacks(r,e),setTimeout(function(){return n._doubleClicking=!1},0)},e._pointsEqual=function(t,e){return t.x===e.x&&t.y===e.y},e.prototype.onClick=function(t){return this._onClickCallbacks.add(t),this},e.prototype.offClick=function(t){return this._onClickCallbacks.delete(t),this},e.prototype.onDoubleClick=function(t){return this._onDoubleClickCallbacks.add(t),this},e.prototype.offDoubleClick=function(t){return this._onDoubleClickCallbacks.delete(t),this},e}(n(15).Interaction);e.Click=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(13),o=n(0),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._dragging=!1,e._constrainedToComponent=!0,e._dragStartCallbacks=new o.CallbackSet,e._dragCallbacks=new o.CallbackSet,e._dragEndCallbacks=new o.CallbackSet,e._mouseDownCallback=function(t,n){return e._startDrag(t,n)},e._mouseMoveCallback=function(t,n){return e._doDrag(t,n)},e._mouseUpCallback=function(t,n){return e._endDrag(t,n)},e._touchStartCallback=function(t,n,r){return e._startDrag(n[t[0]],r)},e._touchMoveCallback=function(t,n,r){return e._doDrag(n[t[0]],r)},e._touchEndCallback=function(t,n,r){return e._endDrag(n[t[0]],r)},e}return r(e,t),e.prototype._anchor=function(e){t.prototype._anchor.call(this,e),this._mouseDispatcher=i.Mouse.getDispatcher(this._componentAttachedTo),this._mouseDispatcher.onMouseDown(this._mouseDownCallback),this._mouseDispatcher.onMouseMove(this._mouseMoveCallback),this._mouseDispatcher.onMouseUp(this._mouseUpCallback),this._touchDispatcher=i.Touch.getDispatcher(this._componentAttachedTo),this._touchDispatcher.onTouchStart(this._touchStartCallback),this._touchDispatcher.onTouchMove(this._touchMoveCallback),this._touchDispatcher.onTouchEnd(this._touchEndCallback)},e.prototype._unanchor=function(){t.prototype._unanchor.call(this),this._mouseDispatcher.offMouseDown(this._mouseDownCallback),this._mouseDispatcher.offMouseMove(this._mouseMoveCallback),this._mouseDispatcher.offMouseUp(this._mouseUpCallback),this._mouseDispatcher=null,this._touchDispatcher.offTouchStart(this._touchStartCallback),this._touchDispatcher.offTouchMove(this._touchMoveCallback),this._touchDispatcher.offTouchEnd(this._touchEndCallback),this._touchDispatcher=null},e.prototype._translateAndConstrain=function(t){var e=this._translateToComponentSpace(t);return this._constrainedToComponent?{x:o.Math.clamp(e.x,0,this._componentAttachedTo.width()),y:o.Math.clamp(e.y,0,this._componentAttachedTo.height())}:e},e.prototype._startDrag=function(t,e){if(!(e instanceof MouseEvent&&0!==e.button)){var n=this._translateToComponentSpace(t);this._isInsideComponent(n)&&(e.preventDefault(),this._dragging=!0,this._dragOrigin=n,this._dragStartCallbacks.callCallbacks(this._dragOrigin))}},e.prototype._doDrag=function(t,e){this._dragging&&this._dragCallbacks.callCallbacks(this._dragOrigin,this._translateAndConstrain(t))},e.prototype._endDrag=function(t,e){e instanceof MouseEvent&&0!==e.button||this._dragging&&(this._dragging=!1,this._dragEndCallbacks.callCallbacks(this._dragOrigin,this._translateAndConstrain(t)))},e.prototype.constrainedToComponent=function(t){return null==t?this._constrainedToComponent:(this._constrainedToComponent=t,this)},e.prototype.onDragStart=function(t){return this._dragStartCallbacks.add(t),this},e.prototype.offDragStart=function(t){return this._dragStartCallbacks.delete(t),this},e.prototype.onDrag=function(t){return this._dragCallbacks.add(t),this},e.prototype.offDrag=function(t){return this._dragCallbacks.delete(t),this},e.prototype.onDragEnd=function(t){return this._dragEndCallbacks.add(t),this},e.prototype.offDragEnd=function(t){return this._dragEndCallbacks.delete(t),this},e}(n(15).Interaction);e.Drag=a},function(t,e,n){"use strict";function r(t,e,n){return n-(n-t)*e}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(1),a=n(13),s=n(3),c=n(0),l=n(14),u=n(15);e.zoomAt=r;var h=function(t){function e(e,n){var r=t.call(this)||this;return r._wheelCallback=function(t,e){return r._handleWheelEvent(t,e)},r._touchStartCallback=function(t,e,n){return r._handleTouchStart(t,e,n)},r._touchMoveCallback=function(t,e,n){return r._handlePinch(t,e,n)},r._touchEndCallback=function(t,e,n){return r._handleTouchEnd(t,e,n)},r._touchCancelCallback=function(t,e,n){return r._handleTouchEnd(t,e,n)},r._panEndCallbacks=new c.CallbackSet,r._zoomEndCallbacks=new c.CallbackSet,r._xScales=new c.Set,r._yScales=new c.Set,r._dragInteraction=new l.Drag,r._setupDragInteraction(),r._touchIds=o.map(),r._minDomainExtents=new c.Map,r._maxDomainExtents=new c.Map,r._minDomainValues=new c.Map,r._maxDomainValues=new c.Map,null!=e&&r.addXScale(e),null!=n&&r.addYScale(n),r}return i(e,t),e.prototype.pan=function(t){var e=this;this.xScales().forEach(function(n){n.pan(e._constrainedTranslation(n,t.x))}),this.yScales().forEach(function(n){n.pan(e._constrainedTranslation(n,t.y))})},e.prototype.zoom=function(t,e){this.xScales().forEach(function(n){var r=n.range(),i=void 0===e?(r[1]-r[0])/2:e.x;n.zoom(t,i)}),this.yScales().forEach(function(n){var r=n.range(),i=void 0===e?(r[1]-r[0])/2:e.y;n.zoom(t,i)})},e.prototype._anchor=function(e){t.prototype._anchor.call(this,e),this._dragInteraction.attachTo(e),this._mouseDispatcher=a.Mouse.getDispatcher(this._componentAttachedTo),this._mouseDispatcher.onWheel(this._wheelCallback),this._touchDispatcher=a.Touch.getDispatcher(this._componentAttachedTo),this._touchDispatcher.onTouchStart(this._touchStartCallback),this._touchDispatcher.onTouchMove(this._touchMoveCallback),this._touchDispatcher.onTouchEnd(this._touchEndCallback),this._touchDispatcher.onTouchCancel(this._touchCancelCallback)},e.prototype._unanchor=function(){t.prototype._unanchor.call(this),this._mouseDispatcher.offWheel(this._wheelCallback),this._mouseDispatcher=null,this._touchDispatcher.offTouchStart(this._touchStartCallback),this._touchDispatcher.offTouchMove(this._touchMoveCallback),this._touchDispatcher.offTouchEnd(this._touchEndCallback),this._touchDispatcher.offTouchCancel(this._touchCancelCallback),this._touchDispatcher=null,this._dragInteraction.detach()},e.prototype._handleTouchStart=function(t,e,n){for(var r=0;r<t.length&&this._touchIds.size()<2;r++){var i=t[r];this._touchIds.set(i.toString(),this._translateToComponentSpace(e[i]))}},e.prototype._handlePinch=function(t,n,r){var i=this;if(!(this._touchIds.size()<2)){var o=this._touchIds.values();if(this._isInsideComponent(this._translateToComponentSpace(o[0]))&&this._isInsideComponent(this._translateToComponentSpace(o[1]))){var a=e._pointDistance(o[0],o[1]);if(0!==a){t.forEach(function(t){i._touchIds.has(t.toString())&&i._touchIds.set(t.toString(),i._translateToComponentSpace(n[t]))});var s=this._touchIds.values(),c=e._pointDistance(s[0],s[1]);if(0!==c){var l=a/c,u=s.map(function(t,e){return{x:(t.x-o[e].x)/l,y:(t.y-o[e].y)/l}}),h=e.centerPoint(o[0],o[1]),p=h.x,d=h.y;this.xScales().forEach(function(t){var e=i._constrainedZoom(t,l,p);p=e.centerPoint,l=e.zoomAmount}),this.yScales().forEach(function(t){var e=i._constrainedZoom(t,l,d);d=e.centerPoint,l=e.zoomAmount});var _=o.map(function(t,e){return{x:u[e].x*l+t.x,y:u[e].y*l+t.y}}),f={x:p-(_[0].x+_[1].x)/2,y:d-(_[0].y+_[1].y)/2};this.zoom(l,{x:p,y:d}),this.pan(f)}}}}},e.centerPoint=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y);return{x:(n+r)/2,y:(Math.max(t.y,e.y)+i)/2}},e._pointDistance=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y);return Math.sqrt(Math.pow(r-n,2)+Math.pow(o-i,2))},e.prototype._handleTouchEnd=function(t,e,n){var r=this;t.forEach(function(t){r._touchIds.remove(t.toString())}),this._touchIds.size()>0&&this._zoomEndCallbacks.callCallbacks()},e.prototype._handleWheelEvent=function(t,n){var r=this,i=this._translateToComponentSpace(t);if(this._isInsideComponent(i)){n.preventDefault();var o=n.deltaY*(n.deltaMode?e._PIXELS_PER_LINE:1),a=Math.pow(2,.002*o),s=i.x,c=i.y;this.xScales().forEach(function(t){var e=r._constrainedZoom(t,a,s);s=e.centerPoint,a=e.zoomAmount}),this.yScales().forEach(function(t){var e=r._constrainedZoom(t,a,c);c=e.centerPoint,a=e.zoomAmount}),this.zoom(a,{x:s,y:c}),this._zoomEndCallbacks.callCallbacks()}},e.prototype._isRangeReversed=function(t){var e=t.range();return e[1]<e[0]},e.prototype._constrainedZoom=function(t,e,n){return e=this._constrainZoomExtents(t,e),this._constrainZoomValues(t,e,n)},e.prototype._constrainZoomExtents=function(t,e){var n=e>1,r=n?this.maxDomainExtent(t):this.minDomainExtent(t);if(null==r)return e;var i=t.getTransformationDomain(),o=i[0],a=i[1],s=Math.abs(a-o);return(n?Math.min:Math.max)(e,r/s)},e.prototype._constrainZoomValues=function(t,e,n){if(e<=1)return{centerPoint:n,zoomAmount:e};var i=this._isRangeReversed(t),o=this.minDomainValue(t),a=this.maxDomainValue(t);if(null==o&&null==a)return{centerPoint:n,zoomAmount:e};var s=t.getTransformationDomain(),c=s[0],l=s[1];if(null!=a){u=t.scaleTransformation(a);(p=r(h=t.scaleTransformation(l),e,n))>u!=i&&(n=this._getZoomCenterForTarget(h,e,u))}if(null!=o){d=t.scaleTransformation(o);(f=r(_=t.scaleTransformation(c),e,n))<d!=i&&(n=this._getZoomCenterForTarget(_,e,d))}if(null!=a&&null!=a){var u=t.scaleTransformation(a),h=t.scaleTransformation(l),p=r(h,e,n),d=t.scaleTransformation(o),_=t.scaleTransformation(c),f=r(_,e,n);if(p>u!=i||f<d!=i){var y=h-_+d-u;0===y?(n=(h+_)/2,e=1):(n=(h*d-_*u)/y,e=(u-d)/(h-_))}}return{centerPoint:n,zoomAmount:e}},e.prototype._getZoomCenterForTarget=function(t,e,n){return(t*e-n)/(e-1)},e.prototype._setupDragInteraction=function(){var t=this;this._dragInteraction.constrainedToComponent(!1);var e;this._dragInteraction.onDragStart(function(){return e=null}),this._dragInteraction.onDrag(function(n,r){if(!(t._touchIds.size()>=2)){var i={x:(null==e?n.x:e.x)-r.x,y:(null==e?n.y:e.y)-r.y};t.pan(i),e=r}}),this._dragInteraction.onDragEnd(function(){return t._panEndCallbacks.callCallbacks()})},e.prototype._constrainedTranslation=function(t,e){var n=t.getTransformationDomain(),r=n[0],i=n[1],o=this._isRangeReversed(t);if(e>0!==o){if(null!=(c=this.maxDomainValue(t))){var a=t.scaleTransformation(i),s=t.scaleTransformation(c);e=(o?Math.max:Math.min)(a+e,s)-a}}else{var c=this.minDomainValue(t);if(null!=c){var l=t.scaleTransformation(r),u=t.scaleTransformation(c);e=(o?Math.min:Math.max)(l+e,u)-l}}return e},e.prototype._nonLinearScaleWithExtents=function(t){return!(null==this.minDomainExtent(t)||null==this.maxDomainExtent(t)||t instanceof s.Linear||t instanceof s.Time)},e.prototype.xScales=function(t){var e=this;if(null==t){var n=[];return this._xScales.forEach(function(t){n.push(t)}),n}return this._xScales=new c.Set,t.forEach(function(t){e.addXScale(t)}),this},e.prototype.yScales=function(t){var e=this;if(null==t){var n=[];return this._yScales.forEach(function(t){n.push(t)}),n}return this._yScales=new c.Set,t.forEach(function(t){e.addYScale(t)}),this},e.prototype.addXScale=function(t){return this._xScales.add(t),this},e.prototype.removeXScale=function(t){return this._xScales.delete(t),this._minDomainExtents.delete(t),this._maxDomainExtents.delete(t),this._minDomainValues.delete(t),this._maxDomainValues.delete(t),this},e.prototype.addYScale=function(t){return this._yScales.add(t),this},e.prototype.removeYScale=function(t){return this._yScales.delete(t),this._minDomainExtents.delete(t),this._maxDomainExtents.delete(t),this._minDomainValues.delete(t),this._maxDomainValues.delete(t),this},e.prototype.minDomainExtent=function(t,e){if(null==e)return this._minDomainExtents.get(t);if(e.valueOf()<0)throw new Error("extent must be non-negative");var n=this.maxDomainExtent(t);if(null!=n&&n.valueOf()<e.valueOf())throw new Error("minDomainExtent must be smaller than maxDomainExtent for the same Scale");return this._nonLinearScaleWithExtents(t)&&c.Window.warn("Panning and zooming with extents on a nonlinear scale may have unintended behavior."),this._minDomainExtents.set(t,e),this},e.prototype.maxDomainExtent=function(t,e){if(null==e)return this._maxDomainExtents.get(t);if(e.valueOf()<=0)throw new Error("extent must be positive");var n=this.minDomainExtent(t);if(null!=n&&e.valueOf()<n.valueOf())throw new Error("maxDomainExtent must be larger than minDomainExtent for the same Scale");return this._nonLinearScaleWithExtents(t)&&c.Window.warn("Panning and zooming with extents on a nonlinear scale may have unintended behavior."),this._maxDomainExtents.set(t,e),this},e.prototype.minDomainValue=function(t,e){return null==e?this._minDomainValues.get(t):(this._minDomainValues.set(t,e),this)},e.prototype.maxDomainValue=function(t,e){return null==e?this._maxDomainValues.get(t):(this._maxDomainValues.set(t,e),this)},e.prototype.setMinMaxDomainValuesTo=function(t){this._minDomainValues.delete(t),this._maxDomainValues.delete(t);var e=t.getTransformationDomain(),n=e[0],r=e[1];return this.minDomainValue(t,n),this.maxDomainValue(t,r),this},e.prototype.onPanEnd=function(t){return this._panEndCallbacks.add(t),this},e.prototype.offPanEnd=function(t){return this._panEndCallbacks.delete(t),this},e.prototype.onZoomEnd=function(t){return this._zoomEndCallbacks.add(t),this},e.prototype.offZoomEnd=function(t){return this._zoomEndCallbacks.delete(t),this},e}(u.Interaction);h._PIXELS_PER_LINE=120,e.PanZoom=h},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(13),o=n(0),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._overComponent=!1,e._pointerEnterCallbacks=new o.CallbackSet,e._pointerMoveCallbacks=new o.CallbackSet,e._pointerExitCallbacks=new o.CallbackSet,e._mouseMoveCallback=function(t,n){return e._handleMouseEvent(t,n)},e._touchStartCallback=function(t,n,r){return e._handleTouchEvent(n[t[0]],r)},e}return r(e,t),e.prototype._anchor=function(e){t.prototype._anchor.call(this,e),this._mouseDispatcher=i.Mouse.getDispatcher(this._componentAttachedTo),this._mouseDispatcher.onMouseMove(this._mouseMoveCallback),this._touchDispatcher=i.Touch.getDispatcher(this._componentAttachedTo),this._touchDispatcher.onTouchStart(this._touchStartCallback)},e.prototype._unanchor=function(){t.prototype._unanchor.call(this),this._mouseDispatcher.offMouseMove(this._mouseMoveCallback),this._mouseDispatcher=null,this._touchDispatcher.offTouchStart(this._touchStartCallback),this._touchDispatcher=null},e.prototype._handleMouseEvent=function(t,e){var n=this._mouseDispatcher.eventInside(this._componentAttachedTo,e);this._handlePointerEvent(t,n)},e.prototype._handleTouchEvent=function(t,e){var n=this._touchDispatcher.eventInside(this._componentAttachedTo,e);this._handlePointerEvent(t,n)},e.prototype._handlePointerEvent=function(t,e){var n=this._translateToComponentSpace(t),r=this._isInsideComponent(n);r&&e?(this._overComponent||this._pointerEnterCallbacks.callCallbacks(n),this._pointerMoveCallbacks.callCallbacks(n)):this._overComponent&&this._pointerExitCallbacks.callCallbacks(n),this._overComponent=r&&e},e.prototype.onPointerEnter=function(t){return this._pointerEnterCallbacks.add(t),this},e.prototype.offPointerEnter=function(t){return this._pointerEnterCallbacks.delete(t),this},e.prototype.onPointerMove=function(t){return this._pointerMoveCallbacks.add(t),this},e.prototype.offPointerMove=function(t){return this._pointerMoveCallbacks.delete(t),this},e.prototype.onPointerExit=function(t){return this._pointerExitCallbacks.add(t),this},e.prototype.offPointerExit=function(t){return this._pointerExitCallbacks.delete(t),this},e}(n(15).Interaction);e.Pointer=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(3),o=n(0),a=n(24),s=n(2),c=function(t){function e(e){void 0===e&&(e="vertical");var n=t.call(this,e)||this;return n._clusterOffsets=new o.Map,n}return r(e,t),e.prototype._generateAttrToProjector=function(){var e=this,n=t.prototype._generateAttrToProjector.call(this),r=this._makeInnerScale(),i=function(t,e){return r.rangeBand()};n.width=this._isVertical?i:n.width,n.height=this._isVertical?n.height:i;var o=n.x,a=n.y;return n.x=this._isVertical?function(t,n,r){return o(t,n,r)+e._clusterOffsets.get(r)}:function(t,e,n){return o(t,e,n)},n.y=this._isVertical?function(t,e,n){return a(t,e,n)}:function(t,n,r){return a(t,n,r)+e._clusterOffsets.get(r)},n},e.prototype._updateClusterPosition=function(){var t=this,e=this._makeInnerScale();this.datasets().forEach(function(n,r){return t._clusterOffsets.set(n,e.scale(String(r))-e.rangeBand()/2)})},e.prototype._makeInnerScale=function(){var t=new i.Category;t.domain(this.datasets().map(function(t,e){return String(e)}));var e=s.Plot._scaledAccessor(this.attr(a.Bar._BAR_THICKNESS_KEY));return t.range([0,e(null,0,null)]),t},e.prototype._getDataToDraw=function(){return this._updateClusterPosition(),t.prototype._getDataToDraw.call(this)},e}(a.Bar);e.ClusteredBar=c},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(5),a=n(7),s=n(8),c=n(3),l=n(0),u=n(41),h=n(42),p=n(6),d=n(25),_=n(2),f=function(t){function e(){var e=t.call(this)||this;return e._startAngle=0,e._endAngle=2*Math.PI,e._labelFormatter=s.identity(),e._labelsEnabled=!1,e.innerRadius(0),e.outerRadius(function(){var t=e._pieCenter();return Math.min(Math.max(e.width()-t.x,t.x),Math.max(e.height()-t.y,t.y))}),e.addClass("pie-plot"),e.attr("fill",function(t,e){return String(e)},new c.Color),e._strokeDrawers=new l.Map,e}return r(e,t),e.prototype._setup=function(){var e=this;t.prototype._setup.call(this),this._strokeDrawers.forEach(function(t){return t.attachTo(e._renderArea)})},e.prototype.computeLayout=function(e,n,r){t.prototype.computeLayout.call(this,e,n,r);var i=this._pieCenter();this._renderArea.attr("transform","translate("+i.x+","+i.y+")");var o=Math.min(Math.max(this.width()-i.x,i.x),Math.max(this.height()-i.y,i.y));return null!=this.innerRadius().scale&&this.innerRadius().scale.range([0,o]),null!=this.outerRadius().scale&&this.outerRadius().scale.range([0,o]),this},e.prototype.addDataset=function(e){return t.prototype.addDataset.call(this,e),this},e.prototype._addDataset=function(e){if(1===this.datasets().length)return l.Window.warn("Only one dataset is supported in Pie plots"),this;this._updatePieAngles();var n=new h.ArcOutlineSVGDrawer;return this._isSetup&&n.attachTo(this._renderArea),this._strokeDrawers.set(e,n),t.prototype._addDataset.call(this,e),this},e.prototype.removeDataset=function(e){return t.prototype.removeDataset.call(this,e),this},e.prototype._removeDatasetNodes=function(e){t.prototype._removeDatasetNodes.call(this,e),this._strokeDrawers.get(e).remove()},e.prototype._removeDataset=function(e){return t.prototype._removeDataset.call(this,e),this._startAngles=[],this._endAngles=[],this},e.prototype.selections=function(e){var n=this;void 0===e&&(e=this.datasets());var r=t.prototype.selections.call(this,e).nodes();return e.forEach(function(t){var e=n._strokeDrawers.get(t);null!=e&&r.push.apply(r,e.getVisualPrimitives())}),i.selectAll(r)},e.prototype._onDatasetUpdate=function(){t.prototype._onDatasetUpdate.call(this),this._updatePieAngles(),this.render()},e.prototype._createDrawer=function(){return new p.ProxyDrawer(function(){return new u.ArcSVGDrawer},function(){d.warn("canvas renderer is not supported on Pie Plot!")})},e.prototype.entities=function(e){var n=this;return void 0===e&&(e=this.datasets()),t.prototype.entities.call(this,e).map(function(t){t.position.x+=n.width()/2,t.position.y+=n.height()/2;var e=i.select(n._strokeDrawers.get(t.dataset).getVisualPrimitiveAtIndex(t.index)),r=t;return r.strokeSelection=e,r})},e.prototype.sectorValue=function(t,n){return null==t?this._propertyBindings.get(e._SECTOR_VALUE_KEY):(this._bindProperty(e._SECTOR_VALUE_KEY,t,n),this._updatePieAngles(),this.render(),this)},e.prototype.innerRadius=function(t,n){return null==t?this._propertyBindings.get(e._INNER_RADIUS_KEY):(this._bindProperty(e._INNER_RADIUS_KEY,t,n),this.render(),this)},e.prototype.outerRadius=function(t,n){return null==t?this._propertyBindings.get(e._OUTER_RADIUS_KEY):(this._bindProperty(e._OUTER_RADIUS_KEY,t,n),this.render(),this)},e.prototype.startAngle=function(t){return null==t?this._startAngle:(this._startAngle=t,this._updatePieAngles(),this.render(),this)},e.prototype.endAngle=function(t){return null==t?this._endAngle:(this._endAngle=t,this._updatePieAngles(),this.render(),this)},e.prototype.labelsEnabled=function(t){return null==t?this._labelsEnabled:(this._labelsEnabled=t,this.render(),this)},e.prototype.labelFormatter=function(t){return null==t?this._labelFormatter:(this._labelFormatter=t,this.render(),this)},e.prototype.entitiesAt=function(t){var e={x:this.width()/2,y:this.height()/2},n={x:t.x-e.x,y:t.y-e.y},r=this._sliceIndexForPoint(n);return null==r?[]:[this.entities()[r]]},e.prototype._propertyProjectors=function(){var e=this,n=t.prototype._propertyProjectors.call(this),r=_.Plot._scaledAccessor(this.innerRadius()),o=_.Plot._scaledAccessor(this.outerRadius());return n.d=function(t,n,a){return i.arc().innerRadius(r(t,n,a)).outerRadius(o(t,n,a)).startAngle(e._startAngles[n]).endAngle(e._endAngles[n])(t,n)},n},e.prototype._updatePieAngles=function(){if(null!=this.sectorValue()&&0!==this.datasets().length){var t=_.Plot._scaledAccessor(this.sectorValue()),e=this.datasets()[0],n=this._getDataToDraw().get(e),r=i.pie().sort(null).startAngle(this._startAngle).endAngle(this._endAngle).value(function(n,r){return t(n,r,e)})(n);this._startAngles=r.map(function(t){return t.startAngle}),this._endAngles=r.map(function(t){return t.endAngle})}},e.prototype._pieCenter=function(){var t,e,n,r,i=this._startAngle<this._endAngle?this._startAngle:this._endAngle,o=this._startAngle<this._endAngle?this._endAngle:this._startAngle,a=Math.sin(i),s=Math.cos(i),c=Math.sin(o),l=Math.cos(o);return a>=0&&c>=0?s>=0&&l>=0?(t=s,e=0,r=0,n=c):s<0&&l<0?(t=0,e=-l,r=0,n=a):s>=0&&l<0?(t=s,e=-l,r=0,n=a):s<0&&l>=0&&(t=1,e=1,r=1,n=Math.max(a,c)):a>=0&&c<0?s>=0&&l>=0?(t=Math.max(s,l),e=1,r=1,n=1):s<0&&l<0?(t=0,e=1,r=-c,n=a):s>=0&&l<0?(t=s,e=1,r=-c,n=1):s<0&&l>=0&&(t=l,e=1,r=1,n=a):a<0&&c>=0?s>=0&&l>=0?(t=1,e=0,r=-a,n=c):s<0&&l<0?(t=1,e=Math.max(-s,-l),r=1,n=1):s>=0&&l<0?(t=1,e=-l,r=-a,n=1):s<0&&l>=0&&(t=1,e=-s,r=1,n=c):a<0&&c<0&&(s>=0&&l>=0?(t=l,e=0,r=-a,n=0):s<0&&l<0?(t=0,e=-s,r=-c,n=0):s>=0&&l<0?(t=1,e=1,r=Math.max(s,-l),n=1):s<0&&l>=0&&(t=l,e=-s,r=1,n=0)),{x:r+n==0?0:r/(r+n)*this.width(),y:t+e==0?0:t/(t+e)*this.height()}},e.prototype._getDataToDraw=function(){var n=t.prototype._getDataToDraw.call(this);if(0===this.datasets().length)return n;var r=_.Plot._scaledAccessor(this.sectorValue()),i=this.datasets()[0],o=n.get(i).filter(function(t,n){return e._isValidData(r(t,n,i))});return n.set(i,o),n},e._isValidData=function(t){return l.Math.isValidNumber(t)&&t>=0},e.prototype._pixelPoint=function(t,n,r){var o=_.Plot._scaledAccessor(this.sectorValue());if(!e._isValidData(o(t,n,r)))return{x:NaN,y:NaN};var a=(_.Plot._scaledAccessor(this.innerRadius())(t,n,r)+_.Plot._scaledAccessor(this.outerRadius())(t,n,r))/2,s=i.pie().sort(null).value(function(t,n){var i=o(t,n,r);return e._isValidData(i)?i:0}).startAngle(this._startAngle).endAngle(this._endAngle)(r.data()),c=(s[n].startAngle+s[n].endAngle)/2;return{x:a*Math.sin(c),y:-a*Math.cos(c)}},e.prototype._additionalPaint=function(t){var e=this;this._renderArea.select(".label-area").remove(),this._labelsEnabled&&l.Window.setTimeout(function(){return e._drawLabels()},t);var n=this._generateStrokeDrawSteps(),r=this._getDataToDraw();this.datasets().forEach(function(t){var i=_.Plot.applyDrawSteps(n,t);e._strokeDrawers.get(t).draw(r.get(t),i)})},e.prototype._generateStrokeDrawSteps=function(){return[{attrToProjector:this._generateAttrToProjector(),animator:new a.Null}]},e.prototype._sliceIndexForPoint=function(t){var e=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2)),n=Math.acos(-t.y/e);t.x<0&&(n=2*Math.PI-n);for(var r,i=0;i<this._startAngles.length;i++)if(this._startAngles[i]<n&&this._endAngles[i]>n){r=i;break}if(void 0!==r){var o=this.datasets()[0],a=o.data()[r],s=this.innerRadius().accessor(a,r,o),c=this.outerRadius().accessor(a,r,o);if(e>s&&e<c)return r}return null},e.prototype._drawLabels=function(){var t=this,e=this._generateAttrToProjector(),n=this._renderArea.append("g").classed("label-area",!0),r=new o.SvgContext(n.node()),i=new o.CacheMeasurer(r),a=new o.Writer(i,r),s=this.datasets()[0];this._getDataToDraw().get(s).forEach(function(r,o){var c=t.sectorValue().accessor(r,o,s);if(l.Math.isValidNumber(c)){c=t._labelFormatter(c,r,o,s);var u=i.measure(c),h=(t._endAngles[o]+t._startAngles[o])/2,p=t.outerRadius().accessor(r,o,s);t.outerRadius().scale&&(p=t.outerRadius().scale.scale(p));var d=t.innerRadius().accessor(r,o,s);t.innerRadius().scale&&(d=t.innerRadius().scale.scale(d));var _=(p+d)/2,f=Math.sin(h)*_-u.width/2,y=-Math.cos(h)*_-u.height/2,m=[{x:f,y:y},{x:f,y:y+u.height},{x:f+u.width,y:y},{x:f+u.width,y:y+u.height}],g=m.every(function(e){return Math.abs(e.x)<=t.width()/2&&Math.abs(e.y)<=t.height()/2});g&&(g=m.map(function(e){return t._sliceIndexForPoint(e)}).every(function(t){return t===o}));var v=e.fill(r,o,s),x=1.6*l.Color.contrast("white",v)<l.Color.contrast("black",v),b=n.append("g").attr("transform","translate("+f+","+y+")"),E=x?"dark-label":"light-label";b.classed(E,!0),b.style("visibility",g?"inherit":"hidden"),a.write(c,u.width,u.height,{xAlign:"center",yAlign:"center"},b.node())}})},e}(_.Plot);f._INNER_RADIUS_KEY="inner-radius",f._OUTER_RADIUS_KEY="outer-radius",f._SECTOR_VALUE_KEY="sector-value",e.Pie=f},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(5),a=n(7),s=n(6),c=n(32),l=n(3),u=n(0),h=n(2),p=function(t){function e(){var e=t.call(this)||this;return e._labelsEnabled=!1,e._label=null,e.animator("rectangles",new a.Null),e.addClass("rectangle-plot"),e.attr("fill",(new l.Color).range()[0]),e}return r(e,t),e.prototype._createDrawer=function(){return new s.ProxyDrawer(function(){return new c.RectangleSVGDrawer},c.RectangleCanvasDrawStep)},e.prototype._generateAttrToProjector=function(){var n=this,r=t.prototype._generateAttrToProjector.call(this),i=h.Plot._scaledAccessor(this.x()),o=r[e._X2_KEY],a=h.Plot._scaledAccessor(this.y()),s=r[e._Y2_KEY],c=this.x().scale,l=this.y().scale;return null!=o?(r.width=function(t,e,n){return Math.abs(o(t,e,n)-i(t,e,n))},r.x=function(t,e,n){return Math.min(o(t,e,n),i(t,e,n))}):(r.width=function(t,e,r){return n._rectangleWidth(c)},r.x=function(t,e,n){return i(t,e,n)-.5*r.width(t,e,n)}),null!=s?(r.height=function(t,e,n){return Math.abs(s(t,e,n)-a(t,e,n))},r.y=function(t,e,n){return Math.max(s(t,e,n),a(t,e,n))-r.height(t,e,n)}):(r.height=function(t,e,r){return n._rectangleWidth(l)},r.y=function(t,e,n){return a(t,e,n)-.5*r.height(t,e,n)}),delete r[e._X2_KEY],delete r[e._Y2_KEY],r},e.prototype._generateDrawSteps=function(){return[{attrToProjector:this._generateAttrToProjector(),animator:this._getAnimator("rectangles")}]},e.prototype._updateExtentsForProperty=function(e){t.prototype._updateExtentsForProperty.call(this,e),"x"===e?t.prototype._updateExtentsForProperty.call(this,"x2"):"y"===e&&t.prototype._updateExtentsForProperty.call(this,"y2")},e.prototype._filterForProperty=function(e){return"x2"===e?t.prototype._filterForProperty.call(this,"x"):"y2"===e?t.prototype._filterForProperty.call(this,"y"):t.prototype._filterForProperty.call(this,e)},e.prototype.x=function(n,r,i){if(null==n)return t.prototype.x.call(this);if(null==r?t.prototype.x.call(this,n):t.prototype.x.call(this,n,r,i),null!=r){var o=this.x2(),a=o&&o.accessor;null!=a&&this._bindProperty(e._X2_KEY,a,r,o.postScale)}return r instanceof l.Category&&r.innerPadding(0).outerPadding(0),this},e.prototype.x2=function(t,n){if(null==t)return this._propertyBindings.get(e._X2_KEY);var r=this.x(),i=r&&r.scale;return this._bindProperty(e._X2_KEY,t,i,n),this.render(),this},e.prototype.y=function(n,r,i){if(null==n)return t.prototype.y.call(this);if(null==r?t.prototype.y.call(this,n):t.prototype.y.call(this,n,r,i),null!=r){var o=this.y2(),a=o&&o.accessor;null!=a&&this._bindProperty(e._Y2_KEY,a,r,o.postScale)}return r instanceof l.Category&&r.innerPadding(0).outerPadding(0),this},e.prototype.y2=function(t,n){if(null==t)return this._propertyBindings.get(e._Y2_KEY);var r=this.y(),i=r&&r.scale;return this._bindProperty(e._Y2_KEY,t,i,n),this.render(),this},e.prototype.entitiesAt=function(t){var e=this._generateAttrToProjector();return this.entities().filter(function(n){var r=n.datum,i=n.index,o=n.dataset,a=e.x(r,i,o),s=e.y(r,i,o),c=e.width(r,i,o),l=e.height(r,i,o);return a<=t.x&&t.x<=a+c&&s<=t.y&&t.y<=s+l})},e.prototype.entitiesIn=function(t,e){var n,r;if(null==e){var i=t;n={min:i.topLeft.x,max:i.bottomRight.x},r={min:i.topLeft.y,max:i.bottomRight.y}}else n=t,r=e;return this._entitiesIntersecting(n,r)},e.prototype._entityBBox=function(t,e,n,r){return{x:r.x(t,e,n),y:r.y(t,e,n),width:r.width(t,e,n),height:r.height(t,e,n)}},e.prototype._entitiesIntersecting=function(t,e){var n=this,r=[],i=this._generateAttrToProjector();return this.entities().forEach(function(o){u.DOM.intersectsBBox(t,e,n._entityBBox(o.datum,o.index,o.dataset,i))&&r.push(o)}),r},e.prototype.label=function(t){return null==t?this._label:(this._label=t,this.render(),this)},e.prototype.labelsEnabled=function(t){return null==t?this._labelsEnabled:(this._labelsEnabled=t,this.render(),this)},e.prototype._propertyProjectors=function(){var e=t.prototype._propertyProjectors.call(this);return null!=this.x2()&&(e.x2=h.Plot._scaledAccessor(this.x2())),null!=this.y2()&&(e.y2=h.Plot._scaledAccessor(this.y2())),e},e.prototype._pixelPoint=function(t,e,n){var r=this._generateAttrToProjector(),i=r.x(t,e,n),o=r.y(t,e,n);return{x:i+r.width(t,e,n)/2,y:o+r.height(t,e,n)/2}},e.prototype._rectangleWidth=function(t){if(t instanceof l.Category)return t.rangeBand();var e=t===this.x().scale?this.x().accessor:this.y().accessor,n=i.set(u.Array.flatten(this.datasets().map(function(t){return t.data().map(function(n,r){return e(n,r,t).valueOf()})}))).values().map(function(t){return+t}),r=u.Math.min(n,0),o=u.Math.max(n,0),a=t.scale(r);return(t.scale(o)-a)/Math.abs(o-r)},e.prototype._getDataToDraw=function(){var t=new u.Map,e=this._generateAttrToProjector();return this.datasets().forEach(function(n){var r=n.data().filter(function(t,r){return u.Math.isValidNumber(e.x(t,r,n))&&u.Math.isValidNumber(e.y(t,r,n))&&u.Math.isValidNumber(e.width(t,r,n))&&u.Math.isValidNumber(e.height(t,r,n))});t.set(n,r)}),t},e.prototype._additionalPaint=function(t){var e=this;this._renderArea.selectAll(".label-area").remove(),this._labelsEnabled&&null!=this.label()&&u.Window.setTimeout(function(){return e._drawLabels()},t)},e.prototype._drawLabels=function(){var t=this,e=this._getDataToDraw();this.datasets().forEach(function(n,r){return t._drawLabel(e,n,r)})},e.prototype._drawLabel=function(t,e,n){var r=this,i=this._generateAttrToProjector(),a=this._renderArea.append("g").classed("label-area",!0),s=new o.SvgContext(a.node()),c=new o.CacheMeasurer(s),l=new o.Writer(c,s),h=this.x().scale.range(),p=this.y().scale.range(),d=Math.min.apply(null,h),_=Math.max.apply(null,h),f=Math.min.apply(null,p),y=Math.max.apply(null,p);t.get(e).forEach(function(o,s){var h=""+r.label()(o,s,e),p=c.measure(h),m=i.x(o,s,e),g=i.y(o,s,e),v=i.width(o,s,e),x=i.height(o,s,e);if(p.height<=x&&p.width<=v){var b=(v-p.width)/2;g+=(x-p.height)/2;var E={min:m+=b,max:m+p.width},w={min:g,max:g+p.height};if(E.min<d||E.max>_||w.min<f||w.max>y)return;if(r._overlayLabel(E,w,s,n,t))return;var A=i.fill(o,s,e),C=1.6*u.Color.contrast("white",A)<u.Color.contrast("black",A),S=a.append("g").attr("transform","translate("+m+","+g+")"),T=C?"dark-label":"light-label";S.classed(T,!0),l.write(h,p.width,p.height,{xAlign:"center",yAlign:"center"},S.node())}})},e.prototype._overlayLabel=function(t,e,n,r,i){for(var o=this._generateAttrToProjector(),a=this.datasets(),s=r;s<a.length;s++)for(var c=a[s],l=i.get(c),h=s===r?n+1:0;h<l.length;h++)if(u.DOM.intersectsBBox(t,e,this._entityBBox(l[h],h,c,o)))return!0;return!1},e}(n(16).XYPlot);p._X2_KEY="x2",p._Y2_KEY="y2",e.Rectangle=p},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(29),o=n(6),a=n(45),s=n(7),c=n(3),l=n(0),u=n(17),h=n(2),p=function(t){function e(){var e=t.call(this)||this;e.addClass("scatter-plot");var n=new s.Easing;n.startDelay(5),n.stepDuration(250),n.maxTotalDuration(h.Plot._ANIMATION_MAX_DURATION),e.animator(u.Animator.MAIN,n),e.attr("opacity",.6),e.attr("fill",(new c.Color).range()[0]),e.size(6);var r=i.circle();return e.symbol(function(){return r}),e}return r(e,t),e.prototype._buildLightweightPlotEntities=function(e){var n=this;return t.prototype._buildLightweightPlotEntities.call(this,e).map(function(t){var e=h.Plot._scaledAccessor(n.size())(t.datum,t.index,t.dataset);return t.diameter=e,t})},e.prototype._createDrawer=function(t){var e=this;return new o.ProxyDrawer(function(){return new a.SymbolSVGDrawer},a.makeSymbolCanvasDrawStep(t,function(){return h.Plot._scaledAccessor(e.symbol())},function(){return h.Plot._scaledAccessor(e.size())}))},e.prototype.size=function(t,n){return null==t?this._propertyBindings.get(e._SIZE_KEY):(this._bindProperty(e._SIZE_KEY,t,n),this.render(),this)},e.prototype.symbol=function(t){return null==t?this._propertyBindings.get(e._SYMBOL_KEY):(this._propertyBindings.set(e._SYMBOL_KEY,{accessor:t}),this.render(),this)},e.prototype._generateDrawSteps=function(){var t=[];if(this._animateOnNextRender()){var e=this._generateAttrToProjector(),n=h.Plot._scaledAccessor(this.symbol());e.d=function(t,e,r){return n(t,e,r)(0)(null)},t.push({attrToProjector:e,animator:this._getAnimator(u.Animator.RESET)})}return t.push({attrToProjector:this._generateAttrToProjector(),animator:this._getAnimator(u.Animator.MAIN)}),t},e.prototype._propertyProjectors=function(){var e=t.prototype._propertyProjectors.call(this),n=h.Plot._scaledAccessor(this.x()),r=h.Plot._scaledAccessor(this.y());return e.x=n,e.y=r,e.transform=function(t,e,i){return"translate("+n(t,e,i)+","+r(t,e,i)+")"},e.d=this._constructSymbolGenerator(),e},e.prototype._constructSymbolGenerator=function(){var t=h.Plot._scaledAccessor(this.symbol()),e=h.Plot._scaledAccessor(this.size());return function(n,r,i){return t(n,r,i)(e(n,r,i))(null)}},e.prototype._entityVisibleOnPlot=function(t,e){var n={min:e.topLeft.x,max:e.bottomRight.x},r={min:e.topLeft.y,max:e.bottomRight.y},i={x:t.position.x-t.diameter,y:t.position.y-t.diameter,width:t.diameter,height:t.diameter};return l.DOM.intersectsBBox(n,r,i)},e.prototype.entitiesIn=function(t,e){var n,r;if(null==e){var i=t;n={min:i.topLeft.x,max:i.bottomRight.x},r={min:i.topLeft.y,max:i.bottomRight.y}}else n=t,r=e;var o=h.Plot._scaledAccessor(this.x()),a=h.Plot._scaledAccessor(this.y());return this.entities().filter(function(t){var e=t.datum,i=t.index,s=t.dataset,c=o(e,i,s),l=a(e,i,s);return n.min<=c&&c<=n.max&&r.min<=l&&l<=r.max})},e.prototype.entitiesAt=function(t){var e=h.Plot._scaledAccessor(this.x()),n=h.Plot._scaledAccessor(this.y()),r=h.Plot._scaledAccessor(this.size());return this.entities().filter(function(i){var o=i.datum,a=i.index,s=i.dataset,c=e(o,a,s),l=n(o,a,s),u=r(o,a,s);return c-u/2<=t.x&&t.x<=c+u/2&&l-u/2<=t.y&&t.y<=l+u/2})},e}(n(16).XYPlot);p._SIZE_KEY="size",p._SYMBOL_KEY="symbol",e.Scatter=p},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(7),o=n(6),a=n(44),s=n(3),c=n(25),l=n(2),u=function(t){function e(){var e=t.call(this)||this;return e.addClass("segment-plot"),e.attr("stroke",(new s.Color).range()[0]),e.attr("stroke-width","2px"),e}return r(e,t),e.prototype._createDrawer=function(){return new o.ProxyDrawer(function(){return new a.SegmentSVGDrawer},function(){c.warn("canvas renderer is not supported on Segment Plot!")})},e.prototype._generateDrawSteps=function(){return[{attrToProjector:this._generateAttrToProjector(),animator:new i.Null}]},e.prototype._updateExtentsForProperty=function(e){t.prototype._updateExtentsForProperty.call(this,e),"x"===e?t.prototype._updateExtentsForProperty.call(this,"x2"):"y"===e&&t.prototype._updateExtentsForProperty.call(this,"y2")},e.prototype._filterForProperty=function(e){return"x2"===e?t.prototype._filterForProperty.call(this,"x"):"y2"===e?t.prototype._filterForProperty.call(this,"y"):t.prototype._filterForProperty.call(this,e)},e.prototype.x=function(n,r){if(null==n)return t.prototype.x.call(this);if(null==r)t.prototype.x.call(this,n);else{t.prototype.x.call(this,n,r);var i=this.x2(),o=i&&i.accessor;null!=o&&this._bindProperty(e._X2_KEY,o,r)}return this},e.prototype.x2=function(t){if(null==t)return this._propertyBindings.get(e._X2_KEY);var n=this.x(),r=n&&n.scale;return this._bindProperty(e._X2_KEY,t,r),this.render(),this},e.prototype.y=function(n,r){if(null==n)return t.prototype.y.call(this);if(null==r)t.prototype.y.call(this,n);else{t.prototype.y.call(this,n,r);var i=this.y2(),o=i&&i.accessor;null!=o&&this._bindProperty(e._Y2_KEY,o,r)}return this},e.prototype.y2=function(t){if(null==t)return this._propertyBindings.get(e._Y2_KEY);var n=this.y(),r=n&&n.scale;return this._bindProperty(e._Y2_KEY,t,r),this.render(),this},e.prototype._propertyProjectors=function(){var e=t.prototype._propertyProjectors.call(this);return e.x1=l.Plot._scaledAccessor(this.x()),e.x2=null==this.x2()?l.Plot._scaledAccessor(this.x()):l.Plot._scaledAccessor(this.x2()),e.y1=l.Plot._scaledAccessor(this.y()),e.y2=null==this.y2()?l.Plot._scaledAccessor(this.y()):l.Plot._scaledAccessor(this.y2()),e},e.prototype.entitiesAt=function(t){var e=this.entityNearest(t);return null!=e?[e]:[]},e.prototype.entitiesIn=function(t,e){var n,r;if(null==e){var i=t;n={min:i.topLeft.x,max:i.bottomRight.x},r={min:i.topLeft.y,max:i.bottomRight.y}}else n=t,r=e;return this._entitiesIntersecting(n,r)},e.prototype._entitiesIntersecting=function(t,e){var n=this,r=[],i=this._generateAttrToProjector();return this.entities().forEach(function(o){n._lineIntersectsBox(o,t,e,i)&&r.push(o)}),r},e.prototype._lineIntersectsBox=function(t,e,n,r){var i=this,o=r.x1(t.datum,t.index,t.dataset),a=r.x2(t.datum,t.index,t.dataset),s=r.y1(t.datum,t.index,t.dataset),c=r.y2(t.datum,t.index,t.dataset);if(e.min<=o&&o<=e.max&&n.min<=s&&s<=n.max||e.min<=a&&a<=e.max&&n.min<=c&&c<=n.max)return!0;var l={x:o,y:s},u={x:a,y:c},h=[{x:e.min,y:n.min},{x:e.min,y:n.max},{x:e.max,y:n.max},{x:e.max,y:n.min}];return h.filter(function(t,e){return 0!==e&&(i._lineIntersectsSegment(l,u,t,h[e-1])&&i._lineIntersectsSegment(t,h[e-1],l,u))}).length>0},e.prototype._lineIntersectsSegment=function(t,e,n,r){var i=function(t,e,n){return(e.x-t.x)*(n.y-e.y)-(e.y-t.y)*(n.x-e.x)};return i(t,e,n)*i(t,e,r)<0},e}(n(16).XYPlot);u._X2_KEY="x2",u._Y2_KEY="y2",e.Segment=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(7),a=n(0),s=n(46),c=n(2),l=function(t){function e(){var e=t.call(this)||this;return e._baselineValue=0,e._stackingOrder="bottomup",e.addClass("stacked-area-plot"),e.attr("fill-opacity",1),e._stackingResult=new a.Map,e._stackedExtent=[],e._baselineValueProvider=function(){return[e._baselineValue]},e.croppedRenderingEnabled(!1),e}return r(e,t),e.prototype.croppedRenderingEnabled=function(e){return null==e?t.prototype.croppedRenderingEnabled.call(this):e?(a.Window.warn("Warning: Stacked Area Plot does not support cropped rendering."),this):t.prototype.croppedRenderingEnabled.call(this,e)},e.prototype._getAnimator=function(t){return new o.Null},e.prototype._setup=function(){t.prototype._setup.call(this),this._baseline=this._renderArea.append("line").classed("baseline",!0)},e.prototype.x=function(e,n){return null==e?t.prototype.x.call(this):(null==n?t.prototype.x.call(this,e):t.prototype.x.call(this,e,n),this._updateStackExtentsAndOffsets(),this)},e.prototype.y=function(e,n){return null==e?t.prototype.y.call(this):(null==n?t.prototype.y.call(this,e):t.prototype.y.call(this,e,n),this._updateStackExtentsAndOffsets(),this)},e.prototype.stackingOrder=function(t){return null==t?this._stackingOrder:(this._stackingOrder=t,this._onDatasetUpdate(),this)},e.prototype.downsamplingEnabled=function(e){return null==e?t.prototype.downsamplingEnabled.call(this):(a.Window.warn("Warning: Stacked Area Plot does not support downsampling"),this)},e.prototype._additionalPaint=function(){var t=this.y().scale.scale(this._baselineValue),e={x1:0,y1:t,x2:this.width(),y2:t};this._getAnimator("baseline").animate(this._baseline,e)},e.prototype._updateYScale=function(){var t=this.y(),e=t&&t.scale;null!=e&&(e.addPaddingExceptionsProvider(this._baselineValueProvider),e.addIncludedValuesProvider(this._baselineValueProvider))},e.prototype._onDatasetUpdate=function(){return this._updateStackExtentsAndOffsets(),t.prototype._onDatasetUpdate.call(this),this},e.prototype._updateExtentsForProperty=function(e){t.prototype._updateExtentsForProperty.call(this,e),"x"!==e&&"y"!==e||!this._projectorsReady()||this._updateStackExtentsAndOffsets()},e.prototype._extentsForProperty=function(e){return"y"===e?[this._stackedExtent]:t.prototype._extentsForProperty.call(this,e)},e.prototype._updateStackExtentsAndOffsets=function(){if(this._projectorsReady()){var t=this.datasets(),e=this.x().accessor,n=this.y().accessor,r=this._filterForProperty("y");this._checkSameDomain(t,e),this._stackingResult=a.Stacking.stack(t,e,n,this._stackingOrder),this._stackedExtent=a.Stacking.stackedExtent(this._stackingResult,e,r)}},e.prototype._checkSameDomain=function(t,n){var r=t.map(function(t){return i.set(t.data().map(function(e,r){return n(e,r,t).toString()})).values()}),o=e._domainKeys(t,n);r.some(function(t){return t.length!==o.length})&&a.Window.warn("the domains across the datasets are not the same. Plot may produce unintended behavior.")},e._domainKeys=function(t,e){var n=i.set();return t.forEach(function(t){t.data().forEach(function(r,i){n.add(e(r,i,t))})}),n.values()},e.prototype._propertyProjectors=function(){var e=this,n=t.prototype._propertyProjectors.call(this),r=this.y().accessor,i=this.x().accessor,o=function(t,e,n){return a.Stacking.normalizeKey(i(t,e,n))};return n.d=this._constructAreaProjector(c.Plot._scaledAccessor(this.x()),function(t,n,i){return e.y().scale.scale(+r(t,n,i)+e._stackingResult.get(i).get(o(t,n,i)).offset)},function(t,n,r){return e.y().scale.scale(e._stackingResult.get(r).get(o(t,n,r)).offset)}),n},e.prototype._pixelPoint=function(e,n,r){var i=t.prototype._pixelPoint.call(this,e,n,r),o=this.x().accessor(e,n,r),s=this.y().accessor(e,n,r),c=this.y().scale.scale(+s+this._stackingResult.get(r).get(a.Stacking.normalizeKey(o)).offset);return{x:i.x,y:c}},e}(s.Area);e.StackedArea=l},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=n(8),a=n(0),s=n(24),c=n(2),l=function(t){function e(e){void 0===e&&(e="vertical");var n=t.call(this,e)||this;return n._extremaFormatter=o.identity(),n.addClass("stacked-bar-plot"),n._stackingOrder="bottomup",n._stackingResult=new a.Map,n._stackedExtent=[],n}return r(e,t),e.prototype.x=function(e,n){return null==e?t.prototype.x.call(this):(null==n?t.prototype.x.call(this,e):t.prototype.x.call(this,e,n),this._updateStackExtentsAndOffsets(),this)},e.prototype.y=function(e,n){return null==e?t.prototype.y.call(this):(null==n?t.prototype.y.call(this,e):t.prototype.y.call(this,e,n),this._updateStackExtentsAndOffsets(),this)},e.prototype.stackingOrder=function(t){return null==t?this._stackingOrder:(this._stackingOrder=t,this._onDatasetUpdate(),this)},e.prototype.extremaFormatter=function(t){return 0===arguments.length?this._extremaFormatter:(this._extremaFormatter=t,this.render(),this)},e.prototype._setup=function(){t.prototype._setup.call(this),this._labelArea=this._renderArea.append("g").classed(s.Bar._LABEL_AREA_CLASS,!0);var e=new i.SvgContext(this._labelArea.node());this._measurer=new i.CacheMeasurer(e),this._writer=new i.Writer(this._measurer,e)},e.prototype._drawLabels=function(){var n=this;t.prototype._drawLabels.call(this),this._labelArea.selectAll("g").remove();var r=+this.baselineValue(),i=this.position().scale,o=this.length().scale,l=a.Stacking.stackedExtents(this._stackingResult),u=l.maximumExtents,h=l.minimumExtents,p=[],d=function(t,r,i){var o=r.topLeft,a=o.x,s=o.y,c=r.bottomRight.x-r.topLeft.x,l=r.bottomRight.y-r.topLeft.y,u=n._isVertical?c>i-2*e._LABEL_PADDING:l>i-2*e._LABEL_PADDING;if(!u){var h=n._labelArea.append("g").attr("transform","translate("+a+", "+s+")");h.classed("stacked-bar-label",!0);var p={xAlign:"center",yAlign:"center"};n._writer.write(t,c,l,p,h.node())}return u},_=function(t,e){t.forEach(function(t){if(t.extent!==r){var a=n.extremaFormatter()(t.extent),l=n._measurer.measure(a),u=t.stackedDatum,h=u.originalDatum,_=u.originalIndex,f=u.originalDataset,y=c.Plot._scaledAccessor(n.attr(s.Bar._BAR_THICKNESS_KEY))(h,_,f),m=o.scale(t.extent),g=n._getPositionAttr(i.scale(t.axisValue),y)+y/2,v=n._isVertical?{x:g,y:m}:{x:m,y:g},x=e(v,l,y),b=d(a,{topLeft:x,bottomRight:{x:x.x+l.width,y:x.y+l.height}},y);p.push(b)}})};_(u,function(t,r,i){var o=n._isVertical?r.width:r.height,a=n._isVertical?r.height:r.width;return{x:n._isVertical?t.x-o/2:t.x+e._STACKED_BAR_LABEL_PADDING,y:n._isVertical?t.y-a-e._STACKED_BAR_LABEL_PADDING:t.y-o/2}}),_(h,function(t,r,i){var o=n._isVertical?r.width:r.height,a=n._isVertical?r.height:r.width;return{x:n._isVertical?t.x-o/2:t.x-a-e._STACKED_BAR_LABEL_PADDING,y:n._isVertical?t.y+e._STACKED_BAR_LABEL_PADDING:t.y-o/2}}),p.some(function(t){return t})&&this._labelArea.selectAll("g").remove()},e.prototype._generateAttrToProjector=function(){var e=this,n=t.prototype._generateAttrToProjector.call(this),r=this._isVertical?"y":"x",i=this.length().scale,o=this.length().accessor,s=this.position().accessor,c=function(t,e,n){return a.Stacking.normalizeKey(s(t,e,n))},l=function(t,n,r){return i.scale(e._stackingResult.get(r).get(c(t,n,r)).offset)},u=function(t,n,r){return i.scale(+o(t,n,r)+e._stackingResult.get(r).get(c(t,n,r)).offset)},h=function(t,e,n){return Math.abs(u(t,e,n)-l(t,e,n))};n[this._isVertical?"height":"width"]=h;var p=function(t,e,n){return+o(t,e,n)<0?l(t,e,n):u(t,e,n)};return n[r]=function(t,n,r){return e._isVertical?p(t,n,r):p(t,n,r)-h(t,n,r)},n},e.prototype._onDatasetUpdate=function(){return this._updateStackExtentsAndOffsets(),t.prototype._onDatasetUpdate.call(this),this},e.prototype._updateExtentsForProperty=function(e){t.prototype._updateExtentsForProperty.call(this,e),"x"!==e&&"y"!==e||!this._projectorsReady()||this._updateStackExtentsAndOffsets()},e.prototype._extentsForProperty=function(e){return e===(this._isVertical?"y":"x")?[this._stackedExtent]:t.prototype._extentsForProperty.call(this,e)},e.prototype._updateStackExtentsAndOffsets=function(){if(this._projectorsReady()){var t=this.datasets(),e=this.position().accessor,n=this.length().accessor,r=this._filterForProperty(this._isVertical?"y":"x");this._stackingResult=a.Stacking.stack(t,e,n,this._stackingOrder),this._stackedExtent=a.Stacking.stackedExtent(this._stackingResult,e,r)}},e.prototype.invalidateCache=function(){t.prototype.invalidateCache.call(this),this._measurer.reset()},e}(s.Bar);l._STACKED_BAR_LABEL_PADDING=5,e.StackedBar=l},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(0),o=n(24),a=n(2),s=function(t){function e(){var e=t.call(this)||this;return e._connectorsEnabled=!1,e.addClass("waterfall-plot"),e}return r(e,t),e.prototype.connectorsEnabled=function(t){return null==t?this._connectorsEnabled:(this._connectorsEnabled=t,this)},e.prototype.total=function(t){return null==t?this._propertyBindings.get(e._TOTAL_KEY):(this._bindProperty(e._TOTAL_KEY,t,null),this)},e.prototype._additionalPaint=function(t){var e=this;this._connectorArea.selectAll("line").remove(),this._connectorsEnabled&&i.Window.setTimeout(function(){return e._drawConnectors()},t)},e.prototype._createNodesForDataset=function(n){var r=t.prototype._createNodesForDataset.call(this,n);return this._connectorArea=this._renderArea.append("g").classed(e._CONNECTOR_AREA_CLASS,!0),r},e.prototype._extentsForProperty=function(e){return"y"===e?[this._extent]:t.prototype._extentsForProperty.call(this,e)},e.prototype._generateAttrToProjector=function(){var n=this,r=t.prototype._generateAttrToProjector.call(this),i=this.y().scale,o=a.Plot._scaledAccessor(this.total());return null==this.attr("y")&&(r.y=function(t,e,r){var a=n.y().accessor(t,e,r);if(o(t,e,r))return Math.min(i.scale(a),i.scale(0));var s=n._subtotals[e];if(0===e)return a<0?i.scale(s-a):i.scale(s);var c=n._subtotals[e-1];return s>c?i.scale(s):i.scale(c)}),null==this.attr("height")&&(r.height=function(t,e,r){var a=o(t,e,r),s=n.y().accessor(t,e,r);if(a)return Math.abs(i.scale(s)-i.scale(0));var c=n._subtotals[e];if(0===e)return Math.abs(i.scale(c)-i.scale(c-s));var l=n._subtotals[e-1];return Math.abs(i.scale(c)-i.scale(l))}),r.class=function(t,r,i){var a="";return null!=n.attr("class")&&(a=n.attr("class").accessor(t,r,i)+" "),o(t,r,i)?a+e._BAR_TOTAL_CLASS:a+(n.y().accessor(t,r,i)>0?e._BAR_GROWTH_CLASS:e._BAR_DECLINE_CLASS)},r},e.prototype._onDatasetUpdate=function(){return this._updateSubtotals(),t.prototype._onDatasetUpdate.call(this),this},e.prototype._calculateSubtotalsAndExtent=function(t){var e=this,n=Number.MAX_VALUE,r=Number.MIN_VALUE,i=0,o=!1;t.data().forEach(function(a,s){var c=e.y().accessor(a,s,t),l=e.total().accessor(a,s,t);if(l&&0!==s||(i+=c),e._subtotals.push(i),i<n&&(n=i),i>r&&(r=i),l&&(c<n&&(n=c),c>r&&(r=c)),!o&&l){for(var u=c-i,h=0;h<e._subtotals.length;h++)e._subtotals[h]+=u;o=!0,i+=u,n+=u,r+=u}}),this._extent=[n,r]},e.prototype._drawConnectors=function(){for(var t=this._generateAttrToProjector(),n=this.datasets()[0],r=1;r<n.data().length;r++){var i=r-1,o=n.data()[r],a=n.data()[i],s=t.x(a,i,n),c=t.x(o,r,n)+t.width(o,r,n),l=t.y(o,r,n);(this._subtotals[r]>0&&this._subtotals[r]>this._subtotals[i]||this._subtotals[r]<0&&this._subtotals[r]>=this._subtotals[i])&&(l=t.y(o,r,n)+t.height(o,r,n)),this._connectorArea.append("line").classed(e._CONNECTOR_CLASS,!0).attr("x1",s).attr("x2",c).attr("y1",l).attr("y2",l)}},e.prototype._updateSubtotals=function(){var t=this.datasets();if(t.length>0){var e=t[t.length-1];this._subtotals=new Array,this._calculateSubtotalsAndExtent(e)}},e}(o.Bar);s._BAR_DECLINE_CLASS="waterfall-decline",s._BAR_GROWTH_CLASS="waterfall-growth",s._BAR_TOTAL_CLASS="waterfall-total",s._CONNECTOR_CLASS="connector",s._CONNECTOR_AREA_CLASS="connector-area",s._TOTAL_KEY="total",e.Waterfall=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(0),a=function(t){function e(n){var r,o=t.call(this)||this;switch(n){case null:case void 0:null==e._plottableColorCache&&(e._plottableColorCache=e._getPlottableColors()),r=i.scaleOrdinal().range(e._plottableColorCache);break;case"Category10":case"category10":case"10":r=i.scaleOrdinal(i.schemeCategory10);break;case"Category20":case"category20":case"20":r=i.scaleOrdinal(i.schemeCategory20);break;case"Category20b":case"category20b":case"20b":r=i.scaleOrdinal(i.schemeCategory20b);break;case"Category20c":case"category20c":case"20c":r=i.scaleOrdinal(i.schemeCategory20c);break;default:throw new Error("Unsupported ColorScale type")}return o._d3Scale=r,o}return r(e,t),e.prototype.extentOfValues=function(t){return o.Array.uniq(t)},e.prototype._getExtent=function(){return o.Array.uniq(this._getAllIncludedValues())},e.invalidateColorCache=function(){e._plottableColorCache=null},e._getPlottableColors=function(){for(var t=[],e=i.select("body").append("plottable-color-tester"),n=o.Color.colorTest(e,""),r=0,a=o.Color.colorTest(e,"plottable-colors-0");null!=a&&r<this._MAXIMUM_COLORS_FROM_CSS&&(a!==n||a!==t[t.length-1]);)t.push(a),r++,a=o.Color.colorTest(e,"plottable-colors-"+r);return e.remove(),t},e.prototype.scale=function(t){var n=this._d3Scale(t),r=this.domain().indexOf(t),i=Math.floor(r/this.range().length),a=Math.log(i*e._LOOP_LIGHTEN_FACTOR+1);return o.Color.lightenColor(n,a)},e.prototype._getDomain=function(){return this._backingScaleDomain()},e.prototype._backingScaleDomain=function(t){return null==t?this._d3Scale.domain():(this._d3Scale.domain(t),this)},e.prototype._getRange=function(){return this._d3Scale.range()},e.prototype._setRange=function(t){this._d3Scale.range(t)},e}(n(18).Scale);a._LOOP_LIGHTEN_FACTOR=1.6,a._MAXIMUM_COLORS_FROM_CSS=256,e.Color=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(0),a=function(t){function e(n){void 0===n&&(n="linear");var r=t.call(this)||this;switch(n){case"linear":r._colorScale=i.scaleLinear();break;case"log":r._colorScale=i.scaleLog();break;case"sqrt":r._colorScale=i.scaleSqrt();break;case"pow":r._colorScale=i.scalePow()}if(null==r._colorScale)throw new Error("unknown QuantitativeScale scale type "+n);return r.range(e.REDS),r}return r(e,t),e.prototype.extentOfValues=function(t){var e=i.extent(t);return null==e[0]||null==e[1]?[]:e},e.prototype._d3InterpolatedScale=function(){return this._colorScale.range([0,1]).interpolate(this._interpolateColors())},e.prototype._interpolateColors=function(){var t=this._colorRange;if(t.length<2)throw new Error("Color scale arrays must have at least two elements.");return function(e,n){return function(e){var n=(e=Math.max(0,Math.min(1,e)))*(t.length-1),r=Math.floor(n),o=Math.ceil(n),a=n-r;return i.interpolateLab(t[r],t[o])(a)}}},e.prototype._resetScale=function(){this._d3Scale=this._d3InterpolatedScale(),this._autoDomainIfAutomaticMode(),this._dispatchUpdate()},e.prototype.autoDomain=function(){var t=this._getAllIncludedValues();return t.length>0&&this._setDomain([o.Math.min(t,0),o.Math.max(t,0)]),this},e.prototype.scale=function(t){return this._d3Scale(t)},e.prototype._getDomain=function(){return this._backingScaleDomain()},e.prototype._backingScaleDomain=function(t){return null==t?this._d3Scale.domain():(this._d3Scale.domain(t),this)},e.prototype._getRange=function(){return this._colorRange},e.prototype._setRange=function(t){this._colorRange=t,this._resetScale()},e}(n(18).Scale);a.REDS=["#FFFFFF","#FFF6E1","#FEF4C0","#FED976","#FEB24C","#FD8D3C","#FC4E2A","#E31A1C","#B10026"],a.BLUES=["#FFFFFF","#CCFFFF","#A5FFFD","#85F7FB","#6ED3EF","#55A7E0","#417FD0","#2545D3","#0B02E1"],a.POSNEG=["#0B02E1","#2545D3","#417FD0","#55A7E0","#6ED3EF","#85F7FB","#A5FFFD","#CCFFFF","#FFFFFF","#FFF6E1","#FEF4C0","#FED976","#FEB24C","#FD8D3C","#FC4E2A","#E31A1C","#B10026"],e.InterpolatedColor=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=function(t){function e(){var e=t.call(this)||this;return e._d3Scale=i.scaleLinear(),e}return r(e,t),e.prototype._defaultExtent=function(){return[0,1]},e.prototype._expandSingleValueDomain=function(t){return t[0]===t[1]?[t[0]-1,t[1]+1]:t},e.prototype.scale=function(t){return this._d3Scale(t)},e.prototype.scaleTransformation=function(t){return this.scale(t)},e.prototype.invertedTransformation=function(t){return this.invert(t)},e.prototype.getTransformationDomain=function(){return this.domain()},e.prototype._getDomain=function(){return this._backingScaleDomain()},e.prototype._backingScaleDomain=function(t){return null==t?this._d3Scale.domain():(this._d3Scale.domain(t),this)},e.prototype._getRange=function(){return this._d3Scale.range()},e.prototype._setRange=function(t){this._d3Scale.range(t)},e.prototype.invert=function(t){return this._d3Scale.invert(t)},e.prototype.defaultTicks=function(){return this._d3Scale.ticks(e._DEFAULT_NUM_TICKS)},e.prototype._niceDomain=function(t,e){return this._d3Scale.copy().domain(t).nice(e).domain()},e}(n(11).QuantitativeScale);e.Linear=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(0),a=n(3),s=function(t){function e(e){void 0===e&&(e=10);var n=t.call(this)||this;if(n._d3Scale=i.scaleLinear(),n._base=e,n._pivot=n._base,n._setDomain(n._defaultExtent()),e<=1)throw new Error("ModifiedLogScale: The base must be > 1");return n}return r(e,t),e.prototype._adjustedLog=function(t){var e=t<0?-1:1;return(t*=e)<this._pivot&&(t+=(this._pivot-t)/this._pivot),t=Math.log(t)/Math.log(this._base),t*=e},e.prototype._invertedAdjustedLog=function(t){var e=t<0?-1:1;return t*=e,(t=Math.pow(this._base,t))<this._pivot&&(t=this._pivot*(t-1)/(this._pivot-1)),t*=e},e.prototype.scale=function(t){return this._d3Scale(this._adjustedLog(t))},e.prototype.invert=function(t){return this._invertedAdjustedLog(this._d3Scale.invert(t))},e.prototype.scaleTransformation=function(t){return this.scale(t)},e.prototype.invertedTransformation=function(t){return this.invert(t)},e.prototype.getTransformationDomain=function(){return this.domain()},e.prototype._getDomain=function(){return this._untransformedDomain},e.prototype._setDomain=function(e){this._untransformedDomain=e;var n=[this._adjustedLog(e[0]),this._adjustedLog(e[1])];t.prototype._setDomain.call(this,n)},e.prototype._backingScaleDomain=function(t){return null==t?this._d3Scale.domain():(this._d3Scale.domain(t),this)},e.prototype.ticks=function(){var t=function(t,e,n){return[t,e,n].sort(function(t,e){return t-e})[1]},e=o.Math.min(this._untransformedDomain,0),n=o.Math.max(this._untransformedDomain,0),r=e,s=t(e,n,-this._pivot),c=t(e,n,this._pivot),l=n,u=this._logTicks(-s,-r).map(function(t){return-t}).reverse(),h=this._logTicks(c,l),p=Math.max(e,-this._pivot),d=Math.min(n,this._pivot),_=i.scaleLinear().domain([p,d]).ticks(this._howManyTicks(p,d)),f=u.concat(_).concat(h);return f.length<=1&&(f=i.scaleLinear().domain([e,n]).ticks(a.ModifiedLog._DEFAULT_NUM_TICKS)),f},e.prototype._logTicks=function(t,e){var n=this,r=this._howManyTicks(t,e);if(0===r)return[];var a=Math.floor(Math.log(t)/Math.log(this._base)),s=Math.ceil(Math.log(e)/Math.log(this._base)),c=i.range(s,a,-Math.ceil((s-a)/r)),l=i.range(this._base,1,-(this._base-1)).map(Math.floor),u=o.Array.uniq(l),h=c.map(function(t){return u.map(function(e){return Math.pow(n._base,t-1)*e})});return o.Array.flatten(h).filter(function(n){return t<=n&&n<=e}).sort(function(t,e){return t-e})},e.prototype._howManyTicks=function(t,e){var n=this._adjustedLog(o.Math.min(this._untransformedDomain,0)),r=this._adjustedLog(o.Math.max(this._untransformedDomain,0)),i=this._adjustedLog(t),s=(this._adjustedLog(e)-i)/(r-n);return Math.ceil(s*a.ModifiedLog._DEFAULT_NUM_TICKS)},e.prototype._niceDomain=function(t,e){return t},e.prototype._defaultExtent=function(){return[0,this._base]},e.prototype._expandSingleValueDomain=function(t){if(t[0]===t[1]){var e=t[0];return e>0?[e/this._base,e*this._base]:0===e?[-this._base,this._base]:[e*this._base,e/this._base]}return t},e.prototype._getRange=function(){return this._d3Scale.range()},e.prototype._setRange=function(t){this._d3Scale.range(t)},e.prototype.defaultTicks=function(){return this._d3Scale.ticks(a.ModifiedLog._DEFAULT_NUM_TICKS)},e}(n(11).QuantitativeScale);e.ModifiedLog=s},function(t,e,n){"use strict";var r=n(0);e.intervalTickGenerator=function(t){if(t<=0)throw new Error("interval must be positive number");return function(e){var n=e.domain(),i=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]),a=Math.ceil(i/t)*t,s=Math.floor((o-a)/t)+1,c=i%t==0?[]:[i],l=r.Math.range(0,s).map(function(e){return a+e*t}),u=o%t==0?[]:[o];return c.concat(l).concat(u)}},e.integerTickGenerator=function(){return function(t){var e=t.defaultTicks();return e.filter(function(t,n){return t%1==0||0===n||n===e.length-1})}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(26),a=function(t){function e(){var e=t.call(this)||this;return e._d3Scale=i.scaleTime(),e.autoDomain(),e}return r(e,t),e.prototype.tickInterval=function(t,n){void 0===n&&(n=1);var r=i.scaleTime(),o=e.timeIntervalToD3Time(t).every(n);return r.domain(this.domain()),r.range(this.range()),r.ticks(o)},e.prototype._setDomain=function(e){if(e[1]<e[0])throw new Error("Scale.Time domain values must be in chronological order");return t.prototype._setDomain.call(this,e)},e.prototype._defaultExtent=function(){return[new Date("1970-01-01"),new Date("1970-01-02")]},e.prototype._expandSingleValueDomain=function(t){var e=t[0].getTime(),n=t[1].getTime();if(e===n){var r=new Date(e);r.setDate(r.getDate()-1);var i=new Date(n);return i.setDate(i.getDate()+1),[r,i]}return t},e.prototype.scale=function(t){return this._d3Scale(t)},e.prototype.scaleTransformation=function(t){return this.scale(new Date(t))},e.prototype.invertedTransformation=function(t){return this.invert(t).getTime()},e.prototype.getTransformationDomain=function(){var t=this.domain();return[t[0].valueOf(),t[1].valueOf()]},e.prototype._getDomain=function(){return this._backingScaleDomain()},e.prototype._backingScaleDomain=function(t){return null==t?this._d3Scale.domain():(this._d3Scale.domain(t),this)},e.prototype._getRange=function(){return this._d3Scale.range()},e.prototype._setRange=function(t){this._d3Scale.range(t)},e.prototype.invert=function(t){return this._d3Scale.invert(t)},e.prototype.defaultTicks=function(){return this._d3Scale.ticks(e._DEFAULT_NUM_TICKS)},e.prototype._niceDomain=function(t){return this._d3Scale.copy().domain(t).nice().domain()},e.timeIntervalToD3Time=function(t){switch(t){case o.TimeInterval.second:return i.timeSecond;case o.TimeInterval.minute:return i.timeMinute;case o.TimeInterval.hour:return i.timeHour;case o.TimeInterval.day:return i.timeDay;case o.TimeInterval.week:return i.timeWeek;case o.TimeInterval.month:return i.timeMonth;case o.TimeInterval.year:return i.timeYear;default:throw Error("TimeInterval specified does not exist: "+t)}},e}(n(11).QuantitativeScale);e.Time=a},function(t,e,n){"use strict";var r=n(1),i=window.Array;e.add=function(t,e){if(t.length!==e.length)throw new Error("attempted to add arrays of unequal length");return t.map(function(n,r){return t[r]+e[r]})},e.uniq=function(t){var e=r.set(),n=[];return t.forEach(function(t){e.has(String(t))||(e.add(String(t)),n.push(t))}),n},e.flatten=function(t){return i.prototype.concat.apply([],t)},e.createFilledArray=function(t,e){for(var n=[],r=0;r<e;r++)n[r]="function"==typeof t?t(r):t;return n}},function(t,e,n){"use strict";var r=function(){function t(t,e,n){this.entryIndex=t,this.exitIndex=t,this.minIndex=t,this.maxIndex=t,this.bucketValue=e,this.minValue=n,this.maxValue=n}return t.prototype.isInBucket=function(t){return t==this.bucketValue},t.prototype.addToBucket=function(t,e){t<this.minValue&&(this.minValue=t,this.minIndex=e),t>this.maxValue&&(this.maxValue=t,this.maxIndex=e),this.exitIndex=e},t.prototype.getUniqueIndices=function(){var t=[this.entryIndex,this.maxIndex,this.minIndex,this.exitIndex];return t.filter(function(e,n){return 0==n||e!=t[n-1]})},t}();e.Bucket=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.callCallbacks=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.forEach(function(n){n.apply(t,e)}),this},e}(n(51).Set);e.CallbackSet=i},function(t,e,n){"use strict";function r(t){var e=i.rgb(t),n=function(t){return(t/=255)<=.03928?t/12.92:o.pow((t+.055)/1.055,2.4)};return.2126*n(e.r)+.7152*n(e.g)+.0722*n(e.b)}var i=n(1),o=window.Math;e.contrast=function(t,e){var n=r(t)+.05,i=r(e)+.05;return n>i?n/i:i/n},e.lightenColor=function(t,e){return i.color(t).brighter(e).rgb().toString()},e.colorTest=function(t,e){t.classed(e,!0);var n=t.style("background-color");if("transparent"===n)return null;var r=/\((.+)\)/.exec(n)[1].split(",").map(function(t){var e=+t,n=e.toString(16);return e<16?"0"+n:n});if(4===r.length&&"00"===r[3])return null;var i="#"+r.join("");return t.classed(e,!1),i}},function(t,e,n){"use strict";function r(t){if("number"==typeof t){var e=t;return{min:e,max:e}}var n=t;if(n instanceof Object&&"min"in n&&"max"in n)return n;throw new Error("input '"+t+"' can't be parsed as an Range")}function i(t,e){var n=t.getPropertyValue(e);return parseFloat(n)||0}var o=n(1),a=window.Math;e.contains=function(t,e){for(var n=e;null!=n&&n!==t;)n=n.parentNode;return n===t},e.elementBBox=function(t){var e;try{e=t.node().getBBox()}catch(t){e={x:0,y:0,width:0,height:0}}return e},e.SCREEN_REFRESH_RATE_MILLISECONDS=1e3/60,e.requestAnimationFramePolyfill=function(t){null!=window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,e.SCREEN_REFRESH_RATE_MILLISECONDS)},e.elementWidth=function(t){var e=t instanceof o.selection?t.node():t,n=window.getComputedStyle(e);return i(n,"width")+i(n,"padding-left")+i(n,"padding-right")+i(n,"border-left-width")+i(n,"border-right-width")},e.elementHeight=function(t){var e=t instanceof o.selection?t.node():t,n=window.getComputedStyle(e);return i(n,"height")+i(n,"padding-top")+i(n,"padding-bottom")+i(n,"border-top-width")+i(n,"border-bottom-width")};var s="\\s",c="(?:[-+]?[0-9]*\\.?[0-9]+)",l="(?:(?:\\s+,?\\s*)|(?:,\\s*))",u=new RegExp("translate\\s*\\(\\s*("+c+")(?:"+l+"("+c+"))?"+s+"*\\)"),h=new RegExp("rotate\\s*\\(\\s*("+c+")"+s+"*\\)"),p=new RegExp("scale\\s*\\(\\s*("+c+")(?:"+l+"("+c+"))?"+s+"*\\)");e.getTranslateValues=function(t){var e=u.exec(t.attr("transform"));if(null!=e){var n=e[1],r=e[2];return[+n,+(void 0===r?0:r)]}return[0,0]},e.getRotate=function(t){var e=h.exec(t.attr("transform"));return null!=e?+e[1]:0},e.getScaleValues=function(t){var e=p.exec(t.attr("transform"));if(null!=e){var n=e[1],r=e[2];return[+n,null==r?+n:+r]}return[0,0]},e.clientRectsOverlap=function(t,e){return!(a.floor(t.right)<=a.ceil(e.left)||a.ceil(t.left)>=a.floor(e.right)||a.floor(t.bottom)<=a.ceil(e.top)||a.ceil(t.top)>=a.floor(e.bottom))},e.expandRect=function(t,e){return{left:t.left-e,top:t.top-e,right:t.right+e,bottom:t.bottom+e,width:t.width+2*e,height:t.height+2*e}},e.clientRectInside=function(t,e){return a.floor(e.left)<=a.ceil(t.left)&&a.floor(e.top)<=a.ceil(t.top)&&a.floor(t.right)<=a.ceil(e.right)&&a.floor(t.bottom)<=a.ceil(e.bottom)},e.intersectsBBox=function(t,e,n,i){void 0===i&&(i=.5);var o=r(t),a=r(e);return n.x+n.width>=o.min-i&&n.x<=o.max+i&&n.y+n.height>=a.min-i&&n.y<=a.max+i}},function(t,e,n){"use strict";var r=n(1),i=n(33),o=function(){function t(){this._entities=[],this._tree=r.quadtree().x(function(t){return Math.floor(t.position.x)}).y(function(t){return Math.floor(t.position.y)})}return t.prototype.addAll=function(t,e){if((o=this._entities).push.apply(o,t),void 0!==e)for(var n=0;n<t.length;n++){var r=t[n];i.within(r.position,e)&&this._tree.add(r)}else this._tree.addAll(t);var o},t.prototype.entityNearest=function(t){return this._tree.find(t.x,t.y)},t.prototype.entities=function(){return this._entities},t}();e.EntityStore=o},function(t,e,n){"use strict";var r=n(33),i=function(){function t(){"function"==typeof window.Map?this._es6Map=new window.Map:this._keyValuePairs=[]}return t.prototype.set=function(t,e){if(r.isNaN(t))throw new Error("NaN may not be used as a key to the Map");if(null!=this._es6Map)return this._es6Map.set(t,e),this;for(var n=0;n<this._keyValuePairs.length;n++)if(this._keyValuePairs[n].key===t)return this._keyValuePairs[n].value=e,this;return this._keyValuePairs.push({key:t,value:e}),this},t.prototype.get=function(t){if(null!=this._es6Map)return this._es6Map.get(t);for(var e=0;e<this._keyValuePairs.length;e++)if(this._keyValuePairs[e].key===t)return this._keyValuePairs[e].value},t.prototype.has=function(t){if(null!=this._es6Map)return this._es6Map.has(t);for(var e=0;e<this._keyValuePairs.length;e++)if(this._keyValuePairs[e].key===t)return!0;return!1},t.prototype.forEach=function(t,e){var n=this;if(null==this._es6Map)this._keyValuePairs.forEach(function(r){t.call(e,r.value,r.key,n)});else{this._es6Map.forEach(function(r,i){return t.call(e,r,i,n)},e)}},t.prototype.delete=function(t){if(null!=this._es6Map)return this._es6Map.delete(t);for(var e=0;e<this._keyValuePairs.length;e++)if(this._keyValuePairs[e].key===t)return this._keyValuePairs.splice(e,1),!0;return!1},t}();e.Map=i},function(t,e,n){"use strict";function r(t){return String(t)}var i=n(1),o=n(0),a=n(10);e.IStackingOrder=a.makeEnum(["topdown","bottomup"]);var s=window.Math;e.stack=function(t,e,n,a){void 0===a&&(a="bottomup");var s=i.map(),c=i.map(),l=new o.Map;return"topdown"===a&&(t=t.slice()).reverse(),t.forEach(function(t){var i=new o.Map;t.data().forEach(function(o,a){var l,u=r(e(o,a,t)),h=+n(o,a,t),p=h>=0?s:c;p.has(u)?(l=p.get(u),p.set(u,l+h)):(l=0,p.set(u,h)),i.set(u,{offset:l,value:h,axisValue:e(o,a,t),originalDatum:o,originalDataset:t,originalIndex:a})}),l.set(t,i)}),l},e.stackedExtents=function(t){var e=new o.Map,n=new o.Map;return t.forEach(function(t){t.forEach(function(t,r){var i=o.Math.max([t.offset+t.value,t.offset],t.offset),a=o.Math.min([t.offset+t.value,t.offset],t.offset),s=t.axisValue;e.has(r)?e.get(r).extent<i&&e.set(r,{extent:i,axisValue:s,stackedDatum:t}):e.set(r,{extent:i,axisValue:s,stackedDatum:t}),n.has(r)?n.get(r).extent>a&&n.set(r,{extent:a,axisValue:s,stackedDatum:t}):n.set(r,{extent:a,axisValue:s,stackedDatum:t})})}),{maximumExtents:e,minimumExtents:n}},e.stackedExtent=function(t,e,n){var i=[];t.forEach(function(t,o){o.data().forEach(function(a,s){if(null==n||n(a,s,o)){var c=t.get(r(e(a,s,o)));i.push(c.value+c.offset)}})});var a=o.Math.max(i,0),c=o.Math.min(i,0);return[s.min(c,0),s.max(0,a)]},e.normalizeKey=r},function(t,e,n){"use strict";function r(t,e,n){t.styles({left:e+"px",top:n+"px"}),t.attrs({x:""+e,y:""+n})}var i=n(1),o=n(0),a="__Plottable_ClientTranslator";e.getTranslator=function(t){var e=t.root().rootElement().node(),n=e[a];if(null==n){var r=document.createElementNS(e.namespaceURI,"svg");r.setAttribute("class","measurer"),r.setAttribute("style","opacity: 0; visibility: hidden; position: absolute; width: 1px; height: 1px;"),e.appendChild(r),n=new s(i.select(r)),e[a]=n}return n};var s=function(){function t(t){this._measurementElement=t}return t.prototype.computePosition=function(e,n){r(this._measurementElement,0,0);var i=this._measurementElement.node().getBoundingClientRect(),o={x:i.left,y:i.top};r(this._measurementElement,t.SAMPLE_DISTANCE,t.SAMPLE_DISTANCE);var a={x:(i=this._measurementElement.node().getBoundingClientRect()).left,y:i.top};if(o.x===a.x||o.y===a.y)return null;var s=(a.x-o.x)/t.SAMPLE_DISTANCE,c=(a.y-o.y)/t.SAMPLE_DISTANCE;r(this._measurementElement,(e-o.x)/s,(n-o.y)/c);var l={x:(i=this._measurementElement.node().getBoundingClientRect()).left,y:i.top};return{x:(l.x-o.x)/s,y:(l.y-o.y)/c}},t.prototype.isInside=function(t,e){return o.DOM.contains(t.root().rootElement().node(),e.target)},t}();s.SAMPLE_DISTANCE=100,e.Translator=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(116);n.d(e,"easeLinear",function(){return r.a});var i=n(118);n.d(e,"easeQuad",function(){return i.a}),n.d(e,"easeQuadIn",function(){return i.b}),n.d(e,"easeQuadOut",function(){return i.c}),n.d(e,"easeQuadInOut",function(){return i.a});var o=n(113);n.d(e,"easeCubic",function(){return o.a}),n.d(e,"easeCubicIn",function(){return o.b}),n.d(e,"easeCubicOut",function(){return o.c}),n.d(e,"easeCubicInOut",function(){return o.a});var a=n(117);n.d(e,"easePoly",function(){return a.a}),n.d(e,"easePolyIn",function(){return a.b}),n.d(e,"easePolyOut",function(){return a.c}),n.d(e,"easePolyInOut",function(){return a.a});var s=n(119);n.d(e,"easeSin",function(){return s.a}),n.d(e,"easeSinIn",function(){return s.b}),n.d(e,"easeSinOut",function(){return s.c}),n.d(e,"easeSinInOut",function(){return s.a});var c=n(115);n.d(e,"easeExp",function(){return c.a}),n.d(e,"easeExpIn",function(){return c.b}),n.d(e,"easeExpOut",function(){return c.c}),n.d(e,"easeExpInOut",function(){return c.a});var l=n(112);n.d(e,"easeCircle",function(){return l.a}),n.d(e,"easeCircleIn",function(){return l.b}),n.d(e,"easeCircleOut",function(){return l.c}),n.d(e,"easeCircleInOut",function(){return l.a});var u=n(111);n.d(e,"easeBounce",function(){return u.a}),n.d(e,"easeBounceIn",function(){return u.b}),n.d(e,"easeBounceOut",function(){return u.a}),n.d(e,"easeBounceInOut",function(){return u.c});var h=n(110);n.d(e,"easeBack",function(){return h.a}),n.d(e,"easeBackIn",function(){return h.b}),n.d(e,"easeBackOut",function(){return h.c}),n.d(e,"easeBackInOut",function(){return h.a});var p=n(114);n.d(e,"easeElastic",function(){return p.a}),n.d(e,"easeElasticIn",function(){return p.b}),n.d(e,"easeElasticOut",function(){return p.a}),n.d(e,"easeElasticInOut",function(){return p.c})},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o});var r=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),i=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),o=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158)},function(t,e,n){"use strict";function r(t){return(t=+t)<i?d*t*t:t<a?d*(t-=o)*t+s:t<l?d*(t-=c)*t+u:d*(t-=h)*t+p}e.b=function(t){return 1-r(1-t)},e.a=r,e.c=function(t){return((t*=2)<=1?1-r(1-t):r(t-1)+1)/2};var i=4/11,o=6/11,a=8/11,s=.75,c=9/11,l=10/11,u=.9375,h=21/22,p=63/64,d=1/i/i},function(t,e,n){"use strict";e.b=function(t){return 1-Math.sqrt(1-t*t)},e.c=function(t){return Math.sqrt(1- --t*t)},e.a=function(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}},function(t,e,n){"use strict";e.b=function(t){return t*t*t},e.c=function(t){return--t*t*t+1},e.a=function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return a});var r=2*Math.PI,i=function t(e,n){function i(t){return e*Math.pow(2,10*--t)*Math.sin((o-t)/n)}var o=Math.asin(1/(e=Math.max(1,e)))*(n/=r);return i.amplitude=function(e){return t(e,n*r)},i.period=function(n){return t(e,n)},i}(1,.3),o=function t(e,n){function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+o)/n)}var o=Math.asin(1/(e=Math.max(1,e)))*(n/=r);return i.amplitude=function(e){return t(e,n*r)},i.period=function(n){return t(e,n)},i}(1,.3),a=function t(e,n){function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((o-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((o+t)/n))/2}var o=Math.asin(1/(e=Math.max(1,e)))*(n/=r);return i.amplitude=function(e){return t(e,n*r)},i.period=function(n){return t(e,n)},i}(1,.3)},function(t,e,n){"use strict";e.b=function(t){return Math.pow(2,10*t-10)},e.c=function(t){return 1-Math.pow(2,-10*t)},e.a=function(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}},function(t,e,n){"use strict";e.a=function(t){return+t}},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o});var r=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),i=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),o=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3)},function(t,e,n){"use strict";e.b=function(t){return t*t},e.c=function(t){return t*(2-t)},e.a=function(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}},function(t,e,n){"use strict";e.b=function(t){return 1-Math.cos(t*i)},e.c=function(t){return Math.sin(t*i)},e.a=function(t){return(1-Math.cos(r*t))/2};var r=Math.PI,i=r/2},function(t,e,n){"use strict";var r="#444",i=function(){function t(t,e,n){void 0===e&&(e=10),void 0===n&&(n={});var i=this;this.ctx=t,this.lineHeight=e,this.style=n,this.createRuler=function(){return function(t){return i.ctx.font=i.style.font,{width:i.ctx.measureText(t).width,height:i.lineHeight}}},this.createPen=function(t,e,n){return null==n&&(n=i.ctx),n.save(),n.translate(e.translate[0],e.translate[1]),n.rotate(e.rotate*Math.PI/180),i.createCanvasPen(n)},void 0===this.style.fill&&(this.style.fill=r)}return t.prototype.createCanvasPen=function(t){var e=this;return{destroy:function(){t.restore()},write:function(n,r,i,o){t.textAlign=r,null!=e.style.font&&(t.font=e.style.font),null!=e.style.fill&&(t.fillStyle=e.style.fill,t.fillText(n,i,o)),null!=e.style.stroke&&(t.strokeStyle=e.style.fill,t.strokeText(n,i,o))}}},t}();e.CanvasContext=i},function(t,e,n){"use strict";var r=function(){function t(){}return t.append=function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=t.create.apply(t,[n].concat(r));return e.appendChild(o),o},t.create=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=document.createElementNS(t.SVG_NS,e);return t.addClasses.apply(t,[i].concat(n)),i},t.addClasses=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];e=e.filter(function(t){return null!=t}),null!=t.classList?e.forEach(function(e){t.classList.add(e)}):t.setAttribute("class",e.join(" "))},t.getDimensions=function(t){if(t.getBBox)try{var e=t.getBBox();return{width:e.width,height:e.height}}catch(t){}return{height:0,width:0}},t}();r.SVG_NS="http://www.w3.org/2000/svg",e.SvgUtils=r;var i=function(){function t(t,e,n){void 0===n&&(n=!1);var i=this;this.element=t,this.className=e,this.addTitleElement=n,this.createRuler=function(){var t=i.getTextElements(i.element),e=t.parentElement,n=t.containerElement,o=t.textElement;return function(t){e.appendChild(n),o.textContent=t;var i=r.getDimensions(o);return e.removeChild(n),i}},this.createPen=function(t,e,n){null==n&&(n=i.element);var o=r.append(n,"g","text-container",i.className);i.addTitleElement&&(r.append(o,"title").textContent=t,o.setAttribute("title",t));var a=r.append(o,"g","text-area");return a.setAttribute("transform","translate("+e.translate[0]+","+e.translate[1]+")rotate("+e.rotate+")"),i.createSvgLinePen(a)}}return t.prototype.setAddTitleElement=function(t){this.addTitleElement=t},t.prototype.createSvgLinePen=function(t){return{write:function(e,n,i,o){var a=r.append(t,"text","text-line");a.textContent=e,a.setAttribute("text-anchor",n),a.setAttribute("transform","translate("+i+","+o+")"),a.setAttribute("y","-0.25em")}}},t.prototype.getTextElements=function(t){if("text"===t.tagName)return null==(n=t.parentElement)&&(n=t.parentNode),n.removeChild(t),{containerElement:t,parentElement:n,textElement:t};var e=t.querySelector("text");if(null!=e){var n=t.parentElement;return null==n&&(n=t.parentNode),n.removeChild(t),{containerElement:t,parentElement:n,textElement:e}}var i=r.create("text",this.className);return{containerElement:i,parentElement:t,textElement:i}},t}();e.SvgContext=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(20),o=n(34),a=function(t){function e(e){var n=t.call(this,e)||this;return n.dimCache=new i.Cache(function(t){return n._measureNotFromCache(t)}),n}return r(e,t),e.prototype._measureNotFromCache=function(e){return t.prototype.measure.call(this,e)},e.prototype.measure=function(t){return void 0===t&&(t=o.AbstractMeasurer.HEIGHT_TEXT),this.dimCache.get(t)},e.prototype.reset=function(){this.dimCache.clear(),t.prototype.reset.call(this)},e}(n(53).CacheCharacterMeasurer);e.CacheMeasurer=a},function(t,e,n){"use strict";var r=n(52),i=n(55),o=n(57),a=n(59),s=function(){function t(t){this.context=t,this.measurer=new i.CacheMeasurer(this.context),this.wrapper=new o.Wrapper,this.writer=new a.Writer(this.measurer,this.context,this.wrapper)}return t.svg=function(e,n,i){return new t(new r.SvgContext(e,n,i))},t.canvas=function(e,n,i){return new t(new r.CanvasContext(e,n,i))},t.prototype.write=function(t,e,n,r,i){this.writer.write(t,e,n,r,i)},t.prototype.clearMeasurerCache=function(){this.measurer.reset()},t}();e.Typesetter=s},function(t,e,n){"use strict";var r=function(){function t(t){this.cache={},this.compute=t}return t.prototype.get=function(t){return this.cache.hasOwnProperty(t)||(this.cache[t]=this.compute(t)),this.cache[t]},t.prototype.clear=function(){return this.cache={},this},t}();e.Cache=r},function(t,e,n){"use strict";var r=function(){function t(){}return t.arrayEq=function(t,e){if(null==t||null==e)return t===e;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},t.objEq=function(e,n){if(null==e||null==n)return e===n;var r=Object.keys(e).sort(),i=Object.keys(n).sort(),o=r.map(function(t){return e[t]}),a=i.map(function(t){return n[t]});return t.arrayEq(r,i)&&t.arrayEq(o,a)},t.strictEq=function(t,e){return t===e},t.defaults=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(null==t)throw new TypeError("Cannot convert undefined or null to object");var r=Object(t);return e.forEach(function(t){if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}),r},t}();e.Methods=r},function(t,e,n){"use strict";var r=function(){function t(){}return t.combineWhitespace=function(t){return t.replace(/[ \t]+/g," ")},t.isNotEmptyString=function(t){return t&&""!==t.trim()},t.trimStart=function(e,n){if(!e)return e;var r=e.split(""),i=n?function(e){return e.split(n).some(t.isNotEmptyString)}:t.isNotEmptyString;return r.reduce(function(t,e){return i(t+e)?t+e:t},"")},t.trimEnd=function(e,n){if(!e)return e;var r=e.split("");return r.reverse(),(r=t.trimStart(r.join(""),n).split("")).reverse(),r.join("")},t}();e.StringMethods=r},function(t,e,n){"use strict";var r=function(){function t(){this.WordDividerRegExp=new RegExp("\\W"),this.WhitespaceRegExp=new RegExp("\\s")}return t.prototype.tokenize=function(t){var e=this;return t.split("").reduce(function(t,n){return t.slice(0,-1).concat(e.shouldCreateNewToken(t[t.length-1],n))},[""])},t.prototype.shouldCreateNewToken=function(t,e){if(!t)return[e];var n=t[t.length-1];return this.WhitespaceRegExp.test(n)&&this.WhitespaceRegExp.test(e)?[t+e]:this.WhitespaceRegExp.test(n)||this.WhitespaceRegExp.test(e)?[t,e]:this.WordDividerRegExp.test(n)||this.WordDividerRegExp.test(e)?n===e?[t+e]:[t,e]:[t+e]},t}();e.Tokenizer=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.wrap=function(n,r,i,o){var a=this;if(void 0===o&&(o=1/0),n.split("\n").length>1)throw new Error("SingleLineWrapper is designed to work only on single line");var s=function(e){return t.prototype.wrap.call(a,n,r,e,o)},c=s(i);if(c.noLines<2)return c;for(var l=0,u=i,h=0;h<e.NO_WRAP_ITERATIONS&&u>l;++h){var p=(u+l)/2,d=s(p);this.areSameResults(c,d)?(u=p,c=d):l=p}return c},e.prototype.areSameResults=function(t,e){return t.noLines===e.noLines&&t.truncatedText===e.truncatedText},e}(n(58).Wrapper);i.NO_WRAP_ITERATIONS=5,e.SingleLineWrapper=i},function(t,e,n){"use strict";var r=n(20),i={textRotation:0,textShear:0,xAlign:"left",yAlign:"top"},o=function(){function t(t,e,n){this._measurer=t,this._penFactory=e,this._wrapper=n}return t.prototype.measurer=function(t){return this._measurer=t,this},t.prototype.wrapper=function(t){return this._wrapper=t,this},t.prototype.penFactory=function(t){return this._penFactory=t,this},t.prototype.write=function(e,n,o,a,s){if(void 0===a&&(a={}),a=r.Methods.defaults({},i,a),-1===t.SupportedRotation.indexOf(a.textRotation))throw new Error("unsupported rotation - "+a.textRotation+". Supported rotations are "+t.SupportedRotation.join(", "));if(null!=a.textShear&&a.textShear<-80||a.textShear>80)throw new Error("unsupported shear angle - "+a.textShear+". Must be between -80 and 80");var c=Math.abs(Math.abs(a.textRotation)-90)>45,l=c?n:o,u=c?o:n,h=a.textShear,p=h*Math.PI/180,d=this._measurer.measure().height,_=d*Math.tan(p),f=l/Math.cos(p)-Math.abs(_),y=u*Math.cos(p),m=r.StringMethods.combineWhitespace(e),g=(this._wrapper?this._wrapper.wrap(m,this._measurer,f,y).wrappedText:m).split("\n"),v=t.XOffsetFactor[a.xAlign]*f*Math.sin(p)-t.YOffsetFactor[a.yAlign]*(y-g.length*d),x=[0,0],b=a.textRotation+h;switch(a.textRotation){case 90:x=[n+v,0];break;case-90:x=[-v,o];break;case 180:x=[n,o+v];break;default:x=[0,-v]}var E=this._penFactory.createPen(e,{translate:x,rotate:b},s);this.writeLines(g,E,f,d,_,a.xAlign),null!=E.destroy&&E.destroy()},t.prototype.writeLines=function(e,n,r,i,o,a){e.forEach(function(e,s){var c=(o>0?(s+1)*o:s*o)+r*t.XOffsetFactor[a],l=t.AnchorConverter[a];n.write(e,l,c,(s+1)*i)})},t}();o.SupportedRotation=[-90,0,180,90],o.AnchorConverter={center:"middle",left:"start",right:"end"},o.XOffsetFactor={center:.5,left:0,right:1},o.YOffsetFactor={bottom:1,center:.5,top:0},e.Writer=o},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}n(64);var i=n(7);e.Animators=i;var o=n(60);e.Axes=o;var a=n(35);e.Components=a;var s=n(22);e.Configs=s;var c=n(8);e.Formatters=c;var l=n(28);e.RenderController=l;var u=n(36);e.RenderPolicies=u;var h=n(29);e.SymbolFactories=h;var p=n(13);e.Dispatchers=p;var d=n(63);e.Drawers=d;var _=n(14);e.Interactions=_;var f=n(17);e.Plots=f;var y=n(3);e.Scales=y;var m=n(0);e.Utils=m,r(n(21));var g=n(26);e.TimeInterval=g.TimeInterval,r(n(4)),r(n(27)),r(n(61));var v=n(62);e.version=v.version,r(n(23)),r(n(6)),r(n(15)),r(n(37)),r(n(16)),r(n(2)),r(n(11)),r(n(18))}])});
//# sourceMappingURL=/sm/d69f9adf033a1056753ec21520a01a7580b37038f9e28ccbf577bceba319299a.map